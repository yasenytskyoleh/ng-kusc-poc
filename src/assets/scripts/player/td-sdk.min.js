!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./",e(0)}([function(t,e,n){n(63),n(112),t.exports=n(113)},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],r=function(t,e,n){function i(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function r(t,e){for(var n,r,a,o,s,u,l,c,d=[],h=[{cls:0,refs:[]}],f={},p=1,g=t.length,m=0;m<g;++m){for(a=t[m],a?"[object Function]"!=A.call(a)&&i("mixin #"+m+" is not a callable constructor.",e):i("mixin #"+m+" is unknown. Did you use dojo.require to pull it in?",e),r=a._meta?a._meta.bases:[a],o=0,n=r.length-1;n>=0;--n)s=r[n].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+S++),l=s.declaredClass,f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:r[n]},++p),u=f[l],o&&o!==u&&(u.refs.push(o),++o.count),o=u;++o.count,h[0].refs.push(o)}for(;h.length;){for(o=h.pop(),d.push(o.cls),--p;c=o.refs,1==c.length;){if(o=c[0],!o||--o.count){o=0;break}d.push(o.cls),--p}if(o)for(m=0,g=c.length;m<g;++m)o=c[m],--o.count||h.push(o)}return p&&i("can't build consistent linearization",e),a=t[0],d[0]=a?a._meta&&a===d[d.length-a._meta.bases.length]?a._meta.bases.length:1:0,d}function a(t,e,n){var r,a,o,s,u,l,c,d,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(r=t,t=e,e=n),n=0,s=t.callee,r=r||s.nom,r||i("can't deduce a name to call inherited()",this.declaredClass),u=this.constructor._meta,o=u.bases,h=f.p,r!=k){if(f.c!==s&&(h=0,l=o[0],u=l._meta,u.hidden[r]!==s)){a=u.chains,a&&"string"==typeof a[r]&&i("calling chained method with inherited: "+r,this.declaredClass);do if(u=l._meta,c=l.prototype,u&&(c[r]===s&&c.hasOwnProperty(r)||u.hidden[r]===s))break;while(l=o[++h]);h=l?h:-1}if(l=o[++h])if(c=l.prototype,l._meta&&c.hasOwnProperty(r))n=c[r];else{d=b[r];do if(c=l.prototype,n=c[r],n&&(l._meta?c.hasOwnProperty(r):n!==d))break;while(l=o[++h])}n=l&&n||b[r]}else{if(f.c!==s&&(h=0,u=o[0]._meta,u&&u.ctor!==s)){for(a=u.chains,a&&"manual"===a.constructor||i("calling chained constructor with inherited",this.declaredClass);(l=o[++h])&&(u=l._meta,!u||u.ctor!==s););h=l?h:-1}for(;(l=o[++h])&&(u=l._meta,!(n=u?u.ctor:l)););n=l&&n}if(f.c=n,f.p=h,n)return e===!0?n:n.apply(this,e||t)}function o(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,n){var i=this.getInherited(t,e);if(i)return i.apply(this,n||e||t)}function u(t){for(var e=this.constructor._meta.bases,n=0,i=e.length;n<i;++n)if(e[n]===t)return!0;return this instanceof t}function l(t,i){for(var r in i)r!=k&&i.hasOwnProperty(r)&&(t[r]=i[r]);if(e("bug-for-in-skips-shadowed"))for(var a=n._extraNames,o=a.length;o;)r=a[--o],r!=k&&i.hasOwnProperty(r)&&(t[r]=i[r])}function c(t,i){var r,a;for(r in i)a=i[r],a===b[r]&&r in b||r==k||("[object Function]"==A.call(a)&&(a.nom=r),t[r]=a);if(e("bug-for-in-skips-shadowed"))for(var o=n._extraNames,s=o.length;s;)r=o[--s],a=i[r],a===b[r]&&r in b||r==k||("[object Function]"==A.call(a)&&(a.nom=r),t[r]=a);return t}function d(t){return _.safeMixin(this.prototype,t),this}function h(t,e){return _([this].concat(t),e||{})}function f(t,e){return function(){var n,i,r,a,o=arguments,s=o,u=o[0],l=t.length;if(!(this instanceof o.callee))return y(o);if(e&&(u&&u.preamble||this.preamble))for(a=new Array(t.length),a[0]=o,i=0;u=o[0],u&&(n=u.preamble,n&&(o=n.apply(this,o)||o)),n=t[i].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(o=n.apply(this,o)||o),++i!=l;)a[i]=o;for(i=l-1;i>=0;--i)n=t[i],r=n._meta,n=r?r.ctor:n,n&&n.apply(this,a?a[i]:o);n=this.postscript,n&&n.apply(this,s)}}function p(t,e){return function(){var n,i=arguments,r=i,a=i[0];return this instanceof i.callee?(e&&(a&&(n=a.preamble,n&&(r=n.apply(this,r)||r)),n=this.preamble,n&&n.apply(this,r)),t&&t.apply(this,i),n=this.postscript,void(n&&n.apply(this,i))):y(i)}}function g(t){return function(){var e,n,i=arguments,r=0;if(!(this instanceof i.callee))return y(i);for(;e=t[r];++r)if(n=e._meta,e=n?n.ctor:e){e.apply(this,i);break}e=this.postscript,e&&e.apply(this,i)}}function m(t,e,n){return function(){var i,r,a,o=0,s=1;for(n&&(o=e.length-1,s=-1);i=e[o];o+=s)r=i._meta,a=(r?r.hidden:i.prototype)[t],a&&a.apply(this,arguments)}}function v(t){T.prototype=t.prototype;var e=new T;return T.prototype=null,e}function y(t){var e=t.callee,n=v(e);return e.apply(n,t),n}function _(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var c,y,T,S,C,L,D,I=1,R=e;if("[object Array]"==A.call(e)?(L=r(e,t),T=L[0],I=L.length-T,e=L[I]):(L=[0],e?"[object Function]"==A.call(e)?(T=e._meta,L=L.concat(T?T.bases:e)):i("base class is not a callable constructor.",t):null!==e&&i("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(y=I-1;c=v(e),y;--y)T=L[y],(T._meta?l:E)(c,T.prototype),S=new Function,S.superclass=e,S.prototype=c,e=c.constructor=S;else c={};for(_.safeMixin(c,s),T=s.constructor,T!==b.constructor&&(T.nom=k,c.constructor=T),y=I-1;y;--y)T=L[y]._meta,T&&T.chains&&(D=E(D||{},T.chains));if(c["-chains-"]&&(D=E(D||{},c["-chains-"])),T=!D||!D.hasOwnProperty(k),L[0]=S=D&&"manual"===D.constructor?g(L):1==L.length?p(s.constructor,T):f(L,T),S._meta={bases:L,hidden:s,chains:D,parents:R,ctor:s.constructor},S.superclass=e&&e.prototype,S.extend=d,S.createSubclass=h,S.prototype=c,c.constructor=S,c.getInherited=o,c.isInstanceOf=u,c.inherited=w,c.__inherited=a,t&&(c.declaredClass=t,n.setObject(t,S)),D)for(C in D)c[C]&&"string"==typeof D[C]&&C!=k&&(T=c[C]=m(C,L,"after"===D[C]),T.nom=C);return S}var E=n.mixin,b=Object.prototype,A=b.toString,T=new Function,S=0,k="constructor",w=t.config.isDebug?s:a;return t.safeMixin=_.safeMixin=c,t.declare=_,_}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(4),n(9)],r=function(t,e){e.add("bug-for-in-skips-shadowed",function(){for(var t in{toString:1})return 0;return 1});var n=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=n.length,r=function(e,n,i){var r,a=0,o=t.global;if(!i){if(!e.length)return o;r=e[a++];try{i=t.scopeMap[r]&&t.scopeMap[r][1]}catch(t){}i=i||(r in o?o[r]:n?o[r]={}:void 0)}for(;i&&(r=e[a++]);)i=r in i?i[r]:n?i[r]={}:void 0;return i},a=Object.prototype.toString,o=function(t,e,n){return(n||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,u={_extraNames:n,_mixin:function(t,r,a){var o,s,u,l={};for(o in r)s=r[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);if(e("bug-for-in-skips-shadowed")&&r)for(u=0;u<i;++u)o=n[u],s=r[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);return t},mixin:function(t,e){t||(t={});for(var n=1,i=arguments.length;n<i;n++)u._mixin(t,arguments[n]);return t},setObject:function(t,e,n){var i=t.split("."),a=i.pop(),o=r(i,!0,n);return o&&a?o[a]=e:void 0},getObject:function(t,e,n){return r(t.split("."),e,n)},exists:function(t,e){return void 0!==u.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===a.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==typeof t||u.isArray(t)||u.isFunction(t))},isArrayLike:function(t){return t&&void 0!==t&&!u.isString(t)&&!u.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(u.isArray(t)||isFinite(t.length))},isAlien:function(t){return t&&!u.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var n=1,i=arguments.length;n<i;n++)u._mixin(t.prototype,arguments[n]);return t},_hitchArgs:function(e,n){var i=u._toArray(arguments,2),r=u.isString(n);return function(){var a=u._toArray(arguments),o=r?(e||t.global)[n]:n;return o&&o.apply(e||this,i.concat(a))}},hitch:function(e,n){if(arguments.length>2)return u._hitchArgs.apply(t,arguments);if(n||(n=e,e=null),u.isString(n)){if(e=e||t.global,!e[n])throw['lang.hitch: scope["',n,'"] is null (scope="',e,'")'].join("");return function(){return e[n].apply(e,arguments||[])}}return e?function(){return n.apply(e,arguments||[])}:n},delegate:function(){function t(){}return function(e,n){t.prototype=e;var i=new t;return t.prototype=null,n&&u._mixin(i,n),i}}(),_toArray:e("ie")?function(){function t(t,e,n){for(var i=n||[],r=e||0;r<t.length;r++)i.push(t[r]);return i}return function(e){return(e.item?t:o).apply(this,arguments)}}():o,partial:function(e){var n=[null];return u.hitch.apply(t,n.concat(u._toArray(arguments)))},clone:function(t){if(!t||"object"!=typeof t||u.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,n,i;if(u.isArray(t))for(e=[],n=0,i=t.length;n<i;++n)n in t&&e.push(u.clone(t[n]));else e=t.constructor?new t.constructor:{};return u._mixin(e,t,u.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,n){return t.replace(n||s,u.isFunction(e)?e:function(t,n){return u.getObject(n,!1,e)})}};return e("extend-dojo")&&u.mixin(t,u),u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(33),n(5),n(9)],r=function(t,e,n){"use strict";function i(t,e,i,r,a){var o=e.match(/(.*):(.*)/);if(o)return e=o[2],o=o[1],s.selector(o,e).call(a,t,i);if(n("touch")&&(u.test(e)&&(i=T(i)),n("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,i=T(i))),f&&(i=f(i)),t.addEventListener){var l=e in d,c=l?d[e]:e;return t.addEventListener(c,i,l),{remove:function(){t.removeEventListener(c,i,l)}}}if(e="on"+e,v&&t.attachEvent)return v(t,e,i);throw new Error("Target must be an event emitter")}function r(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(n("dom")){var o=window.ScriptEngineMajorVersion;n.add("jscript",o&&o()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(t,e,n){return!!n.attachEvent})}var s=function(t,e,n,r){return"function"!=typeof t.on||"function"==typeof e||t.nodeType?s.parse(t,e,n,i,r,this):t.on(e,n)};s.pausable=function(t,e,n,i){var r,a=s(t,e,function(){if(!r)return n.apply(this,arguments)},i);return a.pause=function(){r=!0},a.resume=function(){r=!1},a},s.once=function(t,e,n,i){var r=s(t,e,function(){return r.remove(),n.apply(this,arguments)});return r},s.parse=function(t,e,n,i,r,a){if(e.call)return e.call(a,t,n);if(e.indexOf(",")>-1){for(var o,s=e.split(/\s*,\s*/),u=[],l=0;o=s[l++];)u.push(i(t,o,n,r,a));return u.remove=function(){for(var t=0;t<u.length;t++)u[t].remove()},u}return i(t,e,n,r,a)};var u=/^touch/;s.selector=function(t,n,i){return function(r,a){function o(n){for(u=u&&u.matches?u:e.query;!u.matches(n,t,r);)if(n==r||i===!1||!(n=n.parentNode)||1!=n.nodeType)return;return n}var u="function"==typeof t?{matches:t}:this,l=n.bubble;return l?s(r,l(o),a):s(r,n,function(t){var e=o(t.target);return e&&a.call(e,t)})}};var l=[].slice,c=s.emit=function(t,e,n){var i=l.call(arguments,2),o="on"+e;if("parentNode"in t){var s=i[0]={};for(var u in n)s[u]=n[u];s.preventDefault=r,s.stopPropagation=a,s.target=t,s.type=e,n=s}do t[o]&&t[o].apply(t,i);while(n&&n.bubbles&&(t=t.parentNode));return n&&n.cancelable&&n},d=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=h,t.apply(this,arguments)}};if(n("dom-addeventlistener"))s.emit=function(t,e,n){if(t.dispatchEvent&&document.createEvent){var i=t.ownerDocument.createEvent("HTMLEvents");i.initEvent(e,!!n.bubbles,!!n.cancelable);for(var r in n)r in i||(i[r]=n[r]);return t.dispatchEvent(i)&&i}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(!t){var n=e&&(e.ownerDocument||e.document||e).parentWindow||window;t=n.event}if(!t)return t;try{p&&t.type==p.type&&t.srcElement==p.target&&(t=p)}catch(t){}if(!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=_,t.preventDefault=E),t.type){case"keypress":var i="charCode"in t?t.charCode:t.keyCode;10==i?(i=0,t.keyCode=13):13==i||27==i?i=0:3==i&&(i=99),t.charCode=i,y(t)}return t};var p,g=function(t){this.handle=t};g.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(t){return function(e){e=s._fixEvent(e,this);var n=t.call(this,e);return e.modified&&(p||setTimeout(function(){p=null}),p=e),n}},v=function(e,i,r){if(r=m(r),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var a=e[i];if(!a||!a.listeners){var o=a;a=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),a.listeners=[],e[i]=a,a.global=this,o&&a.listeners.push(_dojoIEListeners_.push(o)-1)}var s;return a.listeners.push(s=a.global._dojoIEListeners_.push(r)-1),new g(s)}return t.after(e,i,r,!0)},y=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},_=function(){this.cancelBubble=!0},E=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var b=function(){},A=window.orientation,T=function(t){return function(e){var i=e.corrected;if(!i){var r=e.type;try{delete e.type}catch(t){}if(e.type){if(n("mozilla")){var i={};for(var a in e)i[a]=e[a]}else{b.prototype=e;var i=new b}i.preventDefault=function(){e.preventDefault()},i.stopPropagation=function(){e.stopPropagation()}}else i=e,i.type=r;if(e.corrected=i,"resize"==r)return A==window.orientation?null:(A=window.orientation,i.type="orientationchange",t.call(this,i));"rotation"in i||(i.rotation=0,i.scale=1);var o=i.changedTouches[0];for(var s in o)delete i[s],i[s]=o[s]}return t.call(this,i)}};return s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(27)],r=function(t){var e={config:function(){return{"config-deferredInstrumentation":0,"config-dojo-loader-catches":0,"config-tlmSiblingOfDojo":0,"dojo-amd-factory-scan":0,"dojo-combo-api":0,"dojo-config-api":1,"dojo-config-require":0,"dojo-debug-messages":0,"dojo-dom-ready-api":1,"dojo-firebug":0,"dojo-guarantee-console":1,"dojo-has-api":1,"dojo-inject-api":1,"dojo-loader":1,"dojo-log-api":0,"dojo-modulePaths":0,"dojo-moduleUrl":0,"dojo-publish-privates":0,"dojo-requirejs-api":0,"dojo-sniff":1,"dojo-sync-loader":0,"dojo-test-sniff":0,"dojo-timeout-api":0,"dojo-trace-api":0,"dojo-undef-api":0,"dojo-v1x-i18n-Api":1,dom:1,"host-browser":1,"extend-dojo":1,touch:0}}},n=t.has||function(){};if(!n("dojo-has-api")){var i="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,r=this,a=i&&document,o=a&&a.createElement("DiV"),s=e.config&&e.config()||{};n=function(t){return"function"==typeof s[t]?s[t]=s[t](r,a,o):s[t]},n.cache=s,n.add=function(t,e,i,r){return("undefined"==typeof s[t]||r)&&(s[t]=e),i&&n(t)},n.add("host-browser",i),n.add("dom",i),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var u=document.createElement("form");n.add("dom-attributes-explicit",0==u.attributes.length),n.add("dom-attributes-specified-flag",u.attributes.length>0&&u.attributes.length<40)}return n.clearElement=function(t){return t.innerHTML="",t},n.normalize=function(t,e){var i=t.match(/[\?:]|[^:\?]*/g),r=0,a=function(t){var e=i[r++];return":"==e?0:"?"==i[r++]?!t&&n(e)?a():(a(!0),a(t)):e||0};return t=a(),t&&e(t)},n.load=function(t,e,n){t?e([t],n):n()},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(t){i=[n(4),n(76),n(27),t],r=function(t,e,n,i){i={id:"dojo/_base/kernel"};var r,a,o,s={},u={},l={config:e,global:this,dijit:s,dojox:u},c={dojo:["dojo",l],dijit:["dijit",s],dojox:["dojox",u]},d=n.map&&n.map[i.id.match(/[^\/]+/)[0]];for(a in d)c[a]?c[a][0]=d[a]:c[a]=[d[a],{}];for(a in c)o=c[a],o[1]._scopeName=o[0],e.noGlobals||(this[o[0]]=o[1]);l.scopeMap=c,l.baseUrl=l.config.baseUrl=n.baseUrl,l.isAsync=!t("dojo-loader")||n.async,l.locale=e.locale;var h="$Rev: 31379 $".match(/\d+/);if(l.version={major:1,minor:9,patch:0,flag:"",revision:h?+h[0]:NaN,toString:function(){var t=l.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l),t("host-rhino")?l.exit=function(t){quit(t)}:l.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var f,p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(r=0;f=p[r++];)console[f]||!function(){var t=f+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":")}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),l.deprecated=l.experimental=function(){},t("dojo-debug-messages")&&(l.deprecated=function(t,e,n){var i="DEPRECATED: "+t;e&&(i+=" "+e),n&&(i+=" -- will be removed in version: "+n),console.warn(i)},l.experimental=function(t,e){var n="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(n+=" "+e),console.warn(n)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){l.deprecated("dojo.modulePaths","use paths configuration");var g={};for(a in e.modulePaths)g[a.replace(/\./g,"/")]=e.modulePaths[a];n({paths:g})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(l.moduleUrl=function(t,e){l.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var i=null;return t&&(i=n.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),i}),l._hasResource={},l}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(28)(t))},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],r=function(t,e,n){function i(t){return s[t]=new Function("item","index","array",t)}function r(t){var e=!t;return function(n,r,a){var o,u=0,l=n&&n.length||0;if(l&&"string"==typeof n&&(n=n.split("")),"string"==typeof r&&(r=s[r]||i(r)),a){for(;u<l;++u)if(o=!r.call(a,n[u],u,n),t^o)return!o}else for(;u<l;++u)if(o=!r(n[u],u,n),t^o)return!o;return e}}function a(t){var e=1,n=0,i=0;return t||(e=n=i=-1),function(r,a,s,l){if(l&&e>0)return u.lastIndexOf(r,a,s);var c,d=r&&r.length||0,h=t?d+i:n;for(s===o?c=t?n:d+i:s<0?(c=d+s,c<0&&(c=n)):c=s>=d?d+i:s,d&&"string"==typeof r&&(r=r.split(""));c!=h;c+=e)if(r[c]==a)return c;return-1}}var o,s={},u={every:r(!1),some:r(!0),indexOf:a(!0),lastIndexOf:a(!1),forEach:function(t,e,n){var r=0,a=t&&t.length||0;if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;r<a;++r)e.call(n,t[r],r,t);else for(;r<a;++r)e(t[r],r,t)},map:function(t,e,n,r){var a=0,o=t&&t.length||0,u=new(r||Array)(o);if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;a<o;++a)u[a]=e.call(n,t[a],a,t);else for(;a<o;++a)u[a]=e(t[a],a,t);return u},filter:function(t,e,n){var r,a=0,o=t&&t.length||0,u=[];if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||i(e)),n)for(;a<o;++a)r=t[a],e.call(n,r,a,t)&&u.push(r);else for(;a<o;++a)r=t[a],e(r,a,t)&&u.push(r);return u},clearCache:function(){s={}}};return e("extend-dojo")&&n.mixin(t,u),u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(9),n(17)],r=function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var n={};t("ie")?n.byId=function(t,n){if("string"!=typeof t)return t;var i=n||e.doc,r=t&&i.getElementById(t);if(r&&(r.attributes.id.value==t||r.id==t))return r;var a=i.all[t];a&&!a.nodeName||(a=[a]);for(var o=0;r=a[o++];)if(r.attributes&&r.attributes.id&&r.attributes.id.value==t||r.id==t)return r}:n.byId=function(t,n){return("string"==typeof t?(n||e.doc).getElementById(t):t)||null},n.isDescendant=function(t,e){try{for(t=n.byId(t),e=n.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(t){}return!1},t.add("css-user-select",function(t,e,n){if(!n)return!1;var i=n.style,r=["Khtml","O","ms","Moz","Webkit"],a=r.length,o="userSelect";do if("undefined"!=typeof i[o])return o;while(a--&&(o=r[a]+"UserSelect"));return!1});var i=t("css-user-select");return n.setSelectable=i?function(t,e){n.byId(t).style[i]=e?"":"none"}:function(t,e){t=n.byId(t);var i=t.getElementsByTagName("*"),r=i.length;if(e)for(t.removeAttribute("unselectable");r--;)i[r].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");r--;)i[r].setAttribute("unselectable","on")},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i;(function(t,r){(function(){function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function s(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function u(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function d(t,e){var n=null==t?0:t.length;return!!n&&A(t,e,0)>-1}function h(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function f(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function p(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function g(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function m(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function v(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.split("")}function _(t){return t.match(je)||[]}function E(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function b(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function A(t,e,n){return e===e?X(t,e,n):b(t,S,n)}function T(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function S(t){return t!==t}function k(t,e){var n=null==t?0:t.length;return n?I(t,e)/n:Nt}function w(t){return function(e){return null==e?nt:e[t]}}function C(t){return function(e){return null==t?nt:t[e]}}function L(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function D(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function I(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==nt&&(n=n===nt?a:n+a)}return n}function R(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function P(t,e){return f(e,function(e){return[e,t[e]]})}function O(t){return function(e){return t(e)}}function x(t,e){return f(e,function(e){return t[e]})}function N(t,e){return t.has(e)}function M(t,e){for(var n=-1,i=t.length;++n<i&&A(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&A(e,t[n],0)>-1;);return n}function U(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function B(t){return"\\"+Zn[t]}function j(t,e){return null==t?nt:t[e]}function G(t){return Kn.test(t)}function H(t){return Wn.test(t)}function V(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function W(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==lt||(t[n]=lt,a[r++]=n)}return a}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function X(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function Q(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function $(t){return G(t)?Z(t):mi(t)}function J(t){return G(t)?tt(t):y(t)}function Z(t){for(var e=Hn.lastIndex=0;Hn.test(t);)++e;return e}function tt(t){return t.match(Hn)||[]}function et(t){return t.match(Vn)||[]}var nt,it="4.17.15",rt=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ot="Expected a function",st="__lodash_hash_undefined__",ut=500,lt="__lodash_placeholder__",ct=1,dt=2,ht=4,ft=1,pt=2,gt=1,mt=2,vt=4,yt=8,_t=16,Et=32,bt=64,At=128,Tt=256,St=512,kt=30,wt="...",Ct=800,Lt=16,Dt=1,It=2,Rt=3,Pt=1/0,Ot=9007199254740991,xt=1.7976931348623157e308,Nt=NaN,Mt=4294967295,Ft=Mt-1,Ut=Mt>>>1,Bt=[["ary",At],["bind",gt],["bindKey",mt],["curry",yt],["curryRight",_t],["flip",St],["partial",Et],["partialRight",bt],["rearg",Tt]],jt="[object Arguments]",Gt="[object Array]",Ht="[object AsyncFunction]",Vt="[object Boolean]",Kt="[object Date]",Wt="[object DOMException]",qt="[object Error]",Yt="[object Function]",zt="[object GeneratorFunction]",Xt="[object Map]",Qt="[object Number]",$t="[object Null]",Jt="[object Object]",Zt="[object Promise]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",ie="[object String]",re="[object Symbol]",ae="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",de="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",pe="[object Int32Array]",ge="[object Uint8Array]",me="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",_e=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ae=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Se=RegExp(Ae.source),ke=RegExp(Te.source),we=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pe=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(Pe.source),xe=/^\s+|\s+$/g,Ne=/^\s+/,Me=/\s+$/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,qe=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,Je="\\ud800-\\udfff",Ze="\\u0300-\\u036f",tn="\\ufe20-\\ufe2f",en="\\u20d0-\\u20ff",nn=Ze+tn+en,rn="\\u2700-\\u27bf",an="a-z\\xdf-\\xf6\\xf8-\\xff",on="\\xac\\xb1\\xd7\\xf7",sn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",un="\\u2000-\\u206f",ln=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cn="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",hn=on+sn+un+ln,fn="['’]",pn="["+Je+"]",gn="["+hn+"]",mn="["+nn+"]",vn="\\d+",yn="["+rn+"]",_n="["+an+"]",En="[^"+Je+hn+vn+rn+an+cn+"]",bn="\\ud83c[\\udffb-\\udfff]",An="(?:"+mn+"|"+bn+")",Tn="[^"+Je+"]",Sn="(?:\\ud83c[\\udde6-\\uddff]){2}",kn="[\\ud800-\\udbff][\\udc00-\\udfff]",wn="["+cn+"]",Cn="\\u200d",Ln="(?:"+_n+"|"+En+")",Dn="(?:"+wn+"|"+En+")",In="(?:"+fn+"(?:d|ll|m|re|s|t|ve))?",Rn="(?:"+fn+"(?:D|LL|M|RE|S|T|VE))?",Pn=An+"?",On="["+dn+"]?",xn="(?:"+Cn+"(?:"+[Tn,Sn,kn].join("|")+")"+On+Pn+")*",Nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fn=On+Pn+xn,Un="(?:"+[yn,Sn,kn].join("|")+")"+Fn,Bn="(?:"+[Tn+mn+"?",mn,Sn,kn,pn].join("|")+")",jn=RegExp(fn,"g"),Gn=RegExp(mn,"g"),Hn=RegExp(bn+"(?="+bn+")|"+Bn+Fn,"g"),Vn=RegExp([wn+"?"+_n+"+"+In+"(?="+[gn,wn,"$"].join("|")+")",Dn+"+"+Rn+"(?="+[gn,wn+Ln,"$"].join("|")+")",wn+"?"+Ln+"+"+In,wn+"+"+Rn,Mn,Nn,vn,Un].join("|"),"g"),Kn=RegExp("["+Cn+Je+nn+dn+"]"),Wn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yn=-1,zn={};zn[ce]=zn[de]=zn[he]=zn[fe]=zn[pe]=zn[ge]=zn[me]=zn[ve]=zn[ye]=!0,zn[jt]=zn[Gt]=zn[ue]=zn[Vt]=zn[le]=zn[Kt]=zn[qt]=zn[Yt]=zn[Xt]=zn[Qt]=zn[Jt]=zn[ee]=zn[ne]=zn[ie]=zn[oe]=!1;var Xn={};Xn[jt]=Xn[Gt]=Xn[ue]=Xn[le]=Xn[Vt]=Xn[Kt]=Xn[ce]=Xn[de]=Xn[he]=Xn[fe]=Xn[pe]=Xn[Xt]=Xn[Qt]=Xn[Jt]=Xn[ee]=Xn[ne]=Xn[ie]=Xn[re]=Xn[ge]=Xn[me]=Xn[ve]=Xn[ye]=!0,Xn[qt]=Xn[Yt]=Xn[oe]=!1;var Qn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},$n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ti=parseFloat,ei=parseInt,ni="object"==typeof t&&t&&t.Object===Object&&t,ii="object"==typeof self&&self&&self.Object===Object&&self,ri=ni||ii||Function("return this")(),ai="object"==typeof e&&e&&!e.nodeType&&e,oi=ai&&"object"==typeof r&&r&&!r.nodeType&&r,si=oi&&oi.exports===ai,ui=si&&ni.process,li=function(){try{var t=oi&&oi.require&&oi.require("util").types;return t?t:ui&&ui.binding&&ui.binding("util")}catch(t){}}(),ci=li&&li.isArrayBuffer,di=li&&li.isDate,hi=li&&li.isMap,fi=li&&li.isRegExp,pi=li&&li.isSet,gi=li&&li.isTypedArray,mi=w("length"),vi=C(Qn),yi=C($n),_i=C(Jn),Ei=function t(e){function n(t){if(au(t)&&!mh(t)&&!(t instanceof y)){if(t instanceof r)return t;if(mc.call(t,"__wrapped__"))return eo(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,
this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mt,this.__views__=[]}function C(){var t=new y(this.__wrapped__);return t.__actions__=Nr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Nr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Nr(this.__views__),t}function X(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Z(){var t=this.__wrapped__.value(),e=this.__dir__,n=mh(t),i=e<0,r=n?t.length:0,a=Sa(0,r,this.__views__),o=a.start,s=a.end,u=s-o,l=i?s:o-1,c=this.__iteratees__,d=c.length,h=0,f=qc(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return yr(t,this.__actions__);var p=[];t:for(;u--&&h<f;){l+=e;for(var g=-1,m=t[l];++g<d;){var v=c[g],y=v.iteratee,_=v.type,E=y(m);if(_==It)m=E;else if(!E){if(_==Dt)continue t;break t}}p[h++]=m}return p}function tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function je(){this.__data__=nd?nd(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(nd){var n=e[t];return n===st?nt:n}return mc.call(e,t)?e[t]:nt}function tn(t){var e=this.__data__;return nd?e[t]!==nt:mc.call(e,t)}function en(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nd&&e===nt?st:e,this}function nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rn(){this.__data__=[],this.size=0}function an(t){var e=this.__data__,n=In(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Ic.call(e,n,1),--this.size,!0}function on(t){var e=this.__data__,n=In(e,t);return n<0?nt:e[n][1]}function sn(t){return In(this.__data__,t)>-1}function un(t,e){var n=this.__data__,i=In(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function cn(){this.size=0,this.__data__={hash:new tt,map:new(Jc||nn),string:new tt}}function dn(t){var e=Ea(this,t).delete(t);return this.size-=e?1:0,e}function hn(t){return Ea(this,t).get(t)}function fn(t){return Ea(this,t).has(t)}function pn(t,e){var n=Ea(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ln;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,st),this}function vn(t){return this.__data__.has(t)}function yn(t){var e=this.__data__=new nn(t);this.size=e.size}function _n(){this.__data__=new nn,this.size=0}function En(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function bn(t){return this.__data__.get(t)}function An(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Jc||i.length<rt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ln(i)}return n.set(t,e),this.size=n.size,this}function Sn(t,e){var n=mh(t),i=!n&&gh(t),r=!n&&!i&&yh(t),a=!n&&!i&&!r&&Th(t),o=n||i||r||a,s=o?R(t.length,lc):[],u=s.length;for(var l in t)!e&&!mc.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pa(l,u))||s.push(l);return s}function kn(t){var e=t.length;return e?t[Zi(0,e-1)]:nt}function wn(t,e){return $a(Nr(t),Mn(e,0,t.length))}function Cn(t){return $a(Nr(t))}function Ln(t,e,n){(n===nt||Ws(t[e],n))&&(n!==nt||e in t)||xn(t,e,n)}function Dn(t,e,n){var i=t[e];mc.call(t,e)&&Ws(i,n)&&(n!==nt||e in t)||xn(t,e,n)}function In(t,e){for(var n=t.length;n--;)if(Ws(t[n][0],e))return n;return-1}function Rn(t,e,n,i){return pd(t,function(t,r,a){e(i,t,n(t),a)}),i}function Pn(t,e){return t&&Mr(e,ju(e),t)}function On(t,e){return t&&Mr(e,Gu(e),t)}function xn(t,e,n){"__proto__"==e&&xc?xc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Nn(t,e){for(var n=-1,i=e.length,r=nc(i),a=null==t;++n<i;)r[n]=a?nt:Fu(t,e[n]);return r}function Mn(t,e,n){return t===t&&(n!==nt&&(t=t<=n?t:n),e!==nt&&(t=t>=e?t:e)),t}function Fn(t,e,n,i,r,a){var o,u=e&ct,l=e&dt,c=e&ht;if(n&&(o=r?n(t,i,r,a):n(t)),o!==nt)return o;if(!ru(t))return t;var d=mh(t);if(d){if(o=Ca(t),!u)return Nr(t,o)}else{var h=wd(t),f=h==Yt||h==zt;if(yh(t))return kr(t,u);if(h==Jt||h==jt||f&&!r){if(o=l||f?{}:La(t),!u)return l?Ur(t,On(o,t)):Fr(t,Pn(o,t))}else{if(!Xn[h])return r?t:{};o=Da(t,h,u)}}a||(a=new yn);var p=a.get(t);if(p)return p;a.set(t,o),Ah(t)?t.forEach(function(i){o.add(Fn(i,e,n,i,t,a))}):Eh(t)&&t.forEach(function(i,r){o.set(r,Fn(i,e,n,r,t,a))});var g=c?l?ma:ga:l?Gu:ju,m=d?nt:g(t);return s(m||t,function(i,r){m&&(r=i,i=t[r]),Dn(o,r,Fn(i,e,n,r,t,a))}),o}function Un(t){var e=ju(t);return function(n){return Bn(n,t,e)}}function Bn(t,e,n){var i=n.length;if(null==t)return!i;for(t=sc(t);i--;){var r=n[i],a=e[r],o=t[r];if(o===nt&&!(r in t)||!a(o))return!1}return!0}function Hn(t,e,n){if("function"!=typeof t)throw new cc(ot);return Dd(function(){t.apply(nt,n)},e)}function Vn(t,e,n,i){var r=-1,a=d,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=f(e,O(n))),i?(a=h,o=!1):e.length>=rt&&(a=N,o=!1,e=new gn(e));t:for(;++r<s;){var c=t[r],p=null==n?c:n(c);if(c=i||0!==c?c:0,o&&p===p){for(var g=l;g--;)if(e[g]===p)continue t;u.push(c)}else a(e,p,i)||u.push(c)}return u}function Kn(t,e){var n=!0;return pd(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Wn(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(s===nt?o===o&&!mu(o):n(o,s)))var s=o,u=a}return u}function Qn(t,e,n,i){var r=t.length;for(n=Au(n),n<0&&(n=-n>r?0:r+n),i=i===nt||i>r?r:Au(i),i<0&&(i+=r),i=n>i?0:Tu(i);n<i;)t[n++]=e;return t}function $n(t,e){var n=[];return pd(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Jn(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=Ra),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Jn(s,e-1,n,i,r):p(r,s):i||(r[r.length]=s)}return r}function Zn(t,e){return t&&md(t,e,ju)}function ni(t,e){return t&&vd(t,e,ju)}function ii(t,e){return c(e,function(e){return eu(t[e])})}function ai(t,e){e=Tr(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[Ja(e[n++])];return n&&n==i?t:nt}function oi(t,e,n){var i=e(t);return mh(t)?i:p(i,n(t))}function ui(t){return null==t?t===nt?ae:$t:Oc&&Oc in sc(t)?Ta(t):Ka(t)}function li(t,e){return t>e}function mi(t,e){return null!=t&&mc.call(t,e)}function Ei(t,e){return null!=t&&e in sc(t)}function Ai(t,e,n){return t>=qc(e,n)&&t<Wc(e,n)}function Ti(t,e,n){for(var i=n?h:d,r=t[0].length,a=t.length,o=a,s=nc(a),u=1/0,l=[];o--;){var c=t[o];o&&e&&(c=f(c,O(e))),u=qc(c.length,u),s[o]=!n&&(e||r>=120&&c.length>=120)?new gn(o&&c):nt}c=t[0];var p=-1,g=s[0];t:for(;++p<r&&l.length<u;){var m=c[p],v=e?e(m):m;if(m=n||0!==m?m:0,!(g?N(g,v):i(l,v,n))){for(o=a;--o;){var y=s[o];if(!(y?N(y,v):i(t[o],v,n)))continue t}g&&g.push(v),l.push(m)}}return l}function Si(t,e,n,i){return Zn(t,function(t,r,a){e(i,n(t),r,a)}),i}function ki(t,e,n){e=Tr(e,t),t=qa(t,e);var i=null==t?t:t[Ja(bo(e))];return null==i?nt:a(i,t,n)}function wi(t){return au(t)&&ui(t)==jt}function Ci(t){return au(t)&&ui(t)==ue}function Li(t){return au(t)&&ui(t)==Kt}function Di(t,e,n,i,r){return t===e||(null==t||null==e||!au(t)&&!au(e)?t!==t&&e!==e:Ii(t,e,n,i,Di,r))}function Ii(t,e,n,i,r,a){var o=mh(t),s=mh(e),u=o?Gt:wd(t),l=s?Gt:wd(e);u=u==jt?Jt:u,l=l==jt?Jt:l;var c=u==Jt,d=l==Jt,h=u==l;if(h&&yh(t)){if(!yh(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new yn),o||Th(t)?da(t,e,n,i,r,a):ha(t,e,u,n,i,r,a);if(!(n&ft)){var f=c&&mc.call(t,"__wrapped__"),p=d&&mc.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return a||(a=new yn),r(g,m,n,i,a)}}return!!h&&(a||(a=new yn),fa(t,e,n,i,r,a))}function Ri(t){return au(t)&&wd(t)==Xt}function Pi(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=sc(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){s=n[r];var u=s[0],l=t[u],c=s[1];if(o&&s[2]){if(l===nt&&!(u in t))return!1}else{var d=new yn;if(i)var h=i(l,c,u,t,e,d);if(!(h===nt?Di(c,l,ft|pt,i,d):h))return!1}}return!0}function Oi(t){if(!ru(t)||Fa(t))return!1;var e=eu(t)?Ac:qe;return e.test(Za(t))}function xi(t){return au(t)&&ui(t)==ee}function Ni(t){return au(t)&&wd(t)==ne}function Mi(t){return au(t)&&iu(t.length)&&!!zn[ui(t)]}function Fi(t){return"function"==typeof t?t:null==t?Il:"object"==typeof t?mh(t)?Vi(t[0],t[1]):Hi(t):Ul(t)}function Ui(t){if(!Ua(t))return Kc(t);var e=[];for(var n in sc(t))mc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Bi(t){if(!ru(t))return Va(t);var e=Ua(t),n=[];for(var i in t)("constructor"!=i||!e&&mc.call(t,i))&&n.push(i);return n}function ji(t,e){return t<e}function Gi(t,e){var n=-1,i=qs(t)?nc(t.length):[];return pd(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Hi(t){var e=ba(t);return 1==e.length&&e[0][2]?ja(e[0][0],e[0][1]):function(n){return n===t||Pi(n,t,e)}}function Vi(t,e){return xa(t)&&Ba(e)?ja(Ja(t),e):function(n){var i=Fu(n,t);return i===nt&&i===e?Bu(n,t):Di(e,i,ft|pt)}}function Ki(t,e,n,i,r){t!==e&&md(e,function(a,o){if(r||(r=new yn),ru(a))Wi(t,e,o,n,Ki,i,r);else{var s=i?i(za(t,o),a,o+"",t,e,r):nt;s===nt&&(s=a),Ln(t,o,s)}},Gu)}function Wi(t,e,n,i,r,a,o){var s=za(t,n),u=za(e,n),l=o.get(u);if(l)return void Ln(t,n,l);var c=a?a(s,u,n+"",t,e,o):nt,d=c===nt;if(d){var h=mh(u),f=!h&&yh(u),p=!h&&!f&&Th(u);c=u,h||f||p?mh(s)?c=s:Ys(s)?c=Nr(s):f?(d=!1,c=kr(u,!0)):p?(d=!1,c=Ir(u,!0)):c=[]:fu(u)||gh(u)?(c=s,gh(s)?c=ku(s):ru(s)&&!eu(s)||(c=La(u))):d=!1}d&&(o.set(u,c),r(c,u,i,a,o),o.delete(u)),Ln(t,n,c)}function qi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Pa(e,n)?t[e]:nt}function Yi(t,e,n){var i=-1;e=f(e.length?e:[Il],O(_a()));var r=Gi(t,function(t,n,r){var a=f(e,function(e){return e(t)});return{criteria:a,index:++i,value:t}});return D(r,function(t,e){return Pr(t,e,n)})}function zi(t,e){return Xi(t,e,function(e,n){return Bu(t,n)})}function Xi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=ai(t,o);n(s,o)&&ar(a,Tr(o,t),s)}return a}function Qi(t){return function(e){return ai(e,t)}}function $i(t,e,n,i){var r=i?T:A,a=-1,o=e.length,s=t;for(t===e&&(e=Nr(e)),n&&(s=f(t,O(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=r(s,c,u,i))>-1;)s!==t&&Ic.call(s,u,1),Ic.call(t,u,1);return t}function Ji(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Pa(r)?Ic.call(t,r,1):gr(t,r)}}return t}function Zi(t,e){return t+Bc(Xc()*(e-t+1))}function tr(t,e,n,i){for(var r=-1,a=Wc(Uc((e-t)/(n||1)),0),o=nc(a);a--;)o[i?a:++r]=t,t+=n;return o}function er(t,e){var n="";if(!t||e<1||e>Ot)return n;do e%2&&(n+=t),e=Bc(e/2),e&&(t+=t);while(e);return n}function nr(t,e){return Id(Wa(t,e,Il),t+"")}function ir(t){return kn(Zu(t))}function rr(t,e){var n=Zu(t);return $a(n,Mn(e,0,n.length))}function ar(t,e,n,i){if(!ru(t))return t;e=Tr(e,t);for(var r=-1,a=e.length,o=a-1,s=t;null!=s&&++r<a;){var u=Ja(e[r]),l=n;if(r!=o){var c=s[u];l=i?i(c,u,s):nt,l===nt&&(l=ru(c)?c:Pa(e[r+1])?[]:{})}Dn(s,u,l),s=s[u]}return t}function or(t){return $a(Zu(t))}function sr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=nc(r);++i<r;)a[i]=t[i+e];return a}function ur(t,e){var n;return pd(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function lr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=Ut){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!mu(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return cr(t,e,Il,n)}function cr(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,o=e!==e,s=null===e,u=mu(e),l=e===nt;r<a;){var c=Bc((r+a)/2),d=n(t[c]),h=d!==nt,f=null===d,p=d===d,g=mu(d);if(o)var m=i||p;else m=l?p&&(i||h):s?p&&h&&(i||!f):u?p&&h&&!f&&(i||!g):!f&&!g&&(i?d<=e:d<e);m?r=c+1:a=c}return qc(a,Ft)}function dr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Ws(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function hr(t){return"number"==typeof t?t:mu(t)?Nt:+t}function fr(t){if("string"==typeof t)return t;if(mh(t))return f(t,fr)+"";if(mu(t))return hd?hd.call(t):"";var e=t+"";return"0"==e&&1/t==-Pt?"-0":e}function pr(t,e,n){var i=-1,r=d,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=h;else if(a>=rt){var l=e?null:Ad(t);if(l)return Y(l);o=!1,r=N,u=new gn}else u=e?[]:s;t:for(;++i<a;){var c=t[i],f=e?e(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var p=u.length;p--;)if(u[p]===f)continue t;e&&u.push(f),s.push(c)}else r(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function gr(t,e){return e=Tr(e,t),t=qa(t,e),null==t||delete t[Ja(bo(e))]}function mr(t,e,n,i){return ar(t,e,n(ai(t,e)),i)}function vr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?sr(t,i?0:a,i?a+1:r):sr(t,i?a+1:0,i?r:a)}function yr(t,e){var n=t;return n instanceof y&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function _r(t,e,n){var i=t.length;if(i<2)return i?pr(t[0]):[];for(var r=-1,a=nc(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=Vn(a[r]||o,t[s],e,n));return pr(Jn(a,1),e,n)}function Er(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:nt;n(o,t[i],s)}return o}function br(t){return Ys(t)?t:[]}function Ar(t){return"function"==typeof t?t:Il}function Tr(t,e){return mh(t)?t:xa(t,e)?[t]:Rd(Cu(t))}function Sr(t,e,n){var i=t.length;return n=n===nt?i:n,!e&&n>=i?t:sr(t,e,n)}function kr(t,e){if(e)return t.slice();var n=t.length,i=wc?wc(n):new t.constructor(n);return t.copy(i),i}function wr(t){var e=new t.constructor(t.byteLength);return new kc(e).set(new kc(t)),e}function Cr(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Lr(t){var e=new t.constructor(t.source,Ve.exec(t));return e.lastIndex=t.lastIndex,e}function Dr(t){return dd?sc(dd.call(t)):{}}function Ir(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Rr(t,e){if(t!==e){var n=t!==nt,i=null===t,r=t===t,a=mu(t),o=e!==nt,s=null===e,u=e===e,l=mu(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||i&&o&&u||!n&&u||!r)return 1;if(!i&&!a&&!l&&t<e||l&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!u)return-1}return 0}function Pr(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=Rr(r[i],a[i]);if(u){if(i>=s)return u;var l=n[i];return u*("desc"==l?-1:1)}}return t.index-e.index}function Or(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,l=Wc(a-o,0),c=nc(u+l),d=!i;++s<u;)c[s]=e[s];for(;++r<o;)(d||r<a)&&(c[n[r]]=t[r]);for(;l--;)c[s++]=t[r++];return c}function xr(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,l=e.length,c=Wc(a-s,0),d=nc(c+l),h=!i;++r<c;)d[r]=t[r];for(var f=r;++u<l;)d[f+u]=e[u];for(;++o<s;)(h||r<a)&&(d[f+n[o]]=t[r++]);return d}function Nr(t,e){var n=-1,i=t.length;for(e||(e=nc(i));++n<i;)e[n]=t[n];return e}function Mr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(n[s],t[s],s,n,t):nt;u===nt&&(u=t[s]),r?xn(n,s,u):Dn(n,s,u)}return n}function Fr(t,e){return Mr(t,Sd(t),e)}function Ur(t,e){return Mr(t,kd(t),e)}function Br(t,e){return function(n,i){var r=mh(n)?o:Rn,a=e?e():{};return r(n,t,_a(i,2),a)}}function jr(t){return nr(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:nt,o=r>2?n[2]:nt;for(a=t.length>3&&"function"==typeof a?(r--,a):nt,o&&Oa(n[0],n[1],o)&&(a=r<3?nt:a,r=1),e=sc(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e})}function Gr(t,e){return function(n,i){if(null==n)return n;if(!qs(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=sc(n);(e?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function Hr(t){return function(e,n,i){for(var r=-1,a=sc(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(n(a[u],u,a)===!1)break}return e}}function Vr(t,e,n){function i(){var e=this&&this!==ri&&this instanceof i?a:t;return e.apply(r?n:this,arguments)}var r=e&gt,a=qr(t);return i}function Kr(t){return function(e){e=Cu(e);var n=G(e)?J(e):nt,i=n?n[0]:e.charAt(0),r=n?Sr(n,1).join(""):e.slice(1);return i[t]()+r}}function Wr(t){return function(e){return g(kl(al(e).replace(jn,"")),t,"")}}function qr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=fd(t.prototype),i=t.apply(n,e);return ru(i)?i:n}}function Yr(t,e,n){function i(){for(var o=arguments.length,s=nc(o),u=o,l=ya(i);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:q(s,l);if(o-=c.length,o<n)return ra(t,e,Qr,i.placeholder,nt,s,c,nt,nt,n-o);var d=this&&this!==ri&&this instanceof i?r:t;return a(d,this,s)}var r=qr(t);return i}function zr(t){return function(e,n,i){var r=sc(e);if(!qs(e)){var a=_a(n,3);e=ju(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:nt}}function Xr(t){return pa(function(e){var n=e.length,i=n,a=r.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new cc(ot);if(a&&!s&&"wrapper"==va(o))var s=new r([],!0)}for(i=s?i:n;++i<n;){o=e[i];var u=va(o),l="wrapper"==u?Td(o):nt;s=l&&Ma(l[0])&&l[1]==(At|yt|Et|Tt)&&!l[4].length&&1==l[9]?s[va(l[0])].apply(s,l[3]):1==o.length&&Ma(o)?s[u]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&mh(i))return s.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}})}function Qr(t,e,n,i,r,a,o,s,u,l){function c(){for(var v=arguments.length,y=nc(v),_=v;_--;)y[_]=arguments[_];if(p)var E=ya(c),b=U(y,E);if(i&&(y=Or(y,i,r,p)),a&&(y=xr(y,a,o,p)),v-=b,p&&v<l){var A=q(y,E);return ra(t,e,Qr,c.placeholder,n,y,A,s,u,l-v)}var T=h?n:this,S=f?T[t]:t;return v=y.length,s?y=Ya(y,s):g&&v>1&&y.reverse(),d&&u<v&&(y.length=u),this&&this!==ri&&this instanceof c&&(S=m||qr(S)),S.apply(T,y)}var d=e&At,h=e&gt,f=e&mt,p=e&(yt|_t),g=e&St,m=f?nt:qr(t);return c}function $r(t,e){return function(n,i){return Si(n,t,e(i),{})}}function Jr(t,e){return function(n,i){var r;if(n===nt&&i===nt)return e;if(n!==nt&&(r=n),i!==nt){if(r===nt)return i;"string"==typeof n||"string"==typeof i?(n=fr(n),i=fr(i)):(n=hr(n),i=hr(i)),r=t(n,i)}return r}}function Zr(t){return pa(function(e){return e=f(e,O(_a())),nr(function(n){var i=this;return t(e,function(t){return a(t,i,n)})})})}function ta(t,e){e=e===nt?" ":fr(e);var n=e.length;if(n<2)return n?er(e,t):e;var i=er(e,Uc(t/$(e)));return G(e)?Sr(J(i),0,t).join(""):i.slice(0,t)}function ea(t,e,n,i){function r(){for(var e=-1,u=arguments.length,l=-1,c=i.length,d=nc(c+u),h=this&&this!==ri&&this instanceof r?s:t;++l<c;)d[l]=i[l];for(;u--;)d[l++]=arguments[++e];return a(h,o?n:this,d)}var o=e&gt,s=qr(t);return r}function na(t){return function(e,n,i){return i&&"number"!=typeof i&&Oa(e,n,i)&&(n=i=nt),e=bu(e),n===nt?(n=e,e=0):n=bu(n),i=i===nt?e<n?1:-1:bu(i),tr(e,n,i,t)}}function ia(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Su(e),n=Su(n)),t(e,n)}}function ra(t,e,n,i,r,a,o,s,u,l){var c=e&yt,d=c?o:nt,h=c?nt:o,f=c?a:nt,p=c?nt:a;e|=c?Et:bt,e&=~(c?bt:Et),e&vt||(e&=~(gt|mt));var g=[t,e,r,f,d,p,h,s,u,l],m=n.apply(nt,g);return Ma(t)&&Ld(m,g),m.placeholder=i,Xa(m,t,e)}function aa(t){var e=oc[t];return function(t,n){if(t=Su(t),n=null==n?0:qc(Au(n),292),n&&Hc(t)){var i=(Cu(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Cu(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function oa(t){return function(e){var n=wd(e);return n==Xt?K(e):n==ne?z(e):P(e,t(e))}}function sa(t,e,n,i,r,a,o,s){var u=e&mt;if(!u&&"function"!=typeof t)throw new cc(ot);var l=i?i.length:0;if(l||(e&=~(Et|bt),i=r=nt),o=o===nt?o:Wc(Au(o),0),s=s===nt?s:Au(s),l-=r?r.length:0,e&bt){var c=i,d=r;i=r=nt}var h=u?nt:Td(t),f=[t,e,n,i,r,c,d,a,o,s];if(h&&Ha(f,h),t=f[0],e=f[1],n=f[2],i=f[3],r=f[4],s=f[9]=f[9]===nt?u?0:t.length:Wc(f[9]-l,0),!s&&e&(yt|_t)&&(e&=~(yt|_t)),e&&e!=gt)p=e==yt||e==_t?Yr(t,e,s):e!=Et&&e!=(gt|Et)||r.length?Qr.apply(nt,f):ea(t,e,n,i);else var p=Vr(t,e,n);var g=h?yd:Ld;return Xa(g(p,f),t,e)}function ua(t,e,n,i){return t===nt||Ws(t,fc[n])&&!mc.call(i,n)?e:t}function la(t,e,n,i,r,a){return ru(t)&&ru(e)&&(a.set(e,t),Ki(t,e,nt,la,a),a.delete(e)),t}function ca(t){return fu(t)?nt:t}function da(t,e,n,i,r,a){var o=n&ft,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,d=!0,h=n&pt?new gn:nt;for(a.set(t,e),a.set(e,t);++c<s;){var f=t[c],p=e[c];if(i)var g=o?i(p,f,c,e,t,a):i(f,p,c,t,e,a);if(g!==nt){if(g)continue;d=!1;break}if(h){if(!v(e,function(t,e){if(!N(h,e)&&(f===t||r(f,t,n,i,a)))return h.push(e)})){d=!1;break}}else if(f!==p&&!r(f,p,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ha(t,e,n,i,r,a,o){switch(n){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!a(new kc(t),new kc(e)));case Vt:case Kt:case Qt:return Ws(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case ee:case ie:return t==e+"";case Xt:var s=K;case ne:var u=i&ft;if(s||(s=Y),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;i|=pt,o.set(t,e);var c=da(s(t),s(e),i,r,a,o);return o.delete(t),c;case re:if(dd)return dd.call(t)==dd.call(e)}return!1}function fa(t,e,n,i,r,a){var o=n&ft,s=ga(t),u=s.length,l=ga(e),c=l.length;if(u!=c&&!o)return!1;for(var d=u;d--;){var h=s[d];if(!(o?h in e:mc.call(e,h)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var p=!0;a.set(t,e),a.set(e,t);for(var g=o;++d<u;){h=s[d];var m=t[h],v=e[h];if(i)var y=o?i(v,m,h,e,t,a):i(m,v,h,t,e,a);if(!(y===nt?m===v||r(m,v,n,i,a):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E)&&(p=!1)}return a.delete(t),a.delete(e),p}function pa(t){return Id(Wa(t,nt,fo),t+"")}function ga(t){return oi(t,ju,Sd)}function ma(t){return oi(t,Gu,kd)}function va(t){for(var e=t.name+"",n=rd[e],i=mc.call(rd,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function ya(t){var e=mc.call(n,"placeholder")?n:t;return e.placeholder}function _a(){var t=n.iteratee||Rl;return t=t===Rl?Fi:t,arguments.length?t(arguments[0],arguments[1]):t}function Ea(t,e){var n=t.__data__;return Na(e)?n["string"==typeof e?"string":"hash"]:n.map}function ba(t){for(var e=ju(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ba(r)]}return e}function Aa(t,e){var n=j(t,e);return Oi(n)?n:nt}function Ta(t){var e=mc.call(t,Oc),n=t[Oc];try{t[Oc]=nt;var i=!0}catch(t){}var r=_c.call(t);return i&&(e?t[Oc]=n:delete t[Oc]),r}function Sa(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=qc(e,t+o);break;case"takeRight":t=Wc(t,e-o)}}return{start:t,end:e}}function ka(t){var e=t.match(Ue);return e?e[1].split(Be):[]}function wa(t,e,n){e=Tr(e,t);for(var i=-1,r=e.length,a=!1;++i<r;){var o=Ja(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:(r=null==t?0:t.length,!!r&&iu(r)&&Pa(o,r)&&(mh(t)||gh(t)))}function Ca(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&mc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function La(t){return"function"!=typeof t.constructor||Ua(t)?{}:fd(Cc(t))}function Da(t,e,n){var i=t.constructor;switch(e){case ue:return wr(t);case Vt:case Kt:return new i(+t);case le:return Cr(t,n);case ce:case de:case he:case fe:case pe:case ge:case me:case ve:case ye:return Ir(t,n);case Xt:return new i;case Qt:case ie:return new i(t);case ee:return Lr(t);case ne:return new i;case re:return Dr(t)}}function Ia(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Fe,"{\n/* [wrapped with "+e+"] */\n")}function Ra(t){return mh(t)||gh(t)||!!(Rc&&t&&t[Rc])}function Pa(t,e){var n=typeof t;return e=null==e?Ot:e,!!e&&("number"==n||"symbol"!=n&&ze.test(t))&&t>-1&&t%1==0&&t<e}function Oa(t,e,n){if(!ru(n))return!1;var i=typeof e;return!!("number"==i?qs(n)&&Pa(e,n.length):"string"==i&&e in n)&&Ws(n[e],t)}function xa(t,e){if(mh(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!mu(t))||(Ie.test(t)||!De.test(t)||null!=e&&t in sc(e))}function Na(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ma(t){var e=va(t),i=n[e];if("function"!=typeof i||!(e in y.prototype))return!1;if(t===i)return!0;var r=Td(i);return!!r&&t===r[0]}function Fa(t){return!!yc&&yc in t}function Ua(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||fc;return t===n}function Ba(t){return t===t&&!ru(t)}function ja(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==nt||t in sc(n)))}}function Ga(t){var e=Rs(t,function(t){return n.size===ut&&n.clear(),t}),n=e.cache;return e}function Ha(t,e){var n=t[1],i=e[1],r=n|i,a=r<(gt|mt|At),o=i==At&&n==yt||i==At&&n==Tt&&t[7].length<=e[8]||i==(At|Tt)&&e[7].length<=e[8]&&n==yt;if(!a&&!o)return t;i&gt&&(t[2]=e[2],r|=n&gt?0:vt);var s=e[3];if(s){var u=t[3];t[3]=u?Or(u,s,e[4]):s,t[4]=u?q(t[3],lt):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?xr(u,s,e[6]):s,t[6]=u?q(t[5],lt):e[6]),s=e[7],s&&(t[7]=s),i&At&&(t[8]=null==t[8]?e[8]:qc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Va(t){var e=[];if(null!=t)for(var n in sc(t))e.push(n);return e}function Ka(t){return _c.call(t)}function Wa(t,e,n){return e=Wc(e===nt?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Wc(i.length-e,0),s=nc(o);++r<o;)s[r]=i[e+r];r=-1;for(var u=nc(e+1);++r<e;)u[r]=i[r];return u[e]=n(s),a(t,this,u)}}function qa(t,e){return e.length<2?t:ai(t,sr(e,0,-1))}function Ya(t,e){for(var n=t.length,i=qc(e.length,n),r=Nr(t);i--;){var a=e[i];t[i]=Pa(a,n)?r[a]:nt}return t}function za(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Xa(t,e,n){var i=e+"";return Id(t,Ia(i,to(ka(i),n)))}function Qa(t){var e=0,n=0;return function(){var i=Yc(),r=Lt-(i-n);if(n=i,r>0){if(++e>=Ct)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function $a(t,e){var n=-1,i=t.length,r=i-1;for(e=e===nt?i:e;++n<e;){var a=Zi(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function Ja(t){if("string"==typeof t||mu(t))return t;var e=t+"";return"0"==e&&1/t==-Pt?"-0":e}function Za(t){if(null!=t){try{return gc.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function to(t,e){return s(Bt,function(n){var i="_."+n[0];e&n[1]&&!d(t,i)&&t.push(i)}),t.sort()}function eo(t){if(t instanceof y)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Nr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function no(t,e,n){e=(n?Oa(t,e,n):e===nt)?1:Wc(Au(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,o=nc(Uc(i/e));r<i;)o[a++]=sr(t,r,r+=e);return o}function io(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r}function ro(){var t=arguments.length;if(!t)return[];for(var e=nc(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return p(mh(n)?Nr(n):[n],Jn(e,1))}function ao(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Au(e),sr(t,e<0?0:e,i)):[]}function oo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Au(e),e=i-e,sr(t,0,e<0?0:e)):[]}function so(t,e){return t&&t.length?vr(t,_a(e,3),!0,!0):[]}function uo(t,e){return t&&t.length?vr(t,_a(e,3),!0):[]}function lo(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Oa(t,e,n)&&(n=0,i=r),Qn(t,e,n,i)):[]}function co(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Au(n);return r<0&&(r=Wc(i+r,0)),b(t,_a(e,3),r)}function ho(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==nt&&(r=Au(n),r=n<0?Wc(i+r,0):qc(r,i-1)),b(t,_a(e,3),r,!0)}function fo(t){var e=null==t?0:t.length;return e?Jn(t,1):[]}function po(t){var e=null==t?0:t.length;return e?Jn(t,Pt):[]}function go(t,e){var n=null==t?0:t.length;return n?(e=e===nt?1:Au(e),Jn(t,e)):[]}function mo(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function vo(t){return t&&t.length?t[0]:nt}function yo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Au(n);return r<0&&(r=Wc(i+r,0)),A(t,e,r)}function _o(t){var e=null==t?0:t.length;return e?sr(t,0,-1):[]}function Eo(t,e){return null==t?"":Vc.call(t,e)}function bo(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function Ao(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==nt&&(r=Au(n),r=r<0?Wc(i+r,0):qc(r,i-1)),e===e?Q(t,e,r):b(t,S,r,!0)}function To(t,e){return t&&t.length?qi(t,Au(e)):nt}function So(t,e){return t&&t.length&&e&&e.length?$i(t,e):t}function ko(t,e,n){return t&&t.length&&e&&e.length?$i(t,e,_a(n,2)):t}function wo(t,e,n){return t&&t.length&&e&&e.length?$i(t,e,nt,n):t}function Co(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=_a(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return Ji(t,r),n}function Lo(t){return null==t?t:Qc.call(t)}function Do(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Oa(t,e,n)?(e=0,n=i):(e=null==e?0:Au(e),n=n===nt?i:Au(n)),sr(t,e,n)):[]}function Io(t,e){return lr(t,e)}function Ro(t,e,n){return cr(t,e,_a(n,2))}function Po(t,e){var n=null==t?0:t.length;if(n){var i=lr(t,e);if(i<n&&Ws(t[i],e))return i}return-1}function Oo(t,e){return lr(t,e,!0)}function xo(t,e,n){return cr(t,e,_a(n,2),!0)}function No(t,e){var n=null==t?0:t.length;if(n){var i=lr(t,e,!0)-1;if(Ws(t[i],e))return i}return-1}function Mo(t){return t&&t.length?dr(t):[]}function Fo(t,e){return t&&t.length?dr(t,_a(e,2)):[]}function Uo(t){var e=null==t?0:t.length;return e?sr(t,1,e):[]}function Bo(t,e,n){return t&&t.length?(e=n||e===nt?1:Au(e),sr(t,0,e<0?0:e)):[]}function jo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Au(e),e=i-e,sr(t,e<0?0:e,i)):[]}function Go(t,e){return t&&t.length?vr(t,_a(e,3),!1,!0):[]}function Ho(t,e){return t&&t.length?vr(t,_a(e,3)):[]}function Vo(t){return t&&t.length?pr(t):[]}function Ko(t,e){return t&&t.length?pr(t,_a(e,2)):[]}function Wo(t,e){return e="function"==typeof e?e:nt,t&&t.length?pr(t,nt,e):[]}function qo(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){if(Ys(t))return e=Wc(t.length,e),!0}),R(e,function(e){return f(t,w(e))})}function Yo(t,e){if(!t||!t.length)return[];var n=qo(t);return null==e?n:f(n,function(t){return a(e,nt,t)})}function zo(t,e){return Er(t||[],e||[],Dn)}function Xo(t,e){return Er(t||[],e||[],ar)}function Qo(t){var e=n(t);return e.__chain__=!0,e}function $o(t,e){return e(t),t}function Jo(t,e){return e(t)}function Zo(){return Qo(this)}function ts(){return new r(this.value(),this.__chain__)}function es(){this.__values__===nt&&(this.__values__=Eu(this.value()));var t=this.__index__>=this.__values__.length,e=t?nt:this.__values__[this.__index__++];return{done:t,value:e}}function ns(){return this}function is(t){for(var e,n=this;n instanceof i;){var r=eo(n);r.__index__=0,r.__values__=nt,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e}function rs(){var t=this.__wrapped__;if(t instanceof y){var e=t;return this.__actions__.length&&(e=new y(this)),e=e.reverse(),e.__actions__.push({func:Jo,args:[Lo],thisArg:nt}),new r(e,this.__chain__)}return this.thru(Lo)}function as(){return yr(this.__wrapped__,this.__actions__)}function os(t,e,n){var i=mh(t)?l:Kn;return n&&Oa(t,e,n)&&(e=nt),i(t,_a(e,3))}function ss(t,e){var n=mh(t)?c:$n;return n(t,_a(e,3))}function us(t,e){return Jn(ps(t,e),1)}function ls(t,e){return Jn(ps(t,e),Pt)}function cs(t,e,n){return n=n===nt?1:Au(n),Jn(ps(t,e),n)}function ds(t,e){var n=mh(t)?s:pd;return n(t,_a(e,3))}function hs(t,e){var n=mh(t)?u:gd;return n(t,_a(e,3))}function fs(t,e,n,i){t=qs(t)?t:Zu(t),n=n&&!i?Au(n):0;var r=t.length;return n<0&&(n=Wc(r+n,0)),gu(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&A(t,e,n)>-1}function ps(t,e){var n=mh(t)?f:Gi;return n(t,_a(e,3))}function gs(t,e,n,i){return null==t?[]:(mh(e)||(e=null==e?[]:[e]),n=i?nt:n,mh(n)||(n=null==n?[]:[n]),Yi(t,e,n))}function ms(t,e,n){var i=mh(t)?g:L,r=arguments.length<3;return i(t,_a(e,4),n,r,pd)}function vs(t,e,n){var i=mh(t)?m:L,r=arguments.length<3;return i(t,_a(e,4),n,r,gd)}function ys(t,e){var n=mh(t)?c:$n;return n(t,Ps(_a(e,3)));
}function _s(t){var e=mh(t)?kn:ir;return e(t)}function Es(t,e,n){e=(n?Oa(t,e,n):e===nt)?1:Au(e);var i=mh(t)?wn:rr;return i(t,e)}function bs(t){var e=mh(t)?Cn:or;return e(t)}function As(t){if(null==t)return 0;if(qs(t))return gu(t)?$(t):t.length;var e=wd(t);return e==Xt||e==ne?t.size:Ui(t).length}function Ts(t,e,n){var i=mh(t)?v:ur;return n&&Oa(t,e,n)&&(e=nt),i(t,_a(e,3))}function Ss(t,e){if("function"!=typeof e)throw new cc(ot);return t=Au(t),function(){if(--t<1)return e.apply(this,arguments)}}function ks(t,e,n){return e=n?nt:e,e=t&&null==e?t.length:e,sa(t,At,nt,nt,nt,nt,e)}function ws(t,e){var n;if("function"!=typeof e)throw new cc(ot);return t=Au(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=nt),n}}function Cs(t,e,n){e=n?nt:e;var i=sa(t,yt,nt,nt,nt,nt,nt,e);return i.placeholder=Cs.placeholder,i}function Ls(t,e,n){e=n?nt:e;var i=sa(t,_t,nt,nt,nt,nt,nt,e);return i.placeholder=Ls.placeholder,i}function Ds(t,e,n){function i(e){var n=h,i=f;return h=f=nt,y=e,g=t.apply(i,n)}function r(t){return y=t,m=Dd(s,e),_?i(t):g}function a(t){var n=t-v,i=t-y,r=e-n;return E?qc(r,p-i):r}function o(t){var n=t-v,i=t-y;return v===nt||n>=e||n<0||E&&i>=p}function s(){var t=rh();return o(t)?u(t):void(m=Dd(s,a(t)))}function u(t){return m=nt,b&&h?i(t):(h=f=nt,g)}function l(){m!==nt&&bd(m),y=0,h=v=f=m=nt}function c(){return m===nt?g:u(rh())}function d(){var t=rh(),n=o(t);if(h=arguments,f=this,v=t,n){if(m===nt)return r(v);if(E)return bd(m),m=Dd(s,e),i(v)}return m===nt&&(m=Dd(s,e)),g}var h,f,p,g,m,v,y=0,_=!1,E=!1,b=!0;if("function"!=typeof t)throw new cc(ot);return e=Su(e)||0,ru(n)&&(_=!!n.leading,E="maxWait"in n,p=E?Wc(Su(n.maxWait)||0,e):p,b="trailing"in n?!!n.trailing:b),d.cancel=l,d.flush=c,d}function Is(t){return sa(t,St)}function Rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new cc(ot);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Rs.Cache||ln),n}function Ps(t){if("function"!=typeof t)throw new cc(ot);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Os(t){return ws(2,t)}function xs(t,e){if("function"!=typeof t)throw new cc(ot);return e=e===nt?e:Au(e),nr(t,e)}function Ns(t,e){if("function"!=typeof t)throw new cc(ot);return e=null==e?0:Wc(Au(e),0),nr(function(n){var i=n[e],r=Sr(n,0,e);return i&&p(r,i),a(t,this,r)})}function Ms(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new cc(ot);return ru(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ds(t,e,{leading:i,maxWait:e,trailing:r})}function Fs(t){return ks(t,1)}function Us(t,e){return ch(Ar(e),t)}function Bs(){if(!arguments.length)return[];var t=arguments[0];return mh(t)?t:[t]}function js(t){return Fn(t,ht)}function Gs(t,e){return e="function"==typeof e?e:nt,Fn(t,ht,e)}function Hs(t){return Fn(t,ct|ht)}function Vs(t,e){return e="function"==typeof e?e:nt,Fn(t,ct|ht,e)}function Ks(t,e){return null==e||Bn(t,e,ju(e))}function Ws(t,e){return t===e||t!==t&&e!==e}function qs(t){return null!=t&&iu(t.length)&&!eu(t)}function Ys(t){return au(t)&&qs(t)}function zs(t){return t===!0||t===!1||au(t)&&ui(t)==Vt}function Xs(t){return au(t)&&1===t.nodeType&&!fu(t)}function Qs(t){if(null==t)return!0;if(qs(t)&&(mh(t)||"string"==typeof t||"function"==typeof t.splice||yh(t)||Th(t)||gh(t)))return!t.length;var e=wd(t);if(e==Xt||e==ne)return!t.size;if(Ua(t))return!Ui(t).length;for(var n in t)if(mc.call(t,n))return!1;return!0}function $s(t,e){return Di(t,e)}function Js(t,e,n){n="function"==typeof n?n:nt;var i=n?n(t,e):nt;return i===nt?Di(t,e,nt,n):!!i}function Zs(t){if(!au(t))return!1;var e=ui(t);return e==qt||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!fu(t)}function tu(t){return"number"==typeof t&&Hc(t)}function eu(t){if(!ru(t))return!1;var e=ui(t);return e==Yt||e==zt||e==Ht||e==te}function nu(t){return"number"==typeof t&&t==Au(t)}function iu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ot}function ru(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function au(t){return null!=t&&"object"==typeof t}function ou(t,e){return t===e||Pi(t,e,ba(e))}function su(t,e,n){return n="function"==typeof n?n:nt,Pi(t,e,ba(e),n)}function uu(t){return hu(t)&&t!=+t}function lu(t){if(Cd(t))throw new rc(at);return Oi(t)}function cu(t){return null===t}function du(t){return null==t}function hu(t){return"number"==typeof t||au(t)&&ui(t)==Qt}function fu(t){if(!au(t)||ui(t)!=Jt)return!1;var e=Cc(t);if(null===e)return!0;var n=mc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&gc.call(n)==Ec}function pu(t){return nu(t)&&t>=-Ot&&t<=Ot}function gu(t){return"string"==typeof t||!mh(t)&&au(t)&&ui(t)==ie}function mu(t){return"symbol"==typeof t||au(t)&&ui(t)==re}function vu(t){return t===nt}function yu(t){return au(t)&&wd(t)==oe}function _u(t){return au(t)&&ui(t)==se}function Eu(t){if(!t)return[];if(qs(t))return gu(t)?J(t):Nr(t);if(Pc&&t[Pc])return V(t[Pc]());var e=wd(t),n=e==Xt?K:e==ne?Y:Zu;return n(t)}function bu(t){if(!t)return 0===t?t:0;if(t=Su(t),t===Pt||t===-Pt){var e=t<0?-1:1;return e*xt}return t===t?t:0}function Au(t){var e=bu(t),n=e%1;return e===e?n?e-n:e:0}function Tu(t){return t?Mn(Au(t),0,Mt):0}function Su(t){if("number"==typeof t)return t;if(mu(t))return Nt;if(ru(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ru(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(xe,"");var n=We.test(t);return n||Ye.test(t)?ei(t.slice(2),n?2:8):Ke.test(t)?Nt:+t}function ku(t){return Mr(t,Gu(t))}function wu(t){return t?Mn(Au(t),-Ot,Ot):0===t?t:0}function Cu(t){return null==t?"":fr(t)}function Lu(t,e){var n=fd(t);return null==e?n:Pn(n,e)}function Du(t,e){return E(t,_a(e,3),Zn)}function Iu(t,e){return E(t,_a(e,3),ni)}function Ru(t,e){return null==t?t:md(t,_a(e,3),Gu)}function Pu(t,e){return null==t?t:vd(t,_a(e,3),Gu)}function Ou(t,e){return t&&Zn(t,_a(e,3))}function xu(t,e){return t&&ni(t,_a(e,3))}function Nu(t){return null==t?[]:ii(t,ju(t))}function Mu(t){return null==t?[]:ii(t,Gu(t))}function Fu(t,e,n){var i=null==t?nt:ai(t,e);return i===nt?n:i}function Uu(t,e){return null!=t&&wa(t,e,mi)}function Bu(t,e){return null!=t&&wa(t,e,Ei)}function ju(t){return qs(t)?Sn(t):Ui(t)}function Gu(t){return qs(t)?Sn(t,!0):Bi(t)}function Hu(t,e){var n={};return e=_a(e,3),Zn(t,function(t,i,r){xn(n,e(t,i,r),t)}),n}function Vu(t,e){var n={};return e=_a(e,3),Zn(t,function(t,i,r){xn(n,i,e(t,i,r))}),n}function Ku(t,e){return Wu(t,Ps(_a(e)))}function Wu(t,e){if(null==t)return{};var n=f(ma(t),function(t){return[t]});return e=_a(e),Xi(t,n,function(t,n){return e(t,n[0])})}function qu(t,e,n){e=Tr(e,t);var i=-1,r=e.length;for(r||(r=1,t=nt);++i<r;){var a=null==t?nt:t[Ja(e[i])];a===nt&&(i=r,a=n),t=eu(a)?a.call(t):a}return t}function Yu(t,e,n){return null==t?t:ar(t,e,n)}function zu(t,e,n,i){return i="function"==typeof i?i:nt,null==t?t:ar(t,e,n,i)}function Xu(t,e,n){var i=mh(t),r=i||yh(t)||Th(t);if(e=_a(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:ru(t)&&eu(a)?fd(Cc(t)):{}}return(r?s:Zn)(t,function(t,i,r){return e(n,t,i,r)}),n}function Qu(t,e){return null==t||gr(t,e)}function $u(t,e,n){return null==t?t:mr(t,e,Ar(n))}function Ju(t,e,n,i){return i="function"==typeof i?i:nt,null==t?t:mr(t,e,Ar(n),i)}function Zu(t){return null==t?[]:x(t,ju(t))}function tl(t){return null==t?[]:x(t,Gu(t))}function el(t,e,n){return n===nt&&(n=e,e=nt),n!==nt&&(n=Su(n),n=n===n?n:0),e!==nt&&(e=Su(e),e=e===e?e:0),Mn(Su(t),e,n)}function nl(t,e,n){return e=bu(e),n===nt?(n=e,e=0):n=bu(n),t=Su(t),Ai(t,e,n)}function il(t,e,n){if(n&&"boolean"!=typeof n&&Oa(t,e,n)&&(e=n=nt),n===nt&&("boolean"==typeof e?(n=e,e=nt):"boolean"==typeof t&&(n=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=bu(t),e===nt?(e=t,t=0):e=bu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Xc();return qc(t+r*(e-t+ti("1e-"+((r+"").length-1))),e)}return Zi(t,e)}function rl(t){return Xh(Cu(t).toLowerCase())}function al(t){return t=Cu(t),t&&t.replace(Xe,vi).replace(Gn,"")}function ol(t,e,n){t=Cu(t),e=fr(e);var i=t.length;n=n===nt?i:Mn(Au(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function sl(t){return t=Cu(t),t&&ke.test(t)?t.replace(Te,yi):t}function ul(t){return t=Cu(t),t&&Oe.test(t)?t.replace(Pe,"\\$&"):t}function ll(t,e,n){t=Cu(t),e=Au(e);var i=e?$(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return ta(Bc(r),n)+t+ta(Uc(r),n)}function cl(t,e,n){t=Cu(t),e=Au(e);var i=e?$(t):0;return e&&i<e?t+ta(e-i,n):t}function dl(t,e,n){t=Cu(t),e=Au(e);var i=e?$(t):0;return e&&i<e?ta(e-i,n)+t:t}function hl(t,e,n){return n||null==e?e=0:e&&(e=+e),zc(Cu(t).replace(Ne,""),e||0)}function fl(t,e,n){return e=(n?Oa(t,e,n):e===nt)?1:Au(e),er(Cu(t),e)}function pl(){var t=arguments,e=Cu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function gl(t,e,n){return n&&"number"!=typeof n&&Oa(t,e,n)&&(e=n=nt),(n=n===nt?Mt:n>>>0)?(t=Cu(t),t&&("string"==typeof e||null!=e&&!bh(e))&&(e=fr(e),!e&&G(t))?Sr(J(t),0,n):t.split(e,n)):[]}function ml(t,e,n){return t=Cu(t),n=null==n?0:Mn(Au(n),0,t.length),e=fr(e),t.slice(n,n+e.length)==e}function vl(t,e,i){var r=n.templateSettings;i&&Oa(t,e,i)&&(e=nt),t=Cu(t),e=Lh({},e,r,ua);var a,o,s=Lh({},e.imports,r.imports,ua),u=ju(s),l=x(s,u),c=0,d=e.interpolate||Qe,h="__p += '",f=uc((e.escape||Qe).source+"|"+d.source+"|"+(d===Le?He:Qe).source+"|"+(e.evaluate||Qe).source+"|$","g"),p="//# sourceURL="+(mc.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Yn+"]")+"\n";t.replace(f,function(e,n,i,r,s,u){return i||(i=r),h+=t.slice(c,u).replace($e,B),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var g=mc.call(e,"variable")&&e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(_e,""):h).replace(Ee,"$1").replace(be,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Qh(function(){return ac(u,p+"return "+h).apply(nt,l)});if(m.source=h,Zs(m))throw m;return m}function yl(t){return Cu(t).toLowerCase()}function _l(t){return Cu(t).toUpperCase()}function El(t,e,n){if(t=Cu(t),t&&(n||e===nt))return t.replace(xe,"");if(!t||!(e=fr(e)))return t;var i=J(t),r=J(e),a=M(i,r),o=F(i,r)+1;return Sr(i,a,o).join("")}function bl(t,e,n){if(t=Cu(t),t&&(n||e===nt))return t.replace(Me,"");if(!t||!(e=fr(e)))return t;var i=J(t),r=F(i,J(e))+1;return Sr(i,0,r).join("")}function Al(t,e,n){if(t=Cu(t),t&&(n||e===nt))return t.replace(Ne,"");if(!t||!(e=fr(e)))return t;var i=J(t),r=M(i,J(e));return Sr(i,r).join("")}function Tl(t,e){var n=kt,i=wt;if(ru(e)){var r="separator"in e?e.separator:r;n="length"in e?Au(e.length):n,i="omission"in e?fr(e.omission):i}t=Cu(t);var a=t.length;if(G(t)){var o=J(t);a=o.length}if(n>=a)return t;var s=n-$(i);if(s<1)return i;var u=o?Sr(o,0,s).join(""):t.slice(0,s);if(r===nt)return u+i;if(o&&(s+=u.length-s),bh(r)){if(t.slice(s).search(r)){var l,c=u;for(r.global||(r=uc(r.source,Cu(Ve.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===nt?s:d)}}else if(t.indexOf(fr(r),s)!=s){var h=u.lastIndexOf(r);h>-1&&(u=u.slice(0,h))}return u+i}function Sl(t){return t=Cu(t),t&&Se.test(t)?t.replace(Ae,_i):t}function kl(t,e,n){return t=Cu(t),e=n?nt:e,e===nt?H(t)?et(t):_(t):t.match(e)||[]}function wl(t){var e=null==t?0:t.length,n=_a();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new cc(ot);return[n(t[0]),t[1]]}):[],nr(function(n){for(var i=-1;++i<e;){var r=t[i];if(a(r[0],this,n))return a(r[1],this,n)}})}function Cl(t){return Un(Fn(t,ct))}function Ll(t){return function(){return t}}function Dl(t,e){return null==t||t!==t?e:t}function Il(t){return t}function Rl(t){return Fi("function"==typeof t?t:Fn(t,ct))}function Pl(t){return Hi(Fn(t,ct))}function Ol(t,e){return Vi(t,Fn(e,ct))}function xl(t,e,n){var i=ju(e),r=ii(e,i);null!=n||ru(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ii(e,ju(e)));var a=!(ru(n)&&"chain"in n&&!n.chain),o=eu(t);return s(r,function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=Nr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,p([this.value()],arguments))})}),t}function Nl(){return ri._===this&&(ri._=bc),this}function Ml(){}function Fl(t){return t=Au(t),nr(function(e){return qi(e,t)})}function Ul(t){return xa(t)?w(Ja(t)):Qi(t)}function Bl(t){return function(e){return null==t?nt:ai(t,e)}}function jl(){return[]}function Gl(){return!1}function Hl(){return{}}function Vl(){return""}function Kl(){return!0}function Wl(t,e){if(t=Au(t),t<1||t>Ot)return[];var n=Mt,i=qc(t,Mt);e=_a(e),t-=Mt;for(var r=R(i,e);++n<t;)e(n);return r}function ql(t){return mh(t)?f(t,Ja):mu(t)?[t]:Nr(Rd(Cu(t)))}function Yl(t){var e=++vc;return Cu(t)+e}function zl(t){return t&&t.length?Wn(t,Il,li):nt}function Xl(t,e){return t&&t.length?Wn(t,_a(e,2),li):nt}function Ql(t){return k(t,Il)}function $l(t,e){return k(t,_a(e,2))}function Jl(t){return t&&t.length?Wn(t,Il,ji):nt}function Zl(t,e){return t&&t.length?Wn(t,_a(e,2),ji):nt}function tc(t){return t&&t.length?I(t,Il):0}function ec(t,e){return t&&t.length?I(t,_a(e,2)):0}e=null==e?ri:bi.defaults(ri.Object(),e,bi.pick(ri,qn));var nc=e.Array,ic=e.Date,rc=e.Error,ac=e.Function,oc=e.Math,sc=e.Object,uc=e.RegExp,lc=e.String,cc=e.TypeError,dc=nc.prototype,hc=ac.prototype,fc=sc.prototype,pc=e["__core-js_shared__"],gc=hc.toString,mc=fc.hasOwnProperty,vc=0,yc=function(){var t=/[^.]+$/.exec(pc&&pc.keys&&pc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_c=fc.toString,Ec=gc.call(sc),bc=ri._,Ac=uc("^"+gc.call(mc).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=si?e.Buffer:nt,Sc=e.Symbol,kc=e.Uint8Array,wc=Tc?Tc.allocUnsafe:nt,Cc=W(sc.getPrototypeOf,sc),Lc=sc.create,Dc=fc.propertyIsEnumerable,Ic=dc.splice,Rc=Sc?Sc.isConcatSpreadable:nt,Pc=Sc?Sc.iterator:nt,Oc=Sc?Sc.toStringTag:nt,xc=function(){try{var t=Aa(sc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Nc=e.clearTimeout!==ri.clearTimeout&&e.clearTimeout,Mc=ic&&ic.now!==ri.Date.now&&ic.now,Fc=e.setTimeout!==ri.setTimeout&&e.setTimeout,Uc=oc.ceil,Bc=oc.floor,jc=sc.getOwnPropertySymbols,Gc=Tc?Tc.isBuffer:nt,Hc=e.isFinite,Vc=dc.join,Kc=W(sc.keys,sc),Wc=oc.max,qc=oc.min,Yc=ic.now,zc=e.parseInt,Xc=oc.random,Qc=dc.reverse,$c=Aa(e,"DataView"),Jc=Aa(e,"Map"),Zc=Aa(e,"Promise"),td=Aa(e,"Set"),ed=Aa(e,"WeakMap"),nd=Aa(sc,"create"),id=ed&&new ed,rd={},ad=Za($c),od=Za(Jc),sd=Za(Zc),ud=Za(td),ld=Za(ed),cd=Sc?Sc.prototype:nt,dd=cd?cd.valueOf:nt,hd=cd?cd.toString:nt,fd=function(){function t(){}return function(e){if(!ru(e))return{};if(Lc)return Lc(e);t.prototype=e;var n=new t;return t.prototype=nt,n}}();n.templateSettings={escape:we,evaluate:Ce,interpolate:Le,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,r.prototype=fd(i.prototype),r.prototype.constructor=r,y.prototype=fd(i.prototype),y.prototype.constructor=y,tt.prototype.clear=je,tt.prototype.delete=Je,tt.prototype.get=Ze,tt.prototype.has=tn,tt.prototype.set=en,nn.prototype.clear=rn,nn.prototype.delete=an,nn.prototype.get=on,nn.prototype.has=sn,nn.prototype.set=un,ln.prototype.clear=cn,ln.prototype.delete=dn,ln.prototype.get=hn,ln.prototype.has=fn,ln.prototype.set=pn,gn.prototype.add=gn.prototype.push=mn,gn.prototype.has=vn,yn.prototype.clear=_n,yn.prototype.delete=En,yn.prototype.get=bn,yn.prototype.has=An,yn.prototype.set=Tn;var pd=Gr(Zn),gd=Gr(ni,!0),md=Hr(),vd=Hr(!0),yd=id?function(t,e){return id.set(t,e),t}:Il,_d=xc?function(t,e){return xc(t,"toString",{configurable:!0,enumerable:!1,value:Ll(e),writable:!0})}:Il,Ed=nr,bd=Nc||function(t){return ri.clearTimeout(t)},Ad=td&&1/Y(new td([,-0]))[1]==Pt?function(t){return new td(t)}:Ml,Td=id?function(t){return id.get(t)}:Ml,Sd=jc?function(t){return null==t?[]:(t=sc(t),c(jc(t),function(e){return Dc.call(t,e)}))}:jl,kd=jc?function(t){for(var e=[];t;)p(e,Sd(t)),t=Cc(t);return e}:jl,wd=ui;($c&&wd(new $c(new ArrayBuffer(1)))!=le||Jc&&wd(new Jc)!=Xt||Zc&&wd(Zc.resolve())!=Zt||td&&wd(new td)!=ne||ed&&wd(new ed)!=oe)&&(wd=function(t){var e=ui(t),n=e==Jt?t.constructor:nt,i=n?Za(n):"";if(i)switch(i){case ad:return le;case od:return Xt;case sd:return Zt;case ud:return ne;case ld:return oe}return e});var Cd=pc?eu:Gl,Ld=Qa(yd),Dd=Fc||function(t,e){return ri.setTimeout(t,e)},Id=Qa(_d),Rd=Ga(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Re,function(t,n,i,r){e.push(i?r.replace(Ge,"$1"):n||t)}),e}),Pd=nr(function(t,e){return Ys(t)?Vn(t,Jn(e,1,Ys,!0)):[]}),Od=nr(function(t,e){var n=bo(e);return Ys(n)&&(n=nt),Ys(t)?Vn(t,Jn(e,1,Ys,!0),_a(n,2)):[]}),xd=nr(function(t,e){var n=bo(e);return Ys(n)&&(n=nt),Ys(t)?Vn(t,Jn(e,1,Ys,!0),nt,n):[]}),Nd=nr(function(t){var e=f(t,br);return e.length&&e[0]===t[0]?Ti(e):[]}),Md=nr(function(t){var e=bo(t),n=f(t,br);return e===bo(n)?e=nt:n.pop(),n.length&&n[0]===t[0]?Ti(n,_a(e,2)):[]}),Fd=nr(function(t){var e=bo(t),n=f(t,br);return e="function"==typeof e?e:nt,e&&n.pop(),n.length&&n[0]===t[0]?Ti(n,nt,e):[]}),Ud=nr(So),Bd=pa(function(t,e){var n=null==t?0:t.length,i=Nn(t,e);return Ji(t,f(e,function(t){return Pa(t,n)?+t:t}).sort(Rr)),i}),jd=nr(function(t){return pr(Jn(t,1,Ys,!0))}),Gd=nr(function(t){var e=bo(t);return Ys(e)&&(e=nt),pr(Jn(t,1,Ys,!0),_a(e,2))}),Hd=nr(function(t){var e=bo(t);return e="function"==typeof e?e:nt,pr(Jn(t,1,Ys,!0),nt,e)}),Vd=nr(function(t,e){return Ys(t)?Vn(t,e):[]}),Kd=nr(function(t){return _r(c(t,Ys))}),Wd=nr(function(t){var e=bo(t);return Ys(e)&&(e=nt),_r(c(t,Ys),_a(e,2))}),qd=nr(function(t){var e=bo(t);return e="function"==typeof e?e:nt,_r(c(t,Ys),nt,e)}),Yd=nr(qo),zd=nr(function(t){var e=t.length,n=e>1?t[e-1]:nt;return n="function"==typeof n?(t.pop(),n):nt,Yo(t,n)}),Xd=pa(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return Nn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof y&&Pa(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Jo,args:[a],thisArg:nt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(a)}),Qd=Br(function(t,e,n){mc.call(t,n)?++t[n]:xn(t,n,1)}),$d=zr(co),Jd=zr(ho),Zd=Br(function(t,e,n){mc.call(t,n)?t[n].push(e):xn(t,n,[e])}),th=nr(function(t,e,n){var i=-1,r="function"==typeof e,o=qs(t)?nc(t.length):[];return pd(t,function(t){o[++i]=r?a(e,t,n):ki(t,e,n)}),o}),eh=Br(function(t,e,n){xn(t,n,e)}),nh=Br(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ih=nr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Oa(t,e[0],e[1])?e=[]:n>2&&Oa(e[0],e[1],e[2])&&(e=[e[0]]),Yi(t,Jn(e,1),[])}),rh=Mc||function(){return ri.Date.now()},ah=nr(function(t,e,n){var i=gt;if(n.length){var r=q(n,ya(ah));i|=Et}return sa(t,i,e,n,r)}),oh=nr(function(t,e,n){var i=gt|mt;if(n.length){var r=q(n,ya(oh));i|=Et}return sa(e,i,t,n,r)}),sh=nr(function(t,e){return Hn(t,1,e)}),uh=nr(function(t,e,n){return Hn(t,Su(e)||0,n)});Rs.Cache=ln;var lh=Ed(function(t,e){e=1==e.length&&mh(e[0])?f(e[0],O(_a())):f(Jn(e,1),O(_a()));var n=e.length;return nr(function(i){for(var r=-1,o=qc(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return a(t,this,i)})}),ch=nr(function(t,e){var n=q(e,ya(ch));return sa(t,Et,nt,e,n)}),dh=nr(function(t,e){var n=q(e,ya(dh));return sa(t,bt,nt,e,n)}),hh=pa(function(t,e){return sa(t,Tt,nt,nt,nt,e)}),fh=ia(li),ph=ia(function(t,e){return t>=e}),gh=wi(function(){return arguments}())?wi:function(t){return au(t)&&mc.call(t,"callee")&&!Dc.call(t,"callee")},mh=nc.isArray,vh=ci?O(ci):Ci,yh=Gc||Gl,_h=di?O(di):Li,Eh=hi?O(hi):Ri,bh=fi?O(fi):xi,Ah=pi?O(pi):Ni,Th=gi?O(gi):Mi,Sh=ia(ji),kh=ia(function(t,e){return t<=e}),wh=jr(function(t,e){if(Ua(e)||qs(e))return void Mr(e,ju(e),t);for(var n in e)mc.call(e,n)&&Dn(t,n,e[n])}),Ch=jr(function(t,e){Mr(e,Gu(e),t)}),Lh=jr(function(t,e,n,i){Mr(e,Gu(e),t,i)}),Dh=jr(function(t,e,n,i){Mr(e,ju(e),t,i)}),Ih=pa(Nn),Rh=nr(function(t,e){t=sc(t);var n=-1,i=e.length,r=i>2?e[2]:nt;for(r&&Oa(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=Gu(a),s=-1,u=o.length;++s<u;){var l=o[s],c=t[l];(c===nt||Ws(c,fc[l])&&!mc.call(t,l))&&(t[l]=a[l])}return t}),Ph=nr(function(t){return t.push(nt,la),a(Fh,nt,t)}),Oh=$r(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_c.call(e)),t[e]=n},Ll(Il)),xh=$r(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_c.call(e)),mc.call(t,e)?t[e].push(n):t[e]=[n]},_a),Nh=nr(ki),Mh=jr(function(t,e,n){Ki(t,e,n)}),Fh=jr(function(t,e,n,i){Ki(t,e,n,i)}),Uh=pa(function(t,e){var n={};if(null==t)return n;var i=!1;e=f(e,function(e){return e=Tr(e,t),i||(i=e.length>1),e}),Mr(t,ma(t),n),i&&(n=Fn(n,ct|dt|ht,ca));for(var r=e.length;r--;)gr(n,e[r]);return n}),Bh=pa(function(t,e){return null==t?{}:zi(t,e)}),jh=oa(ju),Gh=oa(Gu),Hh=Wr(function(t,e,n){return e=e.toLowerCase(),t+(n?rl(e):e)}),Vh=Wr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Kh=Wr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Wh=Kr("toLowerCase"),qh=Wr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Yh=Wr(function(t,e,n){return t+(n?" ":"")+Xh(e)}),zh=Wr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xh=Kr("toUpperCase"),Qh=nr(function(t,e){try{return a(t,nt,e)}catch(t){return Zs(t)?t:new rc(t)}}),$h=pa(function(t,e){return s(e,function(e){e=Ja(e),xn(t,e,ah(t[e],t))}),t}),Jh=Xr(),Zh=Xr(!0),tf=nr(function(t,e){return function(n){return ki(n,t,e)}}),ef=nr(function(t,e){return function(n){return ki(t,n,e)}}),nf=Zr(f),rf=Zr(l),af=Zr(v),of=na(),sf=na(!0),uf=Jr(function(t,e){return t+e},0),lf=aa("ceil"),cf=Jr(function(t,e){return t/e},1),df=aa("floor"),hf=Jr(function(t,e){return t*e},1),ff=aa("round"),pf=Jr(function(t,e){return t-e},0);return n.after=Ss,n.ary=ks,n.assign=wh,n.assignIn=Ch,n.assignInWith=Lh,n.assignWith=Dh,n.at=Ih,n.before=ws,n.bind=ah,n.bindAll=$h,n.bindKey=oh,n.castArray=Bs,n.chain=Qo,n.chunk=no,n.compact=io,n.concat=ro,n.cond=wl,n.conforms=Cl,n.constant=Ll,n.countBy=Qd,n.create=Lu,n.curry=Cs,n.curryRight=Ls,n.debounce=Ds,n.defaults=Rh,n.defaultsDeep=Ph,n.defer=sh,n.delay=uh,n.difference=Pd,n.differenceBy=Od,n.differenceWith=xd,n.drop=ao,n.dropRight=oo,n.dropRightWhile=so,n.dropWhile=uo,n.fill=lo,n.filter=ss,n.flatMap=us,n.flatMapDeep=ls,n.flatMapDepth=cs,n.flatten=fo,n.flattenDeep=po,n.flattenDepth=go,n.flip=Is,n.flow=Jh,n.flowRight=Zh,n.fromPairs=mo,n.functions=Nu,n.functionsIn=Mu,n.groupBy=Zd,n.initial=_o,n.intersection=Nd,n.intersectionBy=Md,n.intersectionWith=Fd,n.invert=Oh,n.invertBy=xh,n.invokeMap=th,n.iteratee=Rl,n.keyBy=eh,n.keys=ju,n.keysIn=Gu,n.map=ps,n.mapKeys=Hu,n.mapValues=Vu,n.matches=Pl,n.matchesProperty=Ol,n.memoize=Rs,n.merge=Mh,n.mergeWith=Fh,n.method=tf,n.methodOf=ef,n.mixin=xl,n.negate=Ps,n.nthArg=Fl,n.omit=Uh,n.omitBy=Ku,n.once=Os,n.orderBy=gs,n.over=nf,n.overArgs=lh,n.overEvery=rf,n.overSome=af,n.partial=ch,n.partialRight=dh,n.partition=nh,n.pick=Bh,n.pickBy=Wu,n.property=Ul,n.propertyOf=Bl,n.pull=Ud,n.pullAll=So,n.pullAllBy=ko,n.pullAllWith=wo,n.pullAt=Bd,n.range=of,n.rangeRight=sf,n.rearg=hh,n.reject=ys,n.remove=Co,n.rest=xs,n.reverse=Lo,n.sampleSize=Es,n.set=Yu,n.setWith=zu,n.shuffle=bs,n.slice=Do,n.sortBy=ih,n.sortedUniq=Mo,n.sortedUniqBy=Fo,n.split=gl,n.spread=Ns,n.tail=Uo,n.take=Bo,n.takeRight=jo,n.takeRightWhile=Go,n.takeWhile=Ho,n.tap=$o,n.throttle=Ms,n.thru=Jo,n.toArray=Eu,n.toPairs=jh,n.toPairsIn=Gh,n.toPath=ql,n.toPlainObject=ku,n.transform=Xu,n.unary=Fs,n.union=jd,n.unionBy=Gd,n.unionWith=Hd,n.uniq=Vo,n.uniqBy=Ko,n.uniqWith=Wo,n.unset=Qu,n.unzip=qo,n.unzipWith=Yo,n.update=$u,n.updateWith=Ju,n.values=Zu,n.valuesIn=tl,n.without=Vd,n.words=kl,n.wrap=Us,n.xor=Kd,n.xorBy=Wd,n.xorWith=qd,n.zip=Yd,n.zipObject=zo,n.zipObjectDeep=Xo,n.zipWith=zd,n.entries=jh,n.entriesIn=Gh,n.extend=Ch,n.extendWith=Lh,xl(n,n),n.add=uf,n.attempt=Qh,n.camelCase=Hh,n.capitalize=rl,n.ceil=lf,n.clamp=el,n.clone=js,n.cloneDeep=Hs,n.cloneDeepWith=Vs,n.cloneWith=Gs,n.conformsTo=Ks,n.deburr=al,n.defaultTo=Dl,n.divide=cf,n.endsWith=ol,n.eq=Ws,n.escape=sl,n.escapeRegExp=ul,n.every=os,n.find=$d,n.findIndex=co,n.findKey=Du,n.findLast=Jd,n.findLastIndex=ho,n.findLastKey=Iu,n.floor=df,n.forEach=ds,n.forEachRight=hs,n.forIn=Ru,n.forInRight=Pu,n.forOwn=Ou,n.forOwnRight=xu,n.get=Fu,n.gt=fh,n.gte=ph,n.has=Uu,n.hasIn=Bu,n.head=vo,n.identity=Il,n.includes=fs,n.indexOf=yo,n.inRange=nl,n.invoke=Nh,n.isArguments=gh,n.isArray=mh,n.isArrayBuffer=vh,n.isArrayLike=qs,n.isArrayLikeObject=Ys,n.isBoolean=zs,n.isBuffer=yh,n.isDate=_h,n.isElement=Xs,n.isEmpty=Qs,n.isEqual=$s,n.isEqualWith=Js,n.isError=Zs,n.isFinite=tu,n.isFunction=eu,n.isInteger=nu,n.isLength=iu,n.isMap=Eh,n.isMatch=ou,n.isMatchWith=su,n.isNaN=uu,n.isNative=lu,n.isNil=du,n.isNull=cu,n.isNumber=hu,n.isObject=ru,n.isObjectLike=au,n.isPlainObject=fu,n.isRegExp=bh,n.isSafeInteger=pu,n.isSet=Ah,n.isString=gu,n.isSymbol=mu,n.isTypedArray=Th,n.isUndefined=vu,n.isWeakMap=yu,n.isWeakSet=_u,n.join=Eo,n.kebabCase=Vh,n.last=bo,n.lastIndexOf=Ao,n.lowerCase=Kh,n.lowerFirst=Wh,n.lt=Sh,n.lte=kh,n.max=zl,n.maxBy=Xl,n.mean=Ql,n.meanBy=$l,n.min=Jl,n.minBy=Zl,n.stubArray=jl,n.stubFalse=Gl,n.stubObject=Hl,n.stubString=Vl,n.stubTrue=Kl,n.multiply=hf,n.nth=To,n.noConflict=Nl,n.noop=Ml,n.now=rh,n.pad=ll,n.padEnd=cl,n.padStart=dl,n.parseInt=hl,n.random=il,n.reduce=ms,n.reduceRight=vs,n.repeat=fl,n.replace=pl,n.result=qu,n.round=ff,n.runInContext=t,n.sample=_s,n.size=As,n.snakeCase=qh,n.some=Ts,n.sortedIndex=Io,n.sortedIndexBy=Ro,n.sortedIndexOf=Po,n.sortedLastIndex=Oo,n.sortedLastIndexBy=xo,n.sortedLastIndexOf=No,n.startCase=Yh,n.startsWith=ml,n.subtract=pf,n.sum=tc,n.sumBy=ec,n.template=vl,n.times=Wl,n.toFinite=bu,n.toInteger=Au,n.toLength=Tu,n.toLower=yl,n.toNumber=Su,n.toSafeInteger=wu,n.toString=Cu,n.toUpper=_l,n.trim=El,n.trimEnd=bl,n.trimStart=Al,n.truncate=Tl,n.unescape=Sl,n.uniqueId=Yl,n.upperCase=zh,n.upperFirst=Xh,n.each=ds,n.eachRight=hs,n.first=vo,xl(n,function(){var t={};return Zn(n,function(e,i){mc.call(n.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),n.VERSION=it,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),s(["drop","take"],function(t,e){y.prototype[t]=function(n){n=n===nt?1:Wc(Au(n),0);var i=this.__filtered__&&!e?new y(this):this.clone();return i.__filtered__?i.__takeCount__=qc(n,i.__takeCount__):i.__views__.push({size:qc(n,Mt),type:t+(i.__dir__<0?"Right":"")}),i},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Dt||n==Rt;y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_a(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");y.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[n](1)}}),y.prototype.compact=function(){return this.filter(Il)},y.prototype.find=function(t){return this.filter(t).head()},y.prototype.findLast=function(t){return this.reverse().find(t)},y.prototype.invokeMap=nr(function(t,e){return"function"==typeof t?new y(this):this.map(function(n){return ki(n,t,e)})}),y.prototype.reject=function(t){return this.filter(Ps(_a(t)))},y.prototype.slice=function(t,e){t=Au(t);var n=this;return n.__filtered__&&(t>0||e<0)?new y(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==nt&&(e=Au(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},y.prototype.toArray=function(){return this.take(Mt)},Zn(y.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=n[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,l=e instanceof y,c=u[0],d=l||mh(e),h=function(t){var e=o.apply(n,p([t],u));return a&&f?e[0]:e};d&&i&&"function"==typeof c&&1!=c.length&&(l=d=!1);var f=this.__chain__,g=!!this.__actions__.length,m=s&&!f,v=l&&!g;if(!s&&d){e=v?e:new y(this);var _=t.apply(e,u);return _.__actions__.push({func:Jo,args:[h],thisArg:nt}),new r(_,f)}return m&&v?t.apply(this,u):(_=this.thru(h),m?a?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=dc[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(mh(n)?n:[],t)}return this[i](function(n){return e.apply(mh(n)?n:[],t)})}}),Zn(y.prototype,function(t,e){var i=n[e];if(i){var r=i.name+"";mc.call(rd,r)||(rd[r]=[]),rd[r].push({name:e,func:i})}}),rd[Qr(nt,mt).name]=[{name:"wrapper",func:nt}],y.prototype.clone=C,y.prototype.reverse=X,y.prototype.value=Z,n.prototype.at=Xd,n.prototype.chain=Zo,n.prototype.commit=ts,n.prototype.next=es,n.prototype.plant=is,n.prototype.reverse=rs,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=as,n.prototype.first=n.prototype.head,Pc&&(n.prototype[Pc]=ns),n},bi=Ei();ri._=bi,i=function(){return bi}.call(e,n,e,r),!(i!==nt&&(r.exports=i))}).call(this)}).call(e,function(){return this}(),n(28)(t))},function(t,e,n){var i,r;i=[n(4)],r=function(t){if(t("host-browser")){var e=navigator,n=e.userAgent,i=e.appVersion,r=parseFloat(i);if(t.add("ie11",n.indexOf("Trident")>=0),t.add("air",n.indexOf("AdobeAIR")>=0),t.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),t.add("khtml",i.indexOf("Konqueror")>=0?r:void 0),t.add("webkit",parseFloat(n.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(n.split("Chrome/")[1])||void 0),t.add("safari",i.indexOf("Safari")>=0&&!t("chrome")?parseFloat(i.split("Version/")[1]):void 0),t.add("mac",i.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),n.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));t.add(a,s),t.add("ios",s)}if(t.add("android",parseFloat(n.split("Android ")[1])||void 0),t.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||void 0),t.add("svg","undefined"!=typeof SVGAngle),!t("webkit")){if(n.indexOf("Opera")>=0&&t.add("opera",r>=9.8?parseFloat(n.split("Version/")[1])||r:r),n.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&t.add("mozilla",r),t("mozilla")&&t.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var u=parseFloat(i.split("MSIE ")[1])||void 0,l=document.documentMode;l&&5!=l&&Math.floor(u)!=l&&(u=l),t.add("ie",u)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(54)],r=function(t,e){var n=t([],{constructor:function(){"withCredentials"in new XMLHttpRequest?this.corsSupport="xhr":"object"==typeof XDomainRequest||"function"==typeof XDomainRequest?this.corsSupport="xd":console.error("xhrProvider::constructor - CORS in not supported by the browser")},request:function(t,n,i,r,a){if("xd"==this.corsSupport){for(var o in i.query)t+=t.indexOf("?")!=-1?"&":"?",t+=o+"="+i.query[o];i.preventCache&&(t+=t.indexOf("?")!=-1?"&":"?",t+="_cb="+(new Date).getTime());var s=new XDomainRequest;s.open(i.method||"GET",t),s.timeout=0,s.onload=function(){if("json"==i.handleAs.toLowerCase())null!=r&&void 0!=r&&r(n,JSON.parse(s.responseText));else{var t;if(window.DOMParser){var e=new window.DOMParser;t=e.parseFromString(s.responseText,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(s.responseText);null!=r&&void 0!=r&&r(n,t.documentElement||t)}},s.onprogress=function(){},s.ontimeout=function(){},s.onerror=function(){null!=a&&void 0!=a&&a(n,"An unexpected error occurred")},setTimeout(function(){s.send()},250)}else"xhr"==this.corsSupport?e(t,i).then(function(t){null!=r&&void 0!=r&&r(n,t.documentElement||t)},function(t){null!=a&&void 0!=a&&a(n,"An unexpected error occurred: "+t);
}):console.error("xhrProvider::request - CORS in not supported by the browser")}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(5),n(9),n(17),n(7),n(19)],r=function(t,e,n,i,r,a){function o(t,e){var n=e.parentNode;n&&n.insertBefore(t,e)}function s(t,e){var n=e.parentNode;n&&(n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling))}function u(t){if(t.canHaveChildren)try{return void(t.innerHTML="")}catch(t){}for(var e;e=t.lastChild;)l(e,t)}function l(t,e){t.firstChild&&u(t),e&&(n("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,h={},f=0,p="__"+e._scopeName+"ToDomId";for(var g in c)if(c.hasOwnProperty(g)){var m=c[g];m.pre="option"==g?'<select multiple="multiple">':"<"+m.join("><")+">",m.post="</"+m.reverse().join("></")+">"}var v;n("ie")<=8&&(v=function(t){t.__dojo_html5_tested="yes";var e=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),_(e)}),t.toDom=function(t,e){e=e||i.doc;var r=e[p];r||(e[p]=r=++f+"",h[r]=e.createElement("div")),n("ie")<=8&&!e.__dojo_html5_tested&&e.body&&v(e),t+="";var a,o,s,u,l=t.match(d),g=l?l[1].toLowerCase():"",m=h[r];if(l&&c[g])for(a=c[g],m.innerHTML=a.pre+t+a.post,o=a.length;o;--o)m=m.firstChild;else m.innerHTML=t;if(1==m.childNodes.length)return m.removeChild(m.firstChild);for(u=e.createDocumentFragment();s=m.firstChild;)u.appendChild(s);return u},t.place=function(e,n,i){if(n=r.byId(n),"string"==typeof e&&(e=/^\s*</.test(e)?t.toDom(e,n.ownerDocument):r.byId(e)),"number"==typeof i){var a=n.childNodes;!a.length||a.length<=i?n.appendChild(e):o(e,a[i<0?0:i])}else switch(i){case"before":o(e,n);break;case"after":s(e,n);break;case"replace":n.parentNode.replaceChild(e,n);break;case"only":t.empty(n),n.appendChild(e);break;case"first":if(n.firstChild){o(e,n.firstChild);break}default:n.appendChild(e)}return e};var y=t.create=function(e,n,o,s){var u=i.doc;return o&&(o=r.byId(o),u=o.ownerDocument),"string"==typeof e&&(e=u.createElement(e)),n&&a.set(e,n),o&&t.place(e,o,s),e};t.empty=function(t){u(r.byId(t))};var _=t.destroy=function(t){t=r.byId(t),t&&l(t,t.parentNode)}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3)],r=function(t,e){var n=t([],{INTERNAL_REQUEST_API_FUNCTIONS:{"get-alternate-content":"_onApiRequestGetAlternateContent","get-vast-instream":"_onApiRequestGetVastInstream"},constructor:function(t,e){this.config=t,this.target=e},emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(33),n(3)],r=function(t,e){"use strict";function n(){}var i=t.after;return n.prototype={on:function(t,n){return e.parse(this,t,n,function(t,e){return i(t,"on"+e,n,!0)})},emit:function(t,n){var i=[this];return i.push.apply(i,arguments),e.emit.apply(e,i)}},n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(32),n(25),n(24),n(4),n(2),n(90)],r=function(t,e,n,i,r,a,o){var s=function(){},u=Object.freeze||function(){},l=t.Deferred=function(t){function o(t){if(h)throw new Error("This deferred has already been resolved");d=t,h=!0,c()}function c(){for(var t;!t&&v;){var n=v;v=v.next,(t=n.progress==s)&&(h=!1);var i=g?n.error:n.resolved;if(r("config-useDeferredInstrumentation")&&g&&e.instrumentRejected&&e.instrumentRejected(d,!!i),i)try{var o=i(d);if(o&&"function"==typeof o.then){o.then(a.hitch(n.deferred,"resolve"),a.hitch(n.deferred,"reject"),a.hitch(n.deferred,"progress"));continue}var u=t&&void 0===o;t&&!u&&(g=o instanceof Error),n.deferred[u&&g?"reject":"resolve"](u?d:o)}catch(t){n.deferred.reject(t)}else g?n.deferred.reject(d):n.deferred.resolve(d)}}var d,h,f,p,g,m,v,y=this.promise=new n;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return f},this.resolve=this.callback=function(t){this.fired=p=0,this.results=[t,null],o(t)},this.reject=this.errback=function(t){g=!0,this.fired=p=1,r("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(t,!!v),o(t),this.results=[null,t]},this.progress=function(t){for(var e=v;e;){var n=e.progress;n&&n(t),e=e.next}},this.addCallbacks=function(t,e){return this.then(t,e,s),this},y.then=this.then=function(t,e,n){var i=n==s?this:new l(y.cancel),r={resolved:t,error:e,progress:n,deferred:i};return v?m=m.next=r:v=m=r,h&&c(),i.promise};var _=this;y.cancel=this.cancel=function(){if(!h){var e=t&&t(_);h||(e instanceof Error||(e=new i(e)),e.log=!1,_.reject(e))}f=!0},u(y)};return a.extend(l,{addCallback:function(e){return this.addCallbacks(a.hitch.apply(t,arguments))},addErrback:function(e){return this.addCallbacks(null,a.hitch.apply(t,arguments))},addBoth:function(e){var n=a.hitch.apply(t,arguments);return this.addCallbacks(n,n)},fired:-1}),l.when=t.when=o,l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){function i(t){var e=r.keys(u);return void 0!=t&&e.indexOf(t)>-1}var r=n(8),a=n(21),o="prod01",s=a.getProtocol(),u={prod01:{liveStream:"playerservices.streamtheworld.com/api/livestream",nowPlayingHistory:s+"//np.tritondigital.com/public/nowplaying",playerWebAdmin:s+"//pwav4.tritondigital.com/jsonconfig.php",coreModuleDir:s+"//sdk.listenlive.co/core/swf/",npe:s+"//npe2.listenlive.co/services/",see:s+"//see-p-elb-01.tritondigital.net/widget/{tenantId}/see.js",UA:"UA-34627310-11"}},l=window.TdPlatform=function(t){var e=i(t)?t:o;this.endpoint=u[e]};t.exports=l},function(t,e,n){var i=n(8),r=n(110),a={parse:function(t){var e,n;return window.DOMParser?(e=new DOMParser,n=e.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)),n},textContent:function(t){var e="";return t&&i.forEach(t.childNodes,function(t){switch(t.nodeType){case 3:case 2:case 4:e+=t.nodeValue}}),e},xmlToJson:function(t){var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!1,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!1};return r.parseXML(t,e)}};t.exports=a},function(t,e,n){var i,r;i=[n(5),n(2),n(9)],r=function(t,e,n){var i={global:t.global,doc:this.document||null,body:function(e){return e=e||t.doc,e.body||e.getElementsByTagName("body")[0]},setContext:function(e,n){t.global=i.global=e,t.doc=i.doc=n},withGlobal:function(e,n,r,a){var o=t.global;try{return t.global=i.global=e,i.withDoc.call(null,e.document,n,r,a)}finally{t.global=i.global=o}},withDoc:function(e,r,a,o){var s,u,l,c=i.doc,d=n("quirks"),h=n("ie");try{return t.doc=i.doc=e,t.isQuirks=n.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),n("ie")&&(l=e.parentWindow)&&l.navigator&&(s=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0,u=e.documentMode,u&&5!=u&&Math.floor(s)!=u&&(s=u),t.isIE=n.add("ie",s,!0,!0)),a&&"string"==typeof r&&(r=a[r]),r.apply(a,o||[])}finally{t.doc=i.doc=c,t.isQuirks=n.add("quirks",d,!0,!0),t.isIE=n.add("ie",h,!0,!0)}}};return n("extend-dojo")&&e.mixin(t,i),i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i=n(8);window.lodash=i.noConflict();var r=function(){if("object"==typeof r.instance)return r.instance;var t="en",e=["en","fr","pt","es"],a=document.getElementsByTagName("script");if(!i.isEmpty(a)){var o=a[a.length-1].getAttribute("tdsdk-lang");i.isEmpty(o)||(t=o)}this.setLocalization=function(e){t=e},this.getLocalization=function(){return i.indexOf(e,t)>-1?n(111)("./"+t+".json"):n(57)},r.instance=this};t.exports=new r},function(t,e,n){var i,r;i=[e,n(9),n(2),n(7),n(23),n(81)],r=function(t,e,n,i,r,a){function o(t,e){var n=t.getAttributeNode&&t.getAttributeNode(e);return n&&n.specified}var s={innerHTML:1,className:1,htmlFor:e("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};t.has=function(t,e){var n=e.toLowerCase();return s[a.names[n]||e]||o(i.byId(t),u[n]||e)},t.get=function(t,e){t=i.byId(t);var r=e.toLowerCase(),l=a.names[r]||e,c=s[l],d=t[l];if(c&&"undefined"!=typeof d)return d;if("href"!=l&&("boolean"==typeof d||n.isFunction(d)))return d;var h=u[r]||e;return o(t,h)?t.getAttribute(h):null},t.set=function(e,o,l){if(e=i.byId(e),2==arguments.length){for(var c in o)t.set(e,c,o[c]);return e}var d=o.toLowerCase(),h=a.names[d]||o,f=s[h];return"style"==h&&"string"!=typeof l?(r.set(e,l),e):f||"boolean"==typeof l||n.isFunction(l)?a.set(e,o,l):(e.setAttribute(u[d]||o,l),e)},t.remove=function(t,e){i.byId(t).removeAttribute(u[e.toLowerCase()]||e)},t.getNodeProp=function(t,e){t=i.byId(t);var n=e.toLowerCase(),r=a.names[n]||e;if(r in t&&"href"!=r)return t[r];var s=u[n]||e;return o(t,s)?t.getAttribute(s):null}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i;(function(t,r){(function(){"use strict";function a(t){return t=String(t),t.charAt(0).toUpperCase()+t.slice(1)}function o(t,e,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),t=u(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function s(t,e){var n=-1,i=t?t.length:0;if("number"==typeof i&&i>-1&&i<=b)for(;++n<i;)e(t[n],n,t);else l(t,e)}function u(t){return t=p(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:a(t)}function l(t,e){for(var n in t)S.call(t,n)&&e(t[n],n,t)}function c(t){return null==t?a(t):k.call(t).slice(8,-1)}function d(t,e){var n=null!=t?typeof t[e]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}function h(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function f(t,e){var n=null;return s(t,function(i,r){n=e(n,i,r,t)}),n}function p(t){return String(t).replace(/^ +| +$/g,"")}function g(t){function e(e){return f(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}function n(e){return f(e,function(e,n,i){return e||(n[q]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+h(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})}function i(e){return f(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}function r(e){return f(e,function(e,n){var i=n.pattern||h(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=o(e,i,n.label||n)),e})}function a(e){return f(e,function(e,n){var i=n.pattern||h(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=u(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function s(e){return f(e,function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}function m(){return this.description||""}var y=v,_=t&&"object"==typeof t&&"String"!=c(t);_&&(y=t,t=null);var E=y.navigator||{},b=E.userAgent||"";t||(t=b);var T,S,w=_?!!E.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(k.toString()),C="Object",L=_?C:"ScriptBridgingProxyObject",D=_?C:"Environment",I=_&&y.java?"JavaPackage":c(y.java),R=_?C:"RuntimeObject",P=/\bJava/.test(I)&&y.java,O=P&&c(y.environment)==D,x=P?"a":"α",N=P?"b":"β",M=y.document||{},F=y.operamini||y.opera,U=A.test(U=_&&F?F["[[Class]]"]:c(F))?U:F=null,B=t,j=[],G=null,H=t==b,V=H&&F&&"function"==typeof F.version&&F.version(),K=e([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),W=i(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),q=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=n({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),z=r(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(K&&(K=[K]),Y&&!q&&(q=a([Y])),(T=/\bGoogle TV\b/.exec(q))&&(q=T[0]),/\bSimulator\b/i.test(t)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==W&&/\bOPiOS\b/.test(t)&&j.push("running in Turbo/Uncompressed mode"),"IE"==W&&/\blike iPhone OS\b/.test(t)?(T=g(t.replace(/like iPhone OS/,"")),Y=T.manufacturer,q=T.product):/^iP/.test(q)?(W||(W="Safari"),z="iOS"+((T=/ OS ([\d_]+)/i.exec(t))?" "+T[1].replace(/_/g,"."):"")):"Konqueror"!=W||/buntu/i.test(z)?Y&&"Google"!=Y&&(/Chrome/.test(W)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(q))||/\bAndroid\b/.test(z)&&/^Chrome/.test(W)&&/\bVersion\//i.test(t)?(W="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==W?(/\bMobi/i.test(t)||(z="Android",j.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&j.unshift("accelerated")):"PaleMoon"==W&&(T=/\bFirefox\/([\d.]+)\b/.exec(t))?j.push("identifying as Firefox "+T[1]):"Firefox"==W&&(T=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(z||(z="Firefox OS"),q||(q=T[1])):!W||(T=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(W))?(W&&!q&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(T+"/")+8))&&(W=null),(T=q||Y||z)&&(q||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(W=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:T)+" Browser")):"Electron"==W&&(T=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&j.push("Chromium "+T):z="Kubuntu",V||(V=s(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(W),"(?:Firefox|Minefield|NetFront)"])),(T="iCab"==K&&parseFloat(V)>3&&"WebKit"||/\bOpera\b/.test(W)&&(/\bOPR\b/.test(t)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(K)&&"WebKit"||!K&&/\bMSIE\b/i.test(t)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==K&&/\bPlayStation\b(?! Vita\b)/i.test(W)&&"NetFront")&&(K=[T]),"IE"==W&&(T=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(W+=" Mobile",z="Windows Phone "+(/\+$/.test(T)?T:T+".x"),j.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(W="IE Mobile",z="Windows Phone 8.x",j.unshift("desktop mode"),V||(V=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=W&&"Trident"==K&&(T=/\brv:([\d.]+)/.exec(t))&&(W&&j.push("identifying as "+W+(V?" "+V:"")),W="IE",V=T[1]),H){if(d(y,"global"))if(P&&(T=P.lang.System,B=T.getProperty("os.arch"),z=z||T.getProperty("os.name")+" "+T.getProperty("os.version")),O){try{V=y.require("ringo/engine").version.join("."),W="RingoJS"}catch(t){(T=y.system)&&T.global.system==y.system&&(W="Narwhal",z||(z=T[0].os||null))}W||(W="Rhino")}else"object"==typeof y.process&&!y.process.browser&&(T=y.process)&&("object"==typeof T.versions&&("string"==typeof T.versions.electron?(j.push("Node "+T.versions.node),W="Electron",V=T.versions.electron):"string"==typeof T.versions.nw&&(j.push("Chromium "+V,"Node "+T.versions.node),W="NW.js",V=T.versions.nw)),W||(W="Node.js",B=T.arch,z=T.platform,V=/[\d.]+/.exec(T.version),V=V?V[0]:null));else c(T=y.runtime)==L?(W="Adobe AIR",z=T.flash.system.Capabilities.os):c(T=y.phantom)==R?(W="PhantomJS",V=(T=T.version||null)&&T.major+"."+T.minor+"."+T.patch):"number"==typeof M.documentMode&&(T=/\bTrident\/(\d+)/i.exec(t))?(V=[V,M.documentMode],(T=+T[1]+4)!=V[1]&&(j.push("IE "+V[1]+" mode"),K&&(K[1]=""),V[1]=T),V="IE"==W?String(V[1].toFixed(1)):V[0]):"number"==typeof M.documentMode&&/^(?:Chrome|Firefox)\b/.test(W)&&(j.push("masking as "+W+" "+V),W="IE",V="11.0",K=["Trident"],z="Windows");z=z&&u(z)}if(V&&(T=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(V)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(H&&E.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(G=/b/i.test(T)?"beta":"alpha",V=V.replace(RegExp(T+"\\+?$"),"")+("beta"==G?N:x)+(/\d+\+?/.exec(T)||"")),"Fennec"==W||"Firefox"==W&&/\b(?:Android|Firefox OS)\b/.test(z))W="Firefox Mobile";else if("Maxthon"==W&&V)V=V.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(q))"Xbox 360"==q&&(z=null),"Xbox 360"==q&&/\bIEMobile\b/.test(t)&&j.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(W)&&(!W||q||/Browser|Mobi/.test(W))||"Windows CE"!=z&&!/Mobi/i.test(t))if("IE"==W&&H)try{null===y.external&&j.unshift("platform preview")}catch(t){j.unshift("embedded")}else(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(t))&&(T=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||V)?(T=[T,/BB10/.test(t)],z=(T[1]?(q=null,Y="BlackBerry"):"Device Software")+" "+T[0],V=null):this!=l&&"Wii"!=q&&(H&&F||/Opera/.test(W)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==W&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==W&&(z&&!/^Win/.test(z)&&V>5.5||/\bWindows XP\b/.test(z)&&V>8||8==V&&!/\bTrident\b/.test(t)))&&!A.test(T=g.call(l,t.replace(A,"")+";"))&&T.name&&(T="ing as "+T.name+((T=T.version)?" "+T:""),A.test(W)?(/\bIE\b/.test(T)&&"Mac OS"==z&&(z=null),T="identify"+T):(T="mask"+T,W=U?u(U.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(T)&&(z=null),H||(V=null)),K=["Presto"],j.push(T));else W+=" Mobile";(T=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(T=[parseFloat(T.replace(/\.(\d)$/,".0$1")),T],"Safari"==W&&"+"==T[1].slice(-1)?(W="WebKit Nightly",G="alpha",V=T[1].slice(0,-1)):V!=T[1]&&V!=(T[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(V=null),T[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==T[0]&&537.36==T[2]&&parseFloat(T[1])>=28&&"WebKit"==K&&(K=["Blink"]),H&&(w||T[1])?(K&&(K[1]="like Chrome"),T=T[1]||(T=T[0],T<530?1:T<532?2:T<532.05?3:T<533?4:T<534.03?5:T<534.07?6:T<534.1?7:T<534.13?8:T<534.16?9:T<534.24?10:T<534.3?11:T<535.01?12:T<535.02?"13+":T<535.07?15:T<535.11?16:T<535.19?17:T<536.05?18:T<536.1?19:T<537.01?20:T<537.11?"21+":T<537.13?23:T<537.18?24:T<537.24?25:T<537.36?26:"Blink"!=K?"27":"28")):(K&&(K[1]="like Safari"),T=T[0],T=T<400?1:T<500?2:T<526?3:T<533?4:T<534?"4+":T<535?5:T<537?6:T<538?7:T<601?8:"8"),K&&(K[1]+=" "+(T+="number"==typeof T?".x":/[.+]/.test(T)?"":"+")),"Safari"==W&&(!V||parseInt(V)>45)&&(V=T)),"Opera"==W&&(T=/\bzbov|zvav$/.exec(z))?(W+=" ",j.unshift("desktop mode"),"zvav"==T?(W+="Mini",V=null):W+="Mobile",z=z.replace(RegExp(" *"+T+"$"),"")):"Safari"==W&&/\bChrome\b/.exec(K&&K[1])&&(j.unshift("desktop mode"),W="Chrome Mobile",V=null,/\bOS X\b/.test(z)?(Y="Apple",z="iOS 4.3+"):z=null),V&&0==V.indexOf(T=/[\d.]+$/.exec(z))&&t.indexOf("/"+T+"-")>-1&&(z=p(z.replace(T,""))),K&&!/\b(?:Avant|Nook)\b/.test(W)&&(/Browser|Lunascape|Maxthon/.test(W)||"Safari"!=W&&/^iOS/.test(z)&&/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(W)&&K[1])&&(T=K[K.length-1])&&j.push(T),j.length&&(j=["("+j.join("; ")+")"]),Y&&q&&q.indexOf(Y)<0&&j.push("on "+Y),q&&j.push((/^on /.test(j[j.length-1])?"":"on ")+q),z&&(T=/ ([\d.+]+)$/.exec(z),S=T&&"/"==z.charAt(z.length-T[0].length-1),z={architecture:32,family:T&&!S?z.replace(T[0],""):z,version:T?T[1]:null,toString:function(){var t=this.version;return this.family+(t&&!S?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(T=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(B))&&!/\bi686\b/i.test(B)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+T),"")),W&&(/\bWOW64\b/i.test(t)||H&&/\w(?:86|32)$/.test(E.cpuClass||E.platform)&&!/\bWin64; x64\b/i.test(t))&&j.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==W&&parseFloat(V)>=39&&(z.architecture=64),t||(t=null);var X={};return X.description=t,X.layout=K&&K[0],X.manufacturer=Y,X.name=W,X.prerelease=G,X.product=q,X.ua=t,X.version=W&&V,X.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},X.parse=g,X.toString=m,X.version&&j.unshift(V),X.name&&j.unshift(W),z&&W&&(z!=String(z).split(" ")[0]||z!=W.split(" ")[0]&&!q)&&j.push(q?"("+z+")":"on "+z),j.length&&(X.description=j.join(" ")),X}var m={function:!0,object:!0},v=m[typeof window]&&window||this,y=m[typeof e]&&e,_=m[typeof t]&&t&&!t.nodeType&&t,E=y&&_&&"object"==typeof r&&r;!E||E.global!==E&&E.window!==E&&E.self!==E||(v=E);var b=Math.pow(2,53)-1,A=/\bOpera/,T=Object.prototype,S=T.hasOwnProperty,k=T.toString,w=g();v.platform=w,i=function(){return w}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}).call(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){var n="https:";t.exports={currentProtocolIsHttps:function(){return window.location.protocol===n},getProtocol:function(){return window.location.protocol}}},function(t,e,n){function i(){w.is(k.STOPPED)||w.is(k.PAUSED)||this.emit("html5-playback-status",{type:A.DATA_LOADING,mediaNode:this.audioNode})}function r(){w.is(k.STOPPED)||w.is(k.PAUSED)||this.emit("html5-playback-status",{type:A.LOAD_START,mediaNode:this.audioNode})}function a(){var t=this;w.is(k.STOPPED)||w.is(k.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():(t.emit("html5-playback-status",{type:A.CAN_PLAY,mediaNode:t.audioNode}),this.audioNode.play().then(function(){}).catch(function(e){t.handleHTMLPlayError(e)})))}function o(){var t=this;w.is(k.STOPPED)||w.is(k.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().then(function(){t.emit("html5-playback-status",{type:A.CAN_PLAY_THROUGH,mediaNode:t.audioNode})}).catch(function(e){t.handleHTMLPlayError(e)}))}function s(){w.is(k.STOPPED)||w.is(k.PAUSED)||this.emit("html5-playback-status",{type:A.WAITING,mediaNode:this.audioNode})}function u(){w.is(k.STOPPED)||w.is(k.PAUSED)||this.emit("html5-playback-status",{type:A.EMPTIED,mediaNode:this.audioNode})}function l(){w.is(k.STOPPED)||w.is(k.PAUSED)||this.emit("html5-playback-status",{type:A.ABORT,mediaNode:this.audioNode})}function c(){w.is(k.STOPPED)||this.emit("html5-playback-status",{type:A.ENDED,mediaNode:this.audioNode})}function d(){null!==this.url&&this.emit("html5-playback-status",{type:A.PLAY,mediaNode:this.audioNode})}function h(){w.is(k.STOPPED)?this.emit("html5-playback-status",{type:A.STOP,mediaNode:this.audioNode}):this.emit("html5-playback-status",{type:A.PAUSE,mediaNode:this.audioNode})}function f(){var t=this.audioNode;w.is(k.STOPPED)?this.emit("html5-playback-status",{type:A.STOP,mediaNode:t}):3!=t.readyState?(this.resetAudioNode(),this.emit("html5-playback-status",{type:A.ERROR,mediaNode:t})):this.emit("html5-playback-status",{type:A.STOP,mediaNode:t})}function p(){var t=this.audioNode;this.emit("html5-playback-status",{type:A.ERROR,mediaNode:t})}function g(){w.is(k.STOPPED)||w.is(k.PAUSED)||(this.audioNode.currentTime.toFixed(1)==this.audioNode.duration.toFixed(1)?this.emit("html5-playback-status",{type:A.ENDED,mediaNode:this.audioNode}):this.isLive||this.emit("html5-playback-status",{type:A.TIME_UPDATE,mediaNode:this.audioNode}))}function m(){this.boundOnOffline=p.bind(this),this.audioNode.addEventListener("loadeddata",i.bind(this)),this.audioNode.addEventListener("loadstart",r.bind(this)),this.audioNode.addEventListener("canplay",a.bind(this)),this.audioNode.addEventListener("canplaythrough",o.bind(this)),this.audioNode.addEventListener("waiting",s.bind(this)),this.audioNode.addEventListener("emptied",u.bind(this)),this.audioNode.addEventListener("abort",l.bind(this)),this.audioNode.addEventListener("ended",c.bind(this)),this.audioNode.addEventListener("play",d.bind(this)),this.audioNode.addEventListener("pause",h.bind(this)),this.audioNode.addEventListener("timeupdate",g.bind(this)),this.audioNode.addEventListener("error",f.bind(this)),window.addEventListener("offline",this.boundOnOffline)}function v(){this.audioNode.removeEventListener("loadeddata",i),this.audioNode.removeEventListener("loadstart",r),this.audioNode.removeEventListener("canplay",a),this.audioNode.removeEventListener("canplaythrough",o),this.audioNode.removeEventListener("waiting",s),this.audioNode.removeEventListener("emptied",u),this.audioNode.removeEventListener("abort",l),this.audioNode.removeEventListener("ended",c),this.audioNode.removeEventListener("play",d),this.audioNode.removeEventListener("pause",h),this.audioNode.removeEventListener("timeupdate",g),this.audioNode.removeEventListener("error",f),window.removeEventListener("offline",this.boundOnOffline)}function y(){return this.audioNode||(this.audioNode=new Audio,this.audioNode.autoplay=!1,this.audioNode.preload="none",m.call(this)),this.audioNode}var _=n(8),E=n(91).EventEmitter,b=n(36),A=n(39),T=n(92),S=n(20),k={IDLE:"IDLE",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},w=T.create({initial:k.STOPPED,error:function(t,e){console.warn("Event",t,"inappropriate in current state",e)},events:[{name:"play",from:k.STOPPED,to:k.PLAYING},{name:"play",from:k.PLAYING,to:k.PLAYING},{name:"stop",from:k.PLAYING,to:k.STOPPED},{name:"stop",from:k.PAUSED,to:k.STOPPED},{name:"pause",from:k.PLAYING,to:k.PAUSED},{name:"resume",from:k.PAUSED,to:k.PLAYING}]});t.exports=_.assign(new E,{audioNode:null,init:function(){this.audioNode=y.call(this),this.url=null,this.audioNode.src=""},playAudio:function(t,e,n){if(this.audioNode&&this.stop(),this.audioNode=y.call(this),this.url=t||this.url,this.isLive=n||this.isLive,this.useHlsLibrary=e||this.useHlsLibrary,this.useHlsLibrary){var i={maxBufferLength:30};this.hls=new b(i),this.hls.loadSource(t),this.hls.attachMedia(this.audioNode)}else this.audioNode.src=t,this.audioNode.load();w.play()},stop:function(){var t=this;w.is(k.STOPPED)||(this.audioNode=y.call(this),w.stop(),this.audioNode.pause(),"Safari"!==S.name||this.audioNode.src.indexOf("m3u8")>-1||this.useHlsLibrary?setTimeout(function(){t.audioNode.src="",t.url=null,t.resetAudioNode()},300):setTimeout(function(){t.url=null,t.resetAudioNode()},300),"iOS"===S.os.family&&"Chrome Mobile"===S.name&&window.stop(),this.useHlsLibrary&&(this.hls.detachMedia(),this.hls.stopLoad(),this.hls.destroy()))},pause:function(){w.is(k.PAUSED)||(this.audioNode=y.call(this),this.audioNode.pause(),w.pause())},resume:function(){var t=this;w.is(k.PAUSED)&&(this.audioNode=y.call(this),"IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().catch(function(e){t.handleHTMLPlayError(e)}),w.resume())},mute:function(){w.is(k.PLAYING)&&(this.audioNode=y.call(this),this.stop())},unMute:function(){w.is(k.PLAYING)||(this.audioNode=y.call(this))},setVolume:function(t){this.audioNode=y.call(this),this.audioNode.volume=t,0==t&&this.mute()},isStopped:function(){return w.is(k.STOPPED)},resetAudioNode:function(){v.call(this),this.audioNode=null,w.can("stop")&&w.stop()},destroyAudioElement:function(){this.emit("destroyAudioElement")},handleHTMLPlayError:function(t){var e=this;"NotSupportedError"!==t.name&&"NotAllowedError"===t.name&&this.emit("html5-playback-status",{type:A.PLAY_NOT_ALLOWED,mediaNode:e.audioNode})}})},function(t,e,n){var i,r;i=[n(9),n(7)],r=function(t,e){function n(e,n,i){if(n=n.toLowerCase(),t("ie")){if("auto"==i){if("height"==n)return e.offsetHeight;if("width"==n)return e.offsetWidth}if("fontweight"==n)switch(i){case 700:return"bold";case 400:default:return"normal"}}return n in c||(c[n]=d.test(n)),c[n]?a(e,i):i}var i,r={};i=t("webkit")?function(t){var e;if(1==t.nodeType){var n=t.ownerDocument.defaultView;e=n.getComputedStyle(t,null),!e&&t.style&&(t.style.display="",e=n.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},r.getComputedStyle=i;var a;a=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var n=t.style,i=t.runtimeStyle,r=t.currentStyle,a=n.left,o=i.left;i.left=r.left;try{n.left=e,e=n.pixelLeft}catch(t){e=0}return n.left=a,i.left=o,e}:function(t,e){return parseFloat(e)||0},r.toPixelValue=a;var o="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(o)}catch(t){return e?{}:null}},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(t){return 1}}:function(t){return i(t).opacity},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){""===e&&(e=1);var n=100*e,i=1===e;if(i?(t.style.zoom="",s(t)&&(t.style.filter=t.style.filter.replace(new RegExp("\\s*progid:"+o+"\\([^\\)]+?\\)","i"),""))):(t.style.zoom=1,s(t)?s(t,1).Opacity=n:t.style.filter+=" progid:"+o+"(Opacity="+n+")",s(t,1).Enabled=!0),"tr"==t.tagName.toLowerCase())for(var r=t.firstChild;r;r=r.nextSibling)"td"==r.tagName.toLowerCase()&&l(r,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,float:1};return r.get=function(t,i){var a=e.byId(t),o=arguments.length,s="opacity"==i;if(2==o&&s)return u(a);i=h[i]?"cssFloat"in a.style?"cssFloat":"styleFloat":i;var l=r.getComputedStyle(a);return 1==o?l:n(a,i,l[i]||a.style[i])},r.set=function(t,n,i){var a=e.byId(t),o=arguments.length,s="opacity"==n;if(n=h[n]?"cssFloat"in a.style?"cssFloat":"styleFloat":n,3==o)return s?l(a,i):a.style[n]=i;for(var u in n)r.set(t,u,n[u]);return r.getComputedStyle(a)},r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(35)],r=function(t){return t("CancelError",null,null,{dojoType:"cancel"})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){"use strict";function e(){throw new TypeError("abstract");
}return t.extend(function(){},{then:function(t,n,i){e()},cancel:function(t,n){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(t){return this.then(t,t)},otherwise:function(t){return this.then(null,t)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(13)],r=function(t){var e=new t;return{publish:function(t,n){return e.emit.apply(e,arguments)},subscribe:function(t,n){return e.on.apply(e,arguments)}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){function n(t,e){if(t instanceof Array){var r=t.map(function(t){return n(t)});e&&e.apply(this,r)}else{if(i[t])return i[t];console.error('Dynamic dojo require is not supported. Trying to require "'+t+'"')}}var i={};n.async=!0,n.toUrl=function(t){return t},n.register=function(t,e){return i[t]=e,e},n.unregister=function(t){delete i[t]},t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var i,r;i=[],r=function(){var t={VAST_AD:"vastAd",MEDIA_AD:"mediaAd",ANDO_RUN_SPOT:"andoRunSpot",TRITON_AD_PLATFORM:"tap"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i=n(8);t.exports={toSafeArray:function(t){return t?i.isArray(t)?t:[t]:[]}}},function(t,e,n){var i,r,a=n(15);i=[n(1),n(2),n(6),n(3),n(13)],r=function(t,e,n,i,r){var o=t([r],{constructor:function(t,e){this.data=t,this.platformId=e,this.url=t.staticURL,this.id=t.id,this.listeners=[],this.platform=new a(e),this.alreadyFetched=!1},getStaticUrl:function(){return this.data.staticURL},getDynamicUrl:function(){return this.platform.endpoint.npe},getDynamicArtistUrl:function(t){return this.getDynamicUrl()+"artist/"+t},getDynamicAlbumUrl:function(t){return this.getDynamicUrl()+"album/"+t},getDynamicTrackUrl:function(t){return this.getDynamicUrl()+"track/"+t},getDynamicArtistPictureUrl:function(t,e){return this.getDynamicUrl()+"artist/"+t+"/picture/"+e},getDynamicAlbumPictureUrl:function(t,e){return this.getDynamicUrl()+"album/"+t+"/picture/"+e},notify:function(t,e){this.emit(t,e)},getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},addEventListener:function(t,r){var a=-1;n.forEach(this.listeners,function(e,n){e.eventName==t&&e.callback==r&&(a=n)},this),a==-1&&this.listeners.push({eventName:t,callback:r,listener:i(this,t,e.hitch(this,r))})},removeEventListener:function(t,e){var i=-1;n.forEach(this.listeners,function(n,r){n.eventName==t&&n.callback==e&&(i=r)},this),i>-1&&(this.listeners[i].listener.remove(),this.listeners.splice(i,1))}});return o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(2),n(24),n(25),n(56)],r=function(t,e,n,i,r){"use strict";var a=0,o=1,s=2,u="This deferred has already been fulfilled.",l=Object.freeze||function(){},c=function(e,n,i,r,a){t("config-deferredInstrumentation")&&n===s&&p.instrumentRejected&&0===e.length&&p.instrumentRejected(i,!1,r,a);for(var o=0;o<e.length;o++)d(e[o],n,i,r)},d=function(e,n,i,r){var u=e[n],l=e.deferred;if(u)try{var c=u(i);if(n===a)"undefined"!=typeof c&&f(l,n,c);else{if(c&&"function"==typeof c.then)return e.cancel=c.cancel,void c.then(h(l,o),h(l,s),h(l,a));f(l,o,c)}}catch(t){f(l,s,t)}else f(l,n,i);t("config-deferredInstrumentation")&&n===s&&p.instrumentRejected&&p.instrumentRejected(i,!!u,r,l.promise)},h=function(t,e){return function(n){f(t,e,n)}},f=function(t,e,n){if(!t.isCanceled())switch(e){case a:t.progress(n);break;case o:t.resolve(n);break;case s:t.reject(n)}},p=function(e){var r,h,f,g=this.promise=new i,m=this,v=!1,y=[];t("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(m,p),Error.captureStackTrace(g,p)),this.isResolved=g.isResolved=function(){return r===o},this.isRejected=g.isRejected=function(){return r===s},this.isFulfilled=g.isFulfilled=function(){return!!r},this.isCanceled=g.isCanceled=function(){return v},this.progress=function(t,e){if(r){if(e===!0)throw new Error(u);return g}return c(y,a,t,null,m),g},this.resolve=function(t,e){if(r){if(e===!0)throw new Error(u);return g}return c(y,r=o,h=t,null,m),y=null,g};var _=this.reject=function(e,n){if(r){if(n===!0)throw new Error(u);return g}return t("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(f={},_),c(y,r=s,h=e,f,m),y=null,g};this.then=g.then=function(t,e,n){var i=[n,t,e];return i.cancel=g.cancel,i.deferred=new p(function(t){return i.cancel&&i.cancel(t)}),r&&!y?d(i,r,h,f):y.push(i),i.deferred.promise},this.cancel=g.cancel=function(t,i){if(r){if(i===!0)throw new Error(u)}else{if(e){var a=e(t);t="undefined"==typeof a?t:a}if(v=!0,!r)return"undefined"==typeof t&&(t=new n),_(t),t;if(r===s&&h===t)return t}},l(g)};return p.prototype.toString=function(){return"[object Deferred]"},r&&r(p),p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){"use strict";function t(t,e,n,r){var a,o=t[e],s="around"==e;if(s){var u=n(function(){return o.advice(this,arguments)});a={remove:function(){u&&(u=t=n=null)},advice:function(t,e){return u?u.apply(t,e):o.advice(t,e)}}}else a={remove:function(){if(a.advice){var i=a.previous,r=a.next;r||i?(i?i.next=r:t[e]=r,r&&(r.previous=i)):delete t[e],t=n=a.advice=null}},id:i++,advice:n,receiveArguments:r};if(o&&!s)if("after"==e){for(;o.next&&(o=o.next););o.next=a,a.previous=o}else"before"==e&&(t[e]=a,a.next=o,o.previous=a);else t[e]=a;return a}function e(e){return function(r,a,o,s){var u,l=r[a];l&&l.target==r||(r[a]=u=function(){for(var t=i,e=arguments,r=u.before;r;)e=r.advice.apply(this,e)||e,r=r.next;if(u.around)var a=u.around.advice(this,e);for(var o=u.after;o&&o.id<t;){if(o.receiveArguments){var s=o.advice.apply(this,e);a=s===n?a:s}else a=o.advice.call(this,a,e);o=o.next}return a},l&&(u.around={advice:function(t,e){return l.apply(t,e)}}),u.target=r);var c=t(u||l,e,o,s);return o=null,c}}var n,i=0,r=e("after"),a=e("before"),o=e("around");return{before:a,around:o,after:r}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(35)],r=function(t){return t("RequestError",function(t,e){this.response=e})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){return function(e,n,i,r){i=i||Error;var a=function(t){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,a);var e,r=Error.call(this,t);for(e in r)r.hasOwnProperty(e)&&(this[e]=r[e]);this.message=t,this.stack=r.stack}else i.apply(this,arguments);n&&n.apply(this,arguments)};return a.prototype=t.delegate(i.prototype,r),a.prototype.name=e,a.prototype.constructor=a,a}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){"undefined"!=typeof window&&function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":/*!*********************************************!*\
	  !*** ./node_modules/eventemitter3/index.js ***!
	  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,i||t,a),s=l?l+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,l="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(l=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)u.call(t,e)&&n.push(l?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=l?l+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,a=new Array(r);i<r;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(t){var e=l?l+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,i,r,a){var o=l?l+t:t;if(!this._events[o])return!1;var s,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,r),!0;case 6:return c.fn.call(c.context,e,n,i,r,a),!0}for(u=1,s=new Array(d-1);u<d;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,i);break;default:if(!s)for(h=1,s=new Array(d-1);h<d;h++)s[h-1]=arguments[h];c[u].fn.apply(c[u].context,s)}}return!0},s.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,i){var r=l?l+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,r);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==e||i&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[r]=1===u.length?u[0]:u:o(this,r)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=l?l+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=l,s.EventEmitter=s,t.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":/*!*****************************************************!*\
	  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
	  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,n){!function(e){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,i=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),e=e.trim(),!e){if(!n.alwaysNormalize)return t;var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=i.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}(this)},"./node_modules/webworkify-webpack/index.js":/*!**************************************************!*\
	  !*** ./node_modules/webworkify-webpack/index.js ***!
	  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,n){function i(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function o(t,e,i){var o={};o[i]=[];var s=e.toString(),u=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var d,h=u[1],f=new RegExp("(\\\\n|\\W)"+r(h)+c,"g");d=f.exec(s);)"dll-reference"!==d[3]&&o[i].push(d[3]);for(f=new RegExp("\\("+r(h)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+c,"g");d=f.exec(s);)t[d[2]]||(o[i].push(d[1]),t[d[2]]=n(d[1]).m),o[d[2]]=o[d[2]]||[],o[d[2]].push(d[4]);for(var p=Object.keys(o),g=0;g<p.length;g++)for(var m=0;m<o[p[g]].length;m++)a(o[p[g]][m])&&(o[p[g]][m]=1*o[p[g]][m]);return o}function s(t){var e=Object.keys(t);return e.reduce(function(e,n){return e||t[n].length>0},!1)}function u(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};s(n);)for(var a=Object.keys(n),u=0;u<a.length;u++){var l=a[u],c=n[l],d=c.pop();if(r[l]=r[l]||{},!r[l][d]&&t[l][d]){r[l][d]=!0,i[l]=i[l]||[],i[l].push(d);for(var h=o(t,t[l][d],l),f=Object.keys(h),p=0;p<f.length;p++)n[f[p]]=n[f[p]]||[],n[f[p]]=n[f[p]].concat(h[f[p]])}}return i}var l="[\\.|\\-|\\+|\\w|/|@]+",c="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+l+").*?\\)";t.exports=function(t,e){e=e||{};var r={main:n.m},a=e.all?{main:Object.keys(r.main)}:u(r,t),o="";Object.keys(a).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;a[t][e];)e++;a[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map(function(e){return""+JSON.stringify(e)+": "+r[t][e].toString()}).join(",")+"});\n"}),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map(function(t){return""+JSON.stringify(t)+": "+r.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(e.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=l.createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":/*!********************************************!*\
	  !*** ./src/crypt/decrypter.js + 3 modules ***!
	  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
function(t,e,n){"use strict";function i(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}n.r(e);var r=function(){function t(t,e){this.subtle=t,this.aesIV=e}var e=t.prototype;return e.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),a=function(){function t(t,e){this.subtle=t,this.key=e}var e=t.prototype;return e.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),o=a,s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=e.getUint32(4*i);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)g<128?h[g]=g<<1:h[g]=g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,t[f]=m,e[m]=f;var v=h[f],y=h[v],_=h[y],E=257*h[m]^16843008*m;i[f]=E<<24|E>>>8,r[f]=E<<16|E>>>16,a[f]=E<<8|E>>>24,o[f]=E,E=16843009*_^65537*y^257*v^16843008*f,u[m]=E<<24|E>>>8,l[m]=E<<16|E>>>16,c[m]=E<<8|E>>>24,d[m]=E,f?(f=v^h[h[h[_^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,u,l=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<l;a++)a<r?s=c[a]=e[a]:(u=s,a%r===0?(u=u<<8|u>>>24,u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=f[a/r|0]<<24):r>6&&a%r===4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),c[a]=s=(c[a-r]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],o<4||a<=4?d[o]=u:d[o]=g[h[u>>>24]]^m[h[u>>>16&255]]^v[h[u>>>8&255]]^y[h[255&u]],d[o]=d[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,r){for(var a,o,s,u,l,c,d,h,f,p,g,m,v,y,_=this.keySize+6,E=this.invKeySchedule,b=this.invSBox,A=this.invSubMix,T=A[0],S=A[1],k=A[2],w=A[3],C=this.uint8ArrayToUint32Array_(n),L=C[0],D=C[1],I=C[2],R=C[3],P=new Int32Array(t),O=new Int32Array(P.length),x=this.networkToHostOrderSwap;e<P.length;){for(f=x(P[e]),p=x(P[e+1]),g=x(P[e+2]),m=x(P[e+3]),l=f^E[0],c=m^E[1],d=g^E[2],h=p^E[3],v=4,y=1;y<_;y++)a=T[l>>>24]^S[c>>16&255]^k[d>>8&255]^w[255&h]^E[v],o=T[c>>>24]^S[d>>16&255]^k[h>>8&255]^w[255&l]^E[v+1],s=T[d>>>24]^S[h>>16&255]^k[l>>8&255]^w[255&c]^E[v+2],u=T[h>>>24]^S[l>>16&255]^k[c>>8&255]^w[255&d]^E[v+3],l=a,c=o,d=s,h=u,v+=4;a=b[l>>>24]<<24^b[c>>16&255]<<16^b[d>>8&255]<<8^b[255&h]^E[v],o=b[c>>>24]<<24^b[d>>16&255]<<16^b[h>>8&255]<<8^b[255&l]^E[v+1],s=b[d>>>24]<<24^b[h>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^E[v+2],u=b[h>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&d]^E[v+3],v+=3,O[e]=x(a^L),O[e+1]=x(u^D),O[e+2]=x(s^I),O[e+3]=x(o^R),L=f,D=p,I=g,R=m,e+=4}return r?i(O.buffer):O.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),u=s,l=n("./src/errors.ts"),c=n("./src/utils/logger.js"),d=n("./src/events.js"),h=n("./src/utils/get-self-scope.js"),f=Object(h.getSelfScope)(),p=function(){function t(t,e,n){var i=void 0===n?{}:n,r=i.removePKCS7Padding,a=void 0===r||r;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=a,a)try{var o=f.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(c.logger.log("JS AES decrypt"),this.logEnabled=!1);var s=this.decryptor;s||(this.decryptor=s=new u),s.expandKey(e),i(s.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(c.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new o(l,e)),this.fastAesKey.expandKey().then(function(o){var s=new r(l,n);s.decrypt(t,o).catch(function(r){a.onWebCryptoError(r,t,e,n,i)}).then(function(t){i(t)})}).catch(function(r){a.onWebCryptoError(r,t,e,n,i)})}},e.onWebCryptoError=function(t,e,n,i,r){this.config.enableSoftwareAES?(c.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,i,r)):(c.logger.error("decrypting error : "+t.message),this.observer.trigger(d.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=p},"./src/demux/demuxer-inline.js":/*!**************************************************!*\
	  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
	  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
function(t,e,n){"use strict";function i(t,e,n,i){var r,a,o,s,u,l=navigator.userAgent.toLowerCase(),c=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=((192&e[n+2])>>>6)+1,a=(60&e[n+2])>>>2,a>d.length-1?void t.trigger(y.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(s=(1&e[n+2])<<2,s|=(192&e[n+3])>>>6,A.logger.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+a+"["+d[a]+"Hz],channelConfig:"+s),/firefox/i.test(l)?a>=6?(r=5,u=new Array(4),o=a-3):(r=2,u=new Array(2),o=a):l.indexOf("android")!==-1?(r=2,u=new Array(2),o=a):(r=5,u=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&a>=6?o=a-3:((i&&i.indexOf("mp4a.40.2")!==-1&&(a>=6&&1===s||/vivaldi/i.test(l))||!i&&1===s)&&(r=2,u=new Array(2)),o=a)),u[0]=r<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=s<<3,5===r&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:d[a],channelCount:s,codec:"mp4a.40."+r,manifestCodec:c})}function r(t,e){return 255===t[e]&&240===(246&t[e+1])}function a(t,e){return 1&t[e+1]?7:9}function o(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&r(t,e))}function u(t,e){if(s(t,e)){var n=a(t,e);if(e+n>=t.length)return!1;var i=o(t,e);if(i<=n)return!1;var u=e+i;if(u===t.length||u+1<t.length&&r(t,u))return!0}return!1}function l(t,e,n,r,a){if(!t.samplerate){var o=i(e,n,r,a);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,A.logger.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function c(t){return 9216e4/t}function d(t,e,n,i,r){var s,u,l,c=t.length;if(s=a(t,e),u=o(t,e),u-=s,u>0&&e+s+u<=c)return l=n+i*r,{headerLength:s,frameLength:u,stamp:l}}function h(t,e,n,i,r){var a=c(t.samplerate),o=d(e,n,i,r,a);if(o){var s=o.stamp,u=o.headerLength,l=o.frameLength,h={unit:e.subarray(n+u,n+u+l),pts:s,dts:s};return t.samples.push(h),{sample:h,length:l+u}}}function f(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=t*e*n;return i?Math.round(r):r}function p(t,e){return void 0===e&&(e=!1),f(t,1e3,1/K,e)}function g(t,e){return void 0===e&&(e=1),f(t,K,1/e)}function m(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}n.r(e);var v,y=n("./src/events.js"),_=n("./src/errors.ts"),E=n("./src/crypt/decrypter.js"),b=n("./src/polyfills/number.js"),A=n("./src/utils/logger.js"),T=n("./src/utils/get-self-scope.js"),S=n("./src/demux/id3.js"),k=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=S.default.getID3Data(t,0)||[],n=e.length,i=t.length;n<i;n++)if(u(t,n))return A.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,i){for(var r=this._audioTrack,a=S.default.getID3Data(t,0)||[],o=S.default.getTimeStamp(a),u=Object(b.isFiniteNumber)(o)?90*o:9e4*e,c=0,d=u,f=t.length,p=a.length,g=[{pts:d,dts:d,data:a}];p<f-1;)if(s(t,p)&&p+5<f){l(r,this.observer,t,p,r.manifestCodec);var m=h(r,t,p,u,c);if(!m){A.logger.log("Unable to parse AAC frame");break}p+=m.length,d=m.sample.pts,c++}else S.default.isHeader(t,p)?(a=S.default.getID3Data(t,p),g.push({pts:d,dts:d,data:a}),p+=a.length):p++;this.remuxer.remux(r,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},e,n,i)},e.destroy=function(){},t}(),w=k,C=n("./src/demux/mp4demuxer.js"),L={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,i,r){if(!(n+24>e.length)){var a=this.parseHeader(e,n);if(a&&n+a.frameLength<=e.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=i+r*o,u={unit:e.subarray(n,n+a.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(u),{sample:u,length:a.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,u=1e3*L.BitratesMap[14*s+r-1],l=3===n?0:2===n?1:2,c=L.SamplingRateMap[3*l+a],d=t[e+3]>>6===3?1:2,h=L.SamplesCoefficients[n][i],f=L.BytesInSlot[i],p=8*h*f,g=parseInt(h*u/c+o,10)*f;return{sampleRate:c,channelCount:d,frameLength:g,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224===(224&t[e+1])&&0!==(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=4,i=this.parseHeader(t,e),r=n;i&&i.frameLength&&(r=i.frameLength);var a=e+r;if(a===t.length||a+1<t.length&&this.isHeaderPattern(t,a))return!0}return!1}},D=L,I=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&A.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n,i=8,r=8;for(e=0;e<t;e++)0!==r&&(n=this.readEG(),r=(i+n+256)%256),i=0===r?i:r},e.readSPS=function(){var t,e,n,i,r,a,o,s,u,l=0,c=0,d=0,h=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),g=this.readUEG.bind(this),m=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),_=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);if(f(),t=f(),e=p(5),v(3),n=f(),_(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=g();if(3===b&&v(1),_(),_(),v(1),m())for(s=3!==b?8:12,u=0;u<s;u++)m()&&E(u<6?16:64)}_();var A=g();if(0===A)g();else if(1===A)for(v(1),y(),y(),i=g(),u=0;u<i;u++)y();_(),v(1),r=g(),a=g(),o=p(1),0===o&&v(1),v(1),m()&&(l=g(),c=g(),d=g(),h=g());var T=[1,1];if(m()&&m()){var S=f();switch(S){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(r+1)-2*l-2*c),height:(2-o)*(a+1)*16-(o?2:4)*(d+h),pixelRatio:T}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),R=I,P=function(){function t(t,e,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new E.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,i){var r=t[e].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(t,e+1,n)})},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,i),!i)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),i=0,r=32;r<=t.length-16;r+=160,i+=16)n.set(t.subarray(r,r+16),i);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(e.subarray(n,n+16),i);return t},e.decryptAvcSample=function(t,e,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,function(s){r.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(t,e,n+1,i)})},e.decryptAvcSamples=function(t,e,n,i){for(;;e++,n=0){if(e>=t.length)return void i();for(var r=t[e].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,i,a,o),!o)return}}}},t}(),O=P,x={video:1,audio:2,id3:3,text:4},N=function(){function t(t,e,n,i){this.observer=t,this.config=n,this.typeSupported=i,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new O(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0)&&(n&&A.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:x[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},e.resetTimeStamp=function(){},e.append=function(e,n,i,r){var a,o,s,u,l,c,d=e.length,h=!1;this.pmtUnknownTypes={},this.contiguous=i;var f=this.pmtParsed,p=this._avcTrack,g=this._audioTrack,m=this._id3Track,v=p.pid,E=g.pid,b=m.pid,T=this._pmtId,S=p.pesData,k=g.pesData,w=m.pesData,C=this._parsePAT,L=this._parsePMT.bind(this),D=this._parsePES,I=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),P=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),x=t._syncOffset(e);for(d-=(d+x)%188,a=x;a<d;a+=188)if(71===e[a]){if(o=!!(64&e[a+1]),s=((31&e[a+1])<<8)+e[a+2],u=(48&e[a+3])>>4,u>1){if(l=a+5+e[a+4],l===a+188)continue}else l=a+4;switch(s){case v:o&&(S&&(c=D(S))&&I(c,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(l,a+188)),S.size+=a+188-l);break;case E:o&&(k&&(c=D(k))&&(g.isAAC?R(c):P(c)),k={data:[],size:0}),k&&(k.data.push(e.subarray(l,a+188)),k.size+=a+188-l);break;case b:o&&(w&&(c=D(w))&&O(c),w={data:[],size:0}),w&&(w.data.push(e.subarray(l,a+188)),w.size+=a+188-l);break;case 0:o&&(l+=e[l]+1),T=this._pmtId=C(e,l);break;case T:o&&(l+=e[l]+1);var N=L(e,l,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);v=N.avc,v>0&&(p.pid=v),E=N.audio,E>0&&(g.pid=E,g.isAAC=N.isAAC),b=N.id3,b>0&&(m.pid=b),h&&!f&&(A.logger.log("reparse from beginning"),h=!1,a=x-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(y.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(c=D(S))?(I(c,!0),p.pesData=null):p.pesData=S,k&&(c=D(k))?(g.isAAC?R(c):P(c),g.pesData=null):(k&&k.size&&A.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=k),w&&(c=D(w))?(O(c),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(g,p,m,this._txtTrack,n,i,r):this.decryptAndRemux(g,p,m,this._txtTrack,n,i,r)},e.decryptAndRemux=function(t,e,n,i,r,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,n,i,r,a,o)})}else this.decryptAndRemuxAvc(t,e,n,i,r,a,o)},e.decryptAndRemuxAvc=function(t,e,n,i,r,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,n,i,r,a,o)})}else this.remuxer.remux(t,e,n,i,r,a,o)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,n){var i=this.pmtUnknownTypes[t]||0;return 0===i&&(this.pmtUnknownTypes[t]=0,e.call(A.logger,n)),this.pmtUnknownTypes[t]++,i},e._parsePMT=function(t,e,n,i){var r,a,o,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&t[e+1])<<8|t[e+2],a=e+3+r-4,o=(15&t[e+10])<<8|t[e+11],e+=12+o;e<a;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){this._trackUnknownPmt(t[e],A.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:u.audio===-1&&(u.audio=s);break;case 21:u.id3===-1&&(u.id3=s);break;case 219:if(!i){this._trackUnknownPmt(t[e],A.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:u.avc===-1&&(u.avc=s);break;case 3:case 4:n?u.audio===-1&&(u.audio=s,u.isAAC=!1):this._trackUnknownPmt(t[e],A.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],A.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],A.logger.log,"Unknown stream type:"+t[e])}e+=((15&t[e+3])<<8|t[e+4])+5}return u},e._parsePES=function(t){var e,n,i,r,a,o,s,u,l,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(e=d[0],i=(e[0]<<16)+(e[1]<<8)+e[2],1===i){if(r=(e[4]<<8)+e[5],r&&r>t.size-6)return null;if(n=e[7],192&n&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&n?(u=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,s-u>54e5&&(A.logger.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),a=e[8],l=a+9,t.size<=l)return null;t.size-=l,o=new Uint8Array(t.size);for(var f=0,p=d.length;f<p;f++){e=d[f];var g=e.byteLength;if(l){if(l>g){l-=g;continue}e=e.subarray(l),g-=l,l=0}o.set(e,c),c+=g}return r&&(r-=a+3),{data:o,pts:s,dts:u,len:r}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,i=n.length;if(isNaN(t.pts)){if(!i)return void e.dropped++;var r=n[i-1];t.pts=r.pts,t.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||e.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):e.dropped++}t.debug.length&&A.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),u=!1,l=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),h=function(t,e,n,i){return{key:t,pts:e,dts:n,units:[],debug:i}};t.data=null,l&&s.length&&!o.audFound&&(d(l,o),l=this.avcSample=h(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:i=!0,l||(l=a.avcSample=h(!0,t.pts,t.dts,"")),u&&(l.debug+="NDR "),l.frame=!0;var s=e.data;if(c&&s.length>4){var f=new R(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=h(!0,t.pts,t.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:i=!0,u&&l&&(l.debug+="SEI "),n=new R(a.discardEPB(e.data)),n.readUByte();for(var p=0,g=0,m=!1,v=0;!m&&n.bytesAvailable>1;){p=0;do v=n.readUByte(),p+=v;while(255===v);g=0;do v=n.readUByte(),g+=v;while(255===v);if(4===p&&0!==n.bytesAvailable){m=!0;var y=n.readUByte();if(181===y){var _=n.readUShort();if(49===_){var E=n.readUInt();if(1195456820===E){var b=n.readUByte();if(3===b){var A=n.readUByte(),T=n.readUByte(),k=31&A,w=[A,T];for(r=0;r<k;r++)w.push(n.readUByte()),w.push(n.readUByte()),w.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:w})}}}}}else if(5===p&&0!==n.bytesAvailable){if(m=!0,g>16){var C=[];for(r=0;r<16;r++)C.push(n.readUByte().toString(16)),3!==r&&5!==r&&7!==r&&9!==r||C.push("-");var L=g-16,D=new Uint8Array(L);for(r=0;r<L;r++)D[r]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:t.pts,payloadType:p,uuid:C.join(""),userDataBytes:D,userData:Object(S.utf8ArrayToStr)(D.buffer)})}}else if(g<n.bytesAvailable)for(r=0;r<g;r++)n.readUByte()}break;case 7:if(i=!0,c=!0,u&&l&&(l.debug+="SPS "),!o.sps){n=new R(e.data);var I=n.readSPS();o.width=I.width,o.height=I.height,o.pixelRatio=I.pixelRatio,o.sps=[e.data],o.duration=a._duration;var P=e.data.subarray(1,4),O="avc1.";for(r=0;r<3;r++){var x=P[r].toString(16);x.length<2&&(x="0"+x),O+=x}o.codec=O}break;case 8:i=!0,u&&l&&(l.debug+="PPS "),o.pps||(o.pps=[e.data]);break;case 9:i=!1,o.audFound=!0,l&&d(l,o),l=a.avcSample=h(!1,t.pts,t.dts,u?"AUD ":"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}if(l&&i){var N=l.units;N.push(e)}}),e&&l&&(d(l,o),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack,i=n.samples;e=i[i.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e._parseAVCNALu=function(t){var e,n,i,r,a,o=0,s=t.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],h=-1;for(l===-1&&(h=0,a=31&t[0],l=0,o=1);o<s;)if(e=t[o++],l)if(1!==l)if(e)if(1===e){if(h>=0)i={data:t.subarray(h,o-l-1),type:a},d.push(i);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),n=o-l-1,n>0)){var p=new Uint8Array(f.data.byteLength+n);p.set(f.data,0),p.set(t.subarray(0,n),f.data.byteLength),f.data=p}}o<s?(r=31&t[o],h=o,a=r,l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(h>=0&&l>=0&&(i={data:t.subarray(h,s),type:a,state:l},d.push(i)),0===d.length){var g=this._getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+t.byteLength);m.set(g.data,0),m.set(t,g.data.byteLength),g.data=m}}return u.naluState=l,d},e.discardEPB=function(t){for(var e,n,i=t.byteLength,r=[],a=1;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=t[o];return n},e._parseAACPES=function(t){var e,n,i,r,a,o=this._audioTrack,u=t.data,d=t.pts,f=0,p=this.aacOverFlow,g=this.aacLastPTS;if(p){var m=new Uint8Array(p.byteLength+u.byteLength);m.set(p,0),m.set(u,p.byteLength),u=m}for(i=f,a=u.length;i<a-1&&!s(u,i);i++);if(i){var v,E;if(i<a-1?(v="AAC PES did not start with ADTS header,offset:"+i,E=!1):(v="no ADTS header found in AAC PES",E=!0),A.logger.warn("parsing error:"+v),this.observer.trigger(y.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:E,reason:v}),E)return}if(l(o,this.observer,u,i,this.audioCodec),n=0,e=c(o.samplerate),p&&g){var b=g+e;Math.abs(b-d)>1&&(A.logger.log("AAC: align PTS for overlapping frames by "+Math.round((b-d)/90)),d=b)}for(;i<a;){if(s(u,i)){if(i+5<a){var T=h(o,u,i,d,n);if(T){i+=T.length,r=T.sample.pts,n++;continue}}break}i++}p=i<a?u.subarray(i,a):null,this.aacOverFlow=p,this.aacLastPTS=r},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,i=0,r=0,a=t.pts;r<n;)if(D.isHeader(e,r)){var o=D.appendFrame(this._audioTrack,e,r,a,i);if(!o)break;r+=o.length,i++}else r++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),M=N,F=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,i=S.default.getID3Data(t,0);if(i&&void 0!==S.default.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(D.probe(t,e))return A.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,i){for(var r=S.default.getID3Data(t,0)||[],a=S.default.getTimeStamp(r),o=void 0!==a?90*a:9e4*e,s=r.length,u=t.length,l=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:r}];s<u;)if(D.isHeader(t,s)){var f=D.appendFrame(d,t,s,o,l);if(!f)break;s+=f.length,c=f.sample.pts,l++}else S.default.isHeader(t,s)?(r=S.default.getID3Data(t,s),h.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,i)},e.destroy=function(){},t}(),U=F,B=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),j=B,G=Math.pow(2,32)-1,H=function(){function t(){}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for(e=new Uint8Array(i),e[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),r=0,i=8;r<a;r++)e.set(n[r],i),i+=n[r].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(G+1)),r=Math.floor(n%(G+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,n))},t.moov=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(G+1)),r=Math.floor(n%(G+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,i,r,a=[],o=[];for(n=0;n<e.sps.length;n++)i=e.sps[n],r=i.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<e.pps.length;n++)i=e.pps[n],r=i.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,r=e.width,a=e.height,o=Math.floor(i/(G+1)),s=Math.floor(i%(G+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),r=e.id,a=Math.floor(n/(G+1)),o=Math.floor(n%(G+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var i,r,a,o,s,u,l=e.samples||[],c=l.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)r=l[i],a=r.duration,o=r.size,s=r.flags,u=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*i);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var n,i=t.moov(e);return n=new Uint8Array(t.FTYP.byteLength+i.byteLength),n.set(t.FTYP),n.set(i,t.FTYP.byteLength),n},t}(),V=H,K=9e4,W=g(10),q=g(.2),Y=null,z=function(){function t(t,e,n,i){if(this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===Y){var r=navigator.userAgent.match(/Chrome\/(\d+)/i);Y=r?parseInt(r[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce(function(t,n){var i=n.pts-t;return i<-4294967296?(e=!0,t):i>0?t:n.pts},t[0].pts);return e&&A.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,i,r,a,o){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var s=t.samples.length,u=e.samples.length,l=r,c=r;if(s&&u){var d=this.getVideoStartPts(e.samples),h=t.samples[0].pts-d,f=h/e.inputTimeScale;l+=Math.max(0,f),c+=Math.max(0,-f)}if(s){t.timescale||(A.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var p=this.remuxAudio(t,l,a,o);if(u){var g;p&&(g=p.endPTS-p.startPTS),e.timescale||(A.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,c,a,g)}}else if(u){var m=this.remuxVideo(e,c,a,0,o);m&&t.codec&&this.remuxEmptyAudio(t,l,a,m)}}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(y.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var i,r,a=this.observer,o=t.samples,s=e.samples,u=this.typeSupported,l="audio/mp4",c={},d={tracks:c},h=void 0===this._initPTS;if(h&&(i=r=1/0),t.config&&o.length&&(t.timescale=t.samplerate,A.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(l="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),c.audio={container:l,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:V.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(i=r=o[0].pts-Math.round(t.inputTimeScale*n))),e.sps&&e.pps&&s.length){var f=e.inputTimeScale;if(e.timescale=f,c.video={container:"video/mp4",codec:e.codec,initSegment:V.initSegment([e]),metadata:{width:e.width,height:e.height}},h){var p=this.getVideoStartPts(s),g=Math.round(f*n);r=Math.min(r,s[0].dts-g),i=Math.min(i,p-g),this.observer.trigger(y.default.INIT_PTS_FOUND,{initPTS:i})}}else h&&c.audio&&this.observer.trigger(y.default.INIT_PTS_FOUND,{initPTS:i});Object.keys(c).length?(a.trigger(y.default.FRAG_PARSING_INIT_SEGMENT,d),
this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=r)):a.trigger(y.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,i){var r,a,o,s,u,l=t.timescale,c=t.samples,d=[],h=c.length,f=this._initPTS,g=8,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,b=0,T=!1,S=this.nextAvcDts;if(0!==h){if(!n){var k=e*l,w=c[0].pts-m(c[0].dts,c[0].pts);S=k-w}for(var C=0;C<h;C++){var L=c[C];L.pts=m(L.pts-f,S),L.dts=m(L.dts-f,S),L.dts>L.pts&&(b=Math.max(Math.min(b,L.pts-L.dts),-1*q)),L.dts<c[C>0?C-1:C].dts&&(T=!0)}T&&c.sort(function(t,e){var n=t.dts-e.dts,i=t.pts-e.pts;return n||i||t.id-e.id}),s=c[0].dts,u=c[h-1].dts;var D=Math.round((u-s)/(h-1));if(b<0){if(b<D*-2){A.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+p(-D,!0)+" ms");for(var I=b,R=0;R<h;R++)c[R].dts=I=Math.max(I,c[R].pts-D),c[R].pts=Math.max(I,c[R].pts)}else{A.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+p(b,!0)+" ms to overcome this issue");for(var P=0;P<h;P++)c[P].dts=c[P].dts+b}s=c[0].dts,u=c[h-1].dts}if(n){var O=s-S,x=O>D,N=O<-1;if(x||N){x?A.logger.warn("AVC: "+p(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):A.logger.warn("AVC: "+p(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),s=S;var M=c[0].pts-O;c[0].dts=s,c[0].pts=M,A.logger.log("Video: First PTS/DTS adjusted: "+p(M,!0)+"/"+p(s,!0)+", delta: "+p(O,!0)+" ms")}}Y&&Y<75&&(s=Math.max(0,s));for(var F=0,U=0,B=0;B<h;B++){for(var j=c[B],G=j.units,H=G.length,K=0,W=0;W<H;W++)K+=G[W].data.length;U+=K,F+=H,j.length=K,j.dts=Math.max(j.dts,s),j.pts=Math.max(j.pts,j.dts,0),v=Math.min(j.pts,v),E=Math.max(j.pts,E)}u=c[h-1].dts;var z=U+4*F+8;try{a=new Uint8Array(z)}catch(t){return void this.observer.trigger(y.default.ERROR,{type:_.ErrorTypes.MUX_ERROR,details:_.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var X=new DataView(a.buffer);X.setUint32(0,z),a.set(V.types.mdat,4);for(var Q=0;Q<h;Q++){for(var $=c[Q],J=$.units,Z=0,tt=void 0,et=0,nt=J.length;et<nt;et++){var it=J[et],rt=it.data,at=it.data.byteLength;X.setUint32(g,at),g+=4,a.set(rt,g),g+=at,Z+=4+at}if(Q<h-1)r=c[Q+1].dts-$.dts;else{var ot=this.config,st=$.dts-c[Q>0?Q-1:Q].dts;if(ot.stretchShortVideoTrack){var ut=ot.maxBufferHole,lt=Math.floor(ut*l),ct=(i?v+i*l:this.nextAudioPts)-$.pts;ct>lt?(r=ct-st,r<0&&(r=st),A.logger.log("It is approximately "+p(ct,!1)+" ms to the next segment; using duration "+p(r,!1)+" ms for the last video frame.")):r=st}else r=st}tt=Math.round($.pts-$.dts),d.push({size:Z,duration:r,cts:tt,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:$.key?2:1,isNonSync:$.key?0:1}})}this.nextAvcDts=u+r;var dt=t.dropped;if(t.nbNalu=0,t.dropped=0,d.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ht=d[0].flags;ht.dependsOn=2,ht.isNonSync=0}t.samples=d,o=V.moof(t.sequenceNumber++,s,t),t.samples=[];var ft={data1:o,data2:a,startPTS:v/l,endPTS:(E+r)/l,startDTS:s/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:dt};return this.observer.trigger(y.default.FRAG_PARSING_DATA,ft),ft}},e.remuxAudio=function(t,e,n,i){var r,a,o,s,u,l,c=t.inputTimeScale,d=t.timescale,h=c/d,f=t.isAAC?1024:1152,g=f*h,v=this._initPTS,E=!t.isAAC&&this.typeSupported.mpeg,b=E?0:8,T=t.samples,S=[],k=this.nextAudioPts;if(n|=T.length&&k&&(i&&Math.abs(e-k/c)<.1||Math.abs(T[0].pts-k-v)<20*g),T.forEach(function(t){t.pts=t.dts=m(t.pts-v,e*c)}),T=T.filter(function(t){return t.pts>=0}),0!==T.length){if(n||(k=i?Math.max(0,e*c):T[0].pts),t.isAAC)for(var w=this.config.maxAudioFramesDrift,C=0,L=k;C<T.length;){var D=T[C],I=D.pts,R=I-L;if(R<=-w*g)n||C>0?(A.logger.warn("Dropping 1 audio frame @ "+p(L,!0)/1e3+"s due to "+p(R,!0)+" ms overlap."),T.splice(C,1)):(A.logger.warn("Audio frame @ "+p(I,!0)/1e3+"s overlaps nextAudioPts by "+p(R,!0)+" ms."),L=I+g,C++);else if(R>=w*g&&R<W&&L){var P=Math.round(R/g);A.logger.warn("Injecting "+P+" audio frames @ "+p(L,!0)/1e3+"s due to "+p(R,!0)+" ms gap.");for(var O=0;O<P;O++){var x=Math.max(L,0);a=j.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=D.unit.subarray()),T.splice(C,0,{unit:a,pts:x,dts:x}),L+=g,C++}D.pts=D.dts=L,L+=g,C++}else Math.abs(R)>.1*g,D.pts=D.dts=L,L+=g,C++}for(var N=T.length,M=0;N--;)M+=T[N].unit.byteLength;for(var F=0,U=T.length;F<U;F++){var B=T[F],G=B.unit,H=B.pts;if(void 0!==l&&r)r.duration=Math.round((H-l)/h);else{var K=H-k,q=0;if(n&&t.isAAC&&K){if(K>0&&K<W)q=Math.round((H-k)/g),A.logger.log(p(K,!0)+" ms hole between AAC samples detected,filling it"),q>0&&(a=j.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(a=G.subarray()),M+=q*a.length);else if(K<-12){A.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+p(k,!0)+" ms / "+p(H,!0)+" ms / "+p(-K,!0)+" ms"),M-=G.byteLength;continue}H=k}if(u=H,!(M>0))return;M+=b;try{o=new Uint8Array(M)}catch(t){return void this.observer.trigger(y.default.ERROR,{type:_.ErrorTypes.MUX_ERROR,details:_.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating audio mdat "+M})}if(!E){var Y=new DataView(o.buffer);Y.setUint32(0,M),o.set(V.types.mdat,4)}for(var z=0;z<q;z++)a=j.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=G.subarray()),o.set(a,b),b+=a.byteLength,r={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(r)}o.set(G,b);var X=G.byteLength;b+=X,r={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(r),l=H}var Q=0;if(N=S.length,N>=2&&(Q=S[N-2].duration,r.duration=Q),N){this.nextAudioPts=k=l+h*Q,t.samples=S,s=E?new Uint8Array:V.moof(t.sequenceNumber++,u/h,t),t.samples=[];var $=u/c,J=k/c,Z={data1:s,data2:o,startPTS:$,endPTS:J,startDTS:$,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(y.default.FRAG_PARSING_DATA,Z),Z}return null}},e.remuxEmptyAudio=function(t,e,n,i){var r=t.inputTimeScale,a=t.samplerate?t.samplerate:r,o=r/a,s=this.nextAudioPts,u=(void 0!==s?s:i.startDTS*r)+this._initDTS,l=i.endDTS*r+this._initDTS,c=1024,d=o*c,h=Math.ceil((l-u)/d),f=j.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(A.logger.warn("remux empty Audio"),!f)return void A.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var p=[],g=0;g<h;g++){var m=u+g*d;p.push({unit:f,pts:m,dts:m})}t.samples=p,this.remuxAudio(t,e,n)},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var i=t.inputTimeScale,r=this._initPTS,a=this._initDTS,o=0;o<n;o++){var s=t.samples[o];s.pts=m(s.pts-r,e*i)/i,s.dts=m(s.dts-a,e*i)/i}this.observer.trigger(y.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t,e){var n=t.samples.length,i=t.inputTimeScale,r=this._initPTS;if(n){for(var a=0;a<n;a++){var o=t.samples[a];o.pts=m(o.pts-r,e*i)/i}t.samples.sort(function(t,e){return t.pts-e.pts}),this.observer.trigger(y.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),X=z,Q=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,i,r,a,o,s){var u=this.observer,l="";t&&(l+="audio"),e&&(l+="video"),u.trigger(y.default.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:l,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(y.default.FRAG_PARSED)},t}(),$=Q,J=Object(T.getSelfScope)();try{v=J.performance.now.bind(J.performance)}catch(t){A.logger.debug("Unable to use Performance API on this environment"),v=J.Date.now}var Z=function(){function t(t,e,n,i){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=i}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,i,r,a,o,s,u,l,c,d){var h=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var f=this.decrypter;null==f&&(f=this.decrypter=new E.default(this.observer,this.config));var p=v();f.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var f=v();h.observer.trigger(y.default.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:f}}),h.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,a,o,s,u,l,c,d)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,a,o,s,u,l,c,d)},e.pushDecrypted=function(t,e,n,i,r,a,o,s,u,l,c,d){var h=this.demuxer,f=this.remuxer;if(!h||o||s){for(var p,g=this.observer,m=this.typeSupported,v=this.config,E=[{demux:M,remux:X},{demux:C.default,remux:$},{demux:w,remux:X},{demux:U,remux:X}],b=0,A=E.length;b<A&&(p=E[b],!p.demux.probe(t));b++);if(!p)return void g.trigger(y.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});f&&f instanceof p.remux||(f=new p.remux(g,v,m,this.vendor)),h&&h instanceof p.demux||(h=new p.demux(g,f,v,m),this.probe=p.demux.probe),this.demuxer=h,this.remuxer=f}(o||s)&&(h.resetInitSegment(n,i,r,l),f.resetInitSegment()),o&&(h.resetTimeStamp(d),f.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,a,u,c)},t}();e.default=Z},"./src/demux/demuxer-worker.js":/*!*************************************!*\
	  !*** ./src/demux/demuxer-worker.js ***!
	  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */
function(t,e,n){"use strict";n.r(e);var i=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),r=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger */"./src/utils/logger.js"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=(n.n(o),function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(i))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new i.default(e,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),e.on(r.default.FRAG_DECRYPTED,n),e.on(r.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(r.default.FRAG_PARSED,n),e.on(r.default.ERROR,n),e.on(r.default.FRAG_PARSING_METADATA,n),e.on(r.default.FRAG_PARSING_USERDATA,n),e.on(r.default.INIT_PTS_FOUND,n),e.on(r.default.FRAG_PARSING_DATA,function(e,n){var i=[],r={event:e,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),t.postMessage(r,i)})});e.default=s},"./src/demux/id3.js":/*!**************************!*\
	  !*** ./src/demux/id3.js ***!
	  \**************************/
/*! exports provided: default, utf8ArrayToStr */
function(t,e,n){"use strict";function i(){var t=Object(a.getSelfScope)();return r||"undefined"==typeof t.TextDecoder||(r=new t.TextDecoder("utf-8")),r}n.r(e),n.d(e,"utf8ArrayToStr",function(){return s});var r,a=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),o=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var i=n,r=0;t.isHeader(e,n);){r+=10;var a=t._readSize(e,n+6);r+=a,t.isFooter(e,n+10)&&(r+=10),n+=r}if(r>0)return e.subarray(i,i+r)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),i=0;i<n.length;i++){var r=n[i];if(t.isTimeStampFrame(r))return t._readTimeStamp(r)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4),r=10;return{type:n,size:i,data:e.subarray(r,r+i)}},t.getID3Frames=function(e){for(var n=0,i=[];t.isHeader(e,n);){var r=t._readSize(e,n+6);n+=10;for(var a=n+r;n+8<a;){var o=t._getFrameData(e.subarray(n)),s=t._decodeFrame(o);s&&i.push(s),n+=o.size+10}t.isFooter(e,n)&&(n+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,i=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,i=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=i();if(n){var r=n.decode(t);if(e){var a=r.indexOf("\0");return a!==-1?r.substring(0,a):r}return r.replace(/\0/g,"")}for(var o,s,u,l=t.length,c="",d=0;d<l;){if(o=t[d++],0===o&&e)return c;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(o);break;case 12:case 13:s=t[d++],c+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=t[d++],u=t[d++],c+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&u)<<0)}}return c},t}(),s=o._utf8ArrayToStr;e.default=o},"./src/demux/mp4demuxer.js":/*!*********************************!*\
	  !*** ./src/demux/mp4demuxer.js ***!
	  \*********************************/
/*! exports provided: default */
function(t,e,n){"use strict";n.r(e);var i=n(/*! ../utils/logger */"./src/utils/logger.js"),r=n(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,i,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?e:null})),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var i,r,a,o,s,u,l,c=[];if(e.data?(u=e.start,o=e.end,e=e.data):(u=0,o=e.byteLength),!n.length)return null;for(i=u;i<o;)r=t.readUint32(e,i),a=t.bin2str(e.subarray(i+4,i+8)),l=r>1?i+r:o,a===n[0]&&(1===n.length?c.push({data:e,start:i+8,end:l}):(s=t.findBox({data:e,start:i+8,end:l},n.slice(1)),s.length&&(c=c.concat(s)))),i=l;return c},t.parseSegmentIndex=function(e){var n,i=t.findBox(e,["moov"])[0],r=i?i.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;n=[],o=o[0];var s=o.data[0];a=0===s?8:16;var u=t.readUint32(o,a);a+=4;var l=0,c=0;a+=0===s?8:16,a+=2;var d=o.end+c,h=t.readUint16(o,a);a+=2;for(var f=0;f<h;f++){var p=a,g=t.readUint32(o,p);p+=4;var m=2147483647&g,v=(2147483648&g)>>>31;if(1===v)return void console.warn("SIDX has hierarchical references (not supported)");var y=t.readUint32(o,p);p+=4,n.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/u,start:d,end:d+m-1}}),d+=m,p+=4,a=p}return{earliestPresentationTime:l,timescale:u,version:s,referencesCount:h,references:n,moovEndOffset:r}},t.parseInitSegment=function(e){var n=[],r=t.findBox(e,["moov","trak"]);return r.forEach(function(e){var r=t.findBox(e,["tkhd"])[0];if(r){var a=r.data[r.start],o=0===a?12:20,s=t.readUint32(r,o),u=t.findBox(e,["mdia","mdhd"])[0];if(u){a=u.data[u.start],o=0===a?12:20;var l=t.readUint32(u,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d=t.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[d];if(h){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=t.bin2str(f.data.subarray(f.start+12,f.start+16));i.logger.log("MP4Demuxer:"+h+":"+p+" found")}n[s]={timescale:l,type:h},n[h]={timescale:l,id:s}}}}}}),n},t.getStartDTS=function(e,n){var i,r,a;return i=t.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map(function(n){return t.findBox(n,["tfhd"]).map(function(i){var r,a,o;return r=t.readUint32(i,4),a=e[r].timescale||9e4,o=t.findBox(n,["tfdt"]).map(function(e){var n,i;return n=e.data[e.start],i=t.readUint32(e,4),1===n&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i})[0],o/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},t.offsetStartDTS=function(e,n,i){t.findBox(n,["moof","traf"]).map(function(n){return t.findBox(n,["tfhd"]).map(function(r){var o=t.readUint32(r,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map(function(e){var n=e.data[e.start],r=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,r-i*s);else{r*=Math.pow(2,32),r+=t.readUint32(e,8),r-=i*s,r=Math.max(r,0);var o=Math.floor(r/(a+1)),u=Math.floor(r%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,u)}})})})},e.append=function(e,n,i,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=t.getStartDTS(o,e);this.initPTS=u=l-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(o,e,u),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,e)},e.destroy=function(){},t}();e.default=o},"./src/errors.ts":/*!***********************!*\
	  !*** ./src/errors.ts ***!
	  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */
function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorTypes",function(){return i}),n.d(e,"ErrorDetails",function(){return r});var i;!function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(i||(i={}));var r;!function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(r||(r={}))},"./src/events.js":/*!***********************!*\
	  !*** ./src/events.js ***!
	  \***********************/
/*! exports provided: default */
function(t,e,n){"use strict";n.r(e);var i={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};e.default=i},"./src/hls.ts":/*!*********************************!*\
	  !*** ./src/hls.ts + 50 modules ***!
	  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */
function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){var n=me[e];return!!n&&n[t.slice(0,4)]===!0}function c(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function d(t,e){for(var n=t[e],i=e-1;i>=0;i--){var r=t[i];r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}function h(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null===e||void 0===e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(Zt.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function g(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function m(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function v(){return window.MediaSource||window.WebKitMediaSource}function y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function E(t,e,n){var i=t[e],r=t[n],a=r.startPTS;if(Object(Zt.isFiniteNumber)(a))n>e?(i.duration=a-i.start,i.duration<0&&ee.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&ee.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"));else if(n>e){var o=i.cc===r.cc;r.start=i.start+(o&&i.minEndPTS?i.minEndPTS-i.start:i.duration)}else r.start=Math.max(i.start-r.duration,0)}function b(t,e,n,i,r,a){var o=n,s=i;if(Object(Zt.isFiniteNumber)(e.startPTS)){var u=Math.abs(e.startPTS-n);Object(Zt.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(u,e.deltaPTS):e.deltaPTS=u,o=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),s=Math.min(i,e.endPTS),i=Math.max(i,e.endPTS),r=Math.min(r,e.startDTS),a=Math.max(a,e.endDTS)}var l=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=o,e.endPTS=i,e.minEndPTS=s,e.startDTS=r,e.endDTS=a,e.duration=i-n;var c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var d,h,f;for(d=c-t.startSN,h=t.fragments,h[d]=e,f=d;f>0;f--)E(h,f,f-1);for(f=d;f<h.length-1;f++)E(h,f,f+1);return t.PTSKnown=!0,l}function A(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,i=0;if(S(t,e,function(t,r){i=t.cc-r.cc,Object(Zt.isFiniteNumber)(t.startPTS)&&(r.start=r.startPTS=t.startPTS,r.endPTS=t.endPTS,r.duration=t.duration,r.backtracked=t.backtracked,r.dropped=t.dropped,n=r),e.PTSKnown=!0}),e.PTSKnown){if(i){ee.logger.log("discontinuity sliding from playlist, take drift into account");for(var r=e.fragments,a=0;a<r.length;a++)r[a].cc+=i}n?b(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):k(t,e),e.PTSKnown=t.PTSKnown}}function T(t,e,n){void 0===n&&(n=0);var i=-1;S(t,e,function(t,e,n){e.start=t.start,i=n});var r=e.fragments;if(i<0)return void r.forEach(function(t){t.start+=n});for(var a=i+1;a<r.length;a++)r[a].start=r[a-1].start+r[a-1].duration}function S(t,e,n){if(t&&e)for(var i=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=i;o<=r;o++){var s=t.fragments[a+o],u=e.fragments[o];if(!s||!u)break;n(s,u,o)}}function k(t,e){var n=e.startSN-t.startSN,i=t.fragments,r=e.fragments;if(!(n<0||n>i.length))for(var a=0;a<r.length;a++)r[a].start+=i[n].start}function w(t,e,n){var i=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),r=i/2;return t&&e.endSN===t.endSN&&(i=r),n&&(i=Math.max(r,i-(window.performance.now()-n))),Math.round(i)}function C(t,e){for(var n=null,i=0;i<t.length;i+=1){var r=t[i];if(r&&r.cc===e){n=r;break}}return n}function L(t,e){return xe.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function D(t,e,n){var i=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(i=!0),i}function I(t,e){var n=t.fragments,i=e.fragments;if(!i.length||!n.length)return void ee.logger.log("No fragments to align");var r=C(n,i[0].cc);return!r||r&&!r.startPTS?void ee.logger.log("No frag in previous level to align on"):r}function R(t,e){e.fragments.forEach(function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}),e.PTSKnown=!0}function P(t,e,n){O(t,n,e),!n.PTSKnown&&e&&x(n,e.details)}function O(t,e,n){if(D(t,n,e)){var i=I(n.details,e);i&&(ee.logger.log("Adjusting PTS using last level due to CC increase within current level"),R(i.start,e))}}function x(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,i=t.fragments[0].programDateTime,r=(i-n)/1e3+e.fragments[0].start;Object(Zt.isFiniteNumber)(r)&&(ee.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),R(r,t))}}function N(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(Zt.isFiniteNumber)(e))return null;var i=t[0].programDateTime;if(e<(i||0))return null;var r=t[t.length-1].endProgramDateTime;if(e>=(r||0))return null;n=n||0;for(var a=0;a<t.length;++a){var o=t[a];if(U(e,n,o))return o}return null}function M(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;if(t?r=e[t.sn-e[0].sn+1]:0===n&&0===e[0].start&&(r=e[0]),r&&0===F(n,i,r))return r;var a=xe.search(e,F.bind(null,n,i));return a?a:r}function F(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function U(t,e,n){var i=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0)),r=n.endProgramDateTime||0;return r-i>t}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function G(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}function K(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function q(t,e,n){return e&&W(t.prototype,e),n&&W(t,n),t}function Y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function z(t,e){var n;try{n=new Event("addtrack")}catch(t){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function X(t){if(null===t||void 0===t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function Q(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var n=0,i=t.length-1;n<=i;){var r=Math.floor((i+n)/2);if(e<t[r].endTime)i=r-1;else{if(!(e>t[r].endTime))return t[r];n=r+1}}return t[n].endTime-e<e-t[i].endTime?t[n]:t[i]}function $(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function J(){var t=v();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!i}function Z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tt(t,e,n){return e&&Z(t.prototype,e),n&&Z(t,n),t}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function it(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function at(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}function ot(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function st(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lt(t,e,n){return e&&ut(t.prototype,e),n&&ut(t,n),t}function ct(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ht(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}function ft(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function pt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Fn,this.regionList=[]}function gt(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function mt(){this.values=Object.create(null)}function vt(t,e,n,i){var r=i?t.split(i):[t];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length){var s=o[0],u=o[1];e(s,u)}}}function yt(t,e,n){function i(){var e=gt(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(t,e){var i=new mt;vt(t,function(t,e){switch(t){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===e){i.set(t,n[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",Bn,"end"]);break;case"position":a=e.split(","),i.percent(t,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",Bn,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",Bn,"end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&Un.line===-1&&(r=-1),e.line=r,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",Bn);var a=i.get("position","auto");"auto"===a&&50===Un.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}function a(){t=t.replace(/^\s+/,"")}var o=t;if(a(),e.startTime=i(),a(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);t=t.substr(3),a(),e.endTime=i(),a(),r(t,e)}function _t(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function Et(t,e,n,i){for(var r,a,o,s,u,l=[],c=window.VTTCue||TextTrackCue,d=0;d<i.rows.length;d++)if(r=i.rows[d],o=!0,s=0,u="",!r.isEmpty()){for(var h=0;h<r.chars.length;h++)r.chars[h].uchar.match(/\s/)&&o?s++:(u+=r.chars[h].uchar,o=!1);r.cueStartTime=e,e===n&&(n+=1e-4),a=new c(e,n,_t(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(s/32))),l.push(a),t&&t.addCue(a)}return l}function bt(t,e,n){n.a=t,n.b=e}function At(t,e,n){return n.a===t&&n.b===e}function Tt(){return{a:null,b:null}}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function wt(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function Ct(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function Lt(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function It(t,e,n){return e&&Dt(t.prototype,e),n&&Dt(t,n),t}function Rt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Pt(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];"subtitles"===i.kind&&i.label&&e.push(t[n])}return e}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mt(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}function Ft(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach(function(e){jt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gt(){return{cueHandler:Xt,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(e){Kt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yt(t,e,n){return e&&qt(t.prototype,e),n&&qt(t,n),t}function zt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(e),n.d(e,"default",function(){return Ii});var Xt={};n.r(Xt),n.d(Xt,"newCue",function(){return Et});var Qt,$t=n("./node_modules/url-toolkit/src/url-toolkit.js"),Jt=n("./src/errors.ts"),Zt=n("./src/polyfills/number.js"),te=n("./src/events.js"),ee=n("./src/utils/logger.js"),ne={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},ie=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(ne[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(e){ee.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),re=ie;!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(Qt||(Qt={}));var ae;!function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(ae||(ae={}));var oe,se=n("./src/demux/mp4demuxer.js"),ue=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}return r(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object($t.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();!function(t){t.AUDIO="audio",t.VIDEO="video"}(oe||(oe={}));var le,ce=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(t={},t[oe.AUDIO]=!1,t[oe.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e=t.prototype;return e.setByteRange=function(t,e){var n=t.split("@",2),i=[];1===n.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},e.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.hasElementaryStream=function(t){return this._elementaryStreams[t]===!0},e.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},e.setDecryptDataFromLevelKey=function(t,e){var n=t;return(null===t||void 0===t?void 0:t.method)&&t.uri&&!t.iv&&(n=new ue(t.baseuri,t.reluri),n.method=t.method,n.iv=this.createInitializationVector(e)),n},o(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object($t.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&ee.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(Zt.isFiniteNumber)(this.programDateTime))return null;var t=Object(Zt.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),t}(),de=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return u(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(Zt.isFiniteNumber)(this.fragments[0].programDateTime))}}]),t}(),he=/^(\d+)x(\d+)$/,fe=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,pe=function(){function t(e){"string"==typeof e&&(e=t.parseAttrList(e));for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=he.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(fe.lastIndex=0;null!==(e=fe.exec(t));){var i=e[2],r='"';0===i.indexOf(r)&&i.lastIndexOf(r)===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n},t}(),ge=pe,me={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},ve=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,ye=/#EXT-X-MEDIA:(.*)/g,_e=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Ee=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,be=/\.(mp4|m4s|m4v|m4a)$/i,Ae=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return $t.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){function i(t,e){["video","audio"].forEach(function(n){var i=t.filter(function(t){return l(t,n)});if(i.length){var r=i.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[n+"Codec"]=r.length>0?r[0]:i[0],t=t.filter(function(t){return i.indexOf(t)===-1})}}),e.unknownCodecs=t}var r=[],a={},o=!1;ve.lastIndex=0;for(var s;null!=(s=ve.exec(e));)if(s[1]){var u={},c=u.attrs=new ge(s[1]);u.url=t.resolve(s[2],n);var d=c.decimalResolution("RESOLUTION");d&&(u.width=d.width,u.height=d.height),u.bitrate=c.decimalInteger("AVERAGE-BANDWIDTH")||c.decimalInteger("BANDWIDTH"),u.name=c.NAME,i([].concat((c.CODECS||"").split(/[ ,]+/)),u),u.videoCodec&&u.videoCodec.indexOf("avc1")!==-1&&(u.videoCodec=t.convertAVC1ToAVCOTI(u.videoCodec)),r.push(u)}else if(s[3]){var h=new ge(s[3]);h["DATA-ID"]&&(o=!0,a[h["DATA-ID"]]=h)}return{levels:r,sessionData:o?a:null}},t.parseMasterPlaylistMedia=function(e,n,i,r){void 0===r&&(r=[]);var a,o=[],s=0;for(ye.lastIndex=0;null!==(a=ye.exec(e));){var u=new ge(a[1]);if(u.TYPE===i){var l={attrs:u,id:s++,groupId:u["GROUP-ID"],instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE,type:i,default:"YES"===u.DEFAULT,autoselect:"YES"===u.AUTOSELECT,forced:"YES"===u.FORCED,lang:u.LANGUAGE};if(u.URI&&(l.url=t.resolve(u.URI,n)),r.length){var c=t.findGroup(r,l.groupId);l.audioCodec=c?c.codec:r[0].codec}o.push(l)}}return o},t.parseLevelPlaylist=function(t,e,n,i,r){var a,o,s,u=0,l=0,c=new de(e),f=0,p=null,g=new ce,m=null;for(_e.lastIndex=0;null!==(a=_e.exec(t));){var v=a[1];if(v){g.duration=parseFloat(v);var y=(" "+a[2]).slice(1);g.title=y||null,g.tagList.push(y?["INF",v,y]:["INF",v])}else if(a[3]){if(Object(Zt.isFiniteNumber)(g.duration)){var _=u++;g.type=i,g.start=l,s&&(g.levelkey=s),g.sn=_,g.level=n,g.cc=f,g.urlId=r,g.baseurl=e,g.relurl=(" "+a[3]).slice(1),h(g,p),c.fragments.push(g),p=g,l+=g.duration,g=new ce}}else if(a[4]){var E=(" "+a[4]).slice(1);p?g.setByteRange(E,p):g.setByteRange(E)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=c.fragments.length);else{if(a=a[0].match(Ee),!a){ee.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&"undefined"==typeof a[o];o++);var b=(" "+a[o+1]).slice(1),A=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(A?[b,A]:[b]);break;case"PLAYLIST-TYPE":c.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":u=c.startSN=parseInt(b);break;case"TARGETDURATION":c.targetduration=parseFloat(b);break;case"VERSION":c.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(b);break;case"KEY":var T=b,S=new ge(T),k=S.enumeratedString("METHOD"),w=S.URI,C=S.hexadecimalInteger("IV"),L=S.KEYFORMAT||"identity";if("com.apple.streamingkeydelivery"===L){ee.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}k&&(s=new ue(e,w),w&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(k)>=0&&(s.method=k,s.key=null,s.iv=C));break;case"START":var D=new ge(b),I=D.decimalFloatingPoint("TIME-OFFSET");Object(Zt.isFiniteNumber)(I)&&(c.startTimeOffset=I);break;case"MAP":var R=new ge(b);g.relurl=R.URI,R.BYTERANGE&&g.setByteRange(R.BYTERANGE),g.baseurl=e,g.level=n,g.type=i,g.sn="initSegment",c.initSegment=g,g=new ce,g.rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:ee.logger.warn("line parsed but not handled: "+a)}}}return g=p,g&&!g.relurl&&(c.fragments.pop(),l-=g.duration),c.totalduration=l,c.averagetargetduration=l/c.fragments.length,c.endSN=u-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=f,!c.initSegment&&c.fragments.length&&c.fragments.every(function(t){return be.test(t.relurl)})&&(ee.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new ce,g.relurl=c.fragments[0].relurl,g.baseurl=e,g.level=n,g.type=i,g.sn="initSegment",c.initSegment=g,c.needSidxRanges=!0),m&&d(c.fragments,m),c},t}(),Te=window,Se=Te.performance,ke=function(t){function e(e){var n;return n=t.call(this,e,te.default.MANIFEST_LOADING,te.default.LEVEL_LOADING,te.default.AUDIO_TRACK_LOADING,te.default.SUBTITLE_TRACK_LOADING)||this,n.loaders={},n}f(e,t),e.canHaveQualityLevels=function(t){return t!==Qt.AUDIO_TRACK&&t!==Qt.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){var e=t.type;switch(e){case Qt.AUDIO_TRACK:return ae.AUDIO;case Qt.SUBTITLE_TRACK:return ae.SUBTITLE;default:return ae.MAIN}},e.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var n=e.prototype;return n.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,i=e.loader,r=n||i,a=new r(e);return t.loader=a,this.loaders[t.type]=a,a},n.getInternalLoader=function(t){return this.loaders[t.type]},n.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},n.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},n.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.onManifestLoading=function(t){this.load({url:t.url,type:Qt.MANIFEST,level:0,id:null,responseType:"text"})},n.onLevelLoading=function(t){this.load({url:t.url,type:Qt.LEVEL,level:t.level,id:t.id,responseType:"text"})},n.onAudioTrackLoading=function(t){this.load({url:t.url,type:Qt.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},n.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:Qt.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},n.load=function(t){var e=this.hls.config;ee.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n=this.getInternalLoader(t);if(n){var i=n.context;if(i&&i.url===t.url)return ee.logger.trace("playlist request ongoing"),!1;ee.logger.warn("aborting previous loader for type: "+t.type),n.abort()}var r,a,o,s;switch(t.type){case Qt.MANIFEST:r=e.manifestLoadingMaxRetry,a=e.manifestLoadingTimeOut,o=e.manifestLoadingRetryDelay,s=e.manifestLoadingMaxRetryTimeout;break;case Qt.LEVEL:r=0,s=0,o=0,a=e.levelLoadingTimeOut;break;default:r=e.levelLoadingMaxRetry,a=e.levelLoadingTimeOut,o=e.levelLoadingRetryDelay,s=e.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(t);var u={timeout:a,maxRetry:r,retryDelay:o,maxRetryDelay:s},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return ee.logger.debug("Calling internal loader delegate for URL: "+t.url),n.load(t,u,l),!0},n.loadsuccess=function(t,e,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,i);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=t.data;return e.tload=Se.now(),0!==r.indexOf("#EXTM3U")?void this._handleManifestParsingError(t,n,"no EXTM3U delimiter",i):void(r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,n,i):this._handleMasterPlaylist(t,e,n,i))},n.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},n.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},n._handleMasterPlaylist=function(t,n,i,r){var a=this.hls,o=t.data,s=e.getResponseUrl(t,i),u=Ae.parseMasterPlaylist(o,s),l=u.levels,c=u.sessionData;if(!l.length)return void this._handleManifestParsingError(t,i,"no level found in manifest",r);var d=l.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),h=Ae.parseMasterPlaylistMedia(o,s,"AUDIO",d),f=Ae.parseMasterPlaylistMedia(o,s,"SUBTITLES"),p=Ae.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(h.length){var g=!1;h.forEach(function(t){t.url||(g=!0)}),g===!1&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(ee.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),
h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(te.default.MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:f,captions:p,url:s,stats:n,networkDetails:r,sessionData:c})},n._handleTrackOrLevelPlaylist=function(t,n,i,r){var a=this.hls,o=i.id,s=i.level,u=i.type,l=e.getResponseUrl(t,i),c=Object(Zt.isFiniteNumber)(o)?o:0,d=Object(Zt.isFiniteNumber)(s)?s:c,h=e.mapContextToLevelType(i),f=Ae.parseLevelPlaylist(t.data,l,d,h,c);if(f.tload=n.tload,!f.fragments.length)return void a.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0});if(u===Qt.MANIFEST){var p={url:l,details:f};a.trigger(te.default.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:l,stats:n,networkDetails:r,sessionData:null})}if(n.tparsed=Se.now(),f.needSidxRanges){var g=f.initSegment.url;return void this.load({url:g,isSidxRequest:!0,type:u,level:s,levelDetails:f,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}i.levelDetails=f,this._handlePlaylistLoaded(t,n,i,r)},n._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=se.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var i=n.references,r=e.levelDetails;i.forEach(function(t,e){var n=t.info;if(r){var i=r.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}}),r&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},n._handleManifestParsingError=function(t,e,n,i){this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:i})},n._handleNetworkError=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=null),ee.logger.info("A network error occured while loading a "+t.type+"-type playlist");var r,a,o=this.getInternalLoader(t);switch(t.type){case Qt.MANIFEST:r=n?Jt.ErrorDetails.MANIFEST_LOAD_TIMEOUT:Jt.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case Qt.LEVEL:r=n?Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:Jt.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case Qt.AUDIO_TRACK:r=n?Jt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}o&&(o.abort(),this.resetInternalLoader(t.type));var s={type:Jt.ErrorTypes.NETWORK_ERROR,details:r,fatal:a,url:t.url,loader:o,context:t,networkDetails:e};i&&(s.response=i),this.hls.trigger(te.default.ERROR,s)},n._handlePlaylistLoaded=function(t,n,i,r){var a=i.type,o=i.level,s=i.id,u=i.levelDetails;if(!u||!u.targetduration)return void this._handleManifestParsingError(t,i,"invalid target duration",r);var l=e.canHaveQualityLevels(i.type);if(l)this.hls.trigger(te.default.LEVEL_LOADED,{details:u,level:o||0,id:s||0,stats:n,networkDetails:r});else switch(a){case Qt.AUDIO_TRACK:this.hls.trigger(te.default.AUDIO_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:r});break;case Qt.SUBTITLE_TRACK:this.hls.trigger(te.default.SUBTITLE_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:r})}},e}(re),we=ke,Ce=function(t){function e(e){var n;return n=t.call(this,e,te.default.FRAG_LOADING)||this,n.loaders={},n}p(e,t);var n=e.prototype;return n.destroy=function(){var e=this.loaders;for(var n in e){var i=e[n];i&&i.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag,n=e.type,i=this.loaders,r=this.hls.config,a=r.fLoader,o=r.loader;e.loaded=0;var s=i[n];s&&(ee.logger.warn("abort previous fragment loader for type: "+n),s.abort()),s=i[n]=e.loader=r.fLoader?new a(r):new o(r);var u,l,c;u={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var d=e.byteRangeStartOffset,h=e.byteRangeEndOffset;Object(Zt.isFiniteNumber)(d)&&Object(Zt.isFiniteNumber)(h)&&(u.rangeStart=d,u.rangeEnd=h),l={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(u,l,c)},n.loadsuccess=function(t,e,n,i){void 0===i&&(i=null);var r=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(te.default.FRAG_LOADED,{payload:r,frag:a,stats:e,networkDetails:i})},n.loaderror=function(t,e,n){void 0===n&&(n=null);var i=e.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},n.loadtimeout=function(t,e,n){void 0===n&&(n=null);var i=e.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},n.loadprogress=function(t,e,n,i){void 0===i&&(i=null);var r=e.frag;r.loaded=t.loaded,this.hls.trigger(te.default.FRAG_LOAD_PROGRESS,{frag:r,stats:t,networkDetails:i})},e}(re),Le=Ce,De=function(t){function e(e){var n;return n=t.call(this,e,te.default.KEY_LOADING)||this,n.loaders={},n.decryptkey=null,n.decrypturl=null,n}g(e,t);var n=e.prototype;return n.destroy=function(){for(var e in this.loaders){var n=this.loaders[e];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n];if(!e.decryptdata)return void ee.logger.warn("Missing decryption data on fragment in onKeyLoading");var r=e.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(i&&(ee.logger.warn("abort previous key loader for type:"+n),i.abort()),!r)return void ee.logger.warn("key uri is falsy");e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=r,this.decryptkey=null;var o={url:r,frag:e,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(o,s,u)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(te.default.KEY_LOADED,{frag:e}))},n.loadsuccess=function(t,e,n){var i=n.frag;return i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,delete this.loaders[i.type],void this.hls.trigger(te.default.KEY_LOADED,{frag:i})):void ee.logger.error("after key load, decryptdata unset")},n.loaderror=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},n.loadtimeout=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(re),Ie=De,Re={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Pe=function(t){function e(e){var n;return n=t.call(this,e,te.default.BUFFER_APPENDED,te.default.FRAG_BUFFERED,te.default.FRAG_LOADED)||this,n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}m(e,t);var n=e.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,re.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,e){var n=this.fragments,i=Object.keys(n).filter(function(i){var r=n[i];if(r.body.type!==e)return!1;if(!r.buffered)return!1;var a=r.body;return a.startPTS<=t&&t<=a.endPTS});if(0===i.length)return null;var r=i.pop();return n[r].body},n.detectEvictedFragments=function(t,e){var n=this;Object.keys(this.fragments).forEach(function(i){var r=n.fragments[i];if(r&&r.buffered){var a=r.range[t];if(a)for(var o=a.time,s=0;s<o.length;s++){var u=o[s];if(!n.isTimeBuffered(u.startPTS,u.endPTS,e)){n.removeFragment(r.body);break}}}})},n.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),i=this.fragments[n];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(n){if(t.hasElementaryStream(n)){var r=e.timeRanges[n];i.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,r)}}))},n.getBufferedTimes=function(t,e,n){for(var i,r,a=[],o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,t>=i&&e<=r){a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<r&&e>i)a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),o=!0;else if(e<=i)break}return{time:a,partial:o}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var e,n,i,r=this,a=null,o=0;return Object.keys(this.fragments).forEach(function(s){var u=r.fragments[s];r.isPartial(u)&&(n=u.body.startPTS-r.bufferPadding,i=u.body.endPTS+r.bufferPadding,t>=n&&t<=i&&(e=Math.min(t-n,i-t),o<=e&&(a=u.body,o=e)))}),a},n.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],i=Re.NOT_LOADED;return void 0!==n&&(i=n.buffered?this.isPartial(n)===!0?Re.PARTIAL:Re.OK:Re.APPENDING),i},n.isPartial=function(t){return t.buffered===!0&&(void 0!==t.range.video&&t.range.video.partial===!0||void 0!==t.range.audio&&t.range.audio.partial===!0)},n.isTimeBuffered=function(t,e,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,t>=i&&e<=r)return!0;if(e<=i)return!1}return!1},n.onFragLoaded=function(t){var e=t.frag;Object(Zt.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)})},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},n.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},n.removeAllFragments=function(){this.fragments=Object.create(null)},e}(re),Oe={search:function(t,e){for(var n=0,i=t.length-1,r=null,a=null;n<=i;){r=(n+i)/2|0,a=t[r];var o=e(a);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}},xe=Oe,Ne=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var i,r=t.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){t.sort(function(t,e){var n=t.start-e.start;return n?n:e.end-t.end});var i=[];if(n)for(var r=0;r<t.length;r++){var a=i.length;if(a){var o=i[a-1].end;t[r].start-o<n?t[r].end>o&&(i[a-1].end=t[r].end):i.push(t[r])}else i.push(t[r])}else i=t;for(var s,u=0,l=e,c=e,d=0;d<i.length;d++){var h=i[d].start,f=i[d].end;if(e+n>=h&&e<f)l=h,c=f,u=c-e;else if(e+n<h){s=h;break}}return{len:u,start:l,end:c,nextStart:s}},t}(),Me=n("./node_modules/eventemitter3/index.js"),Fe=n("./node_modules/webworkify-webpack/index.js"),Ue=n("./src/demux/demuxer-inline.js"),Be=n("./src/utils/get-self-scope.js"),je=function(t){function e(){return t.apply(this,arguments)||this}y(e,t);var n=e.prototype;return n.trigger=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.emit.apply(this,[t,t].concat(n))},e}(Me.EventEmitter),Ge=Object(Be.getSelfScope)(),He=v()||{isTypeSupported:function(){return!1}},Ve=function(){function t(t,e){var n=this;this.hls=t,this.id=e;var i=this.observer=new je,r=t.config,a=function(e,i){i=i||{},i.frag=n.frag,i.id=n.id,t.trigger(e,i)};i.on(te.default.FRAG_DECRYPTED,a),i.on(te.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(te.default.FRAG_PARSING_DATA,a),i.on(te.default.FRAG_PARSED,a),i.on(te.default.ERROR,a),i.on(te.default.FRAG_PARSING_METADATA,a),i.on(te.default.FRAG_PARSING_USERDATA,a),i.on(te.default.INIT_PTS_FOUND,a);var o={mp4:He.isTypeSupported("video/mp4"),mpeg:He.isTypeSupported("audio/mpeg"),mp3:He.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){ee.logger.log("demuxing in webworker");var u;try{u=this.w=Fe("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(e){t.trigger(te.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:o,vendor:s,id:e,config:JSON.stringify(r)})}catch(t){ee.logger.warn("Error in worker:",t),ee.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&Ge.URL.revokeObjectURL(u.objectURL),this.demuxer=new Ue.default(i,o,r,s),this.w=void 0}}else this.demuxer=new Ue.default(i,o,r,s)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,i,r,a,o,s){var u=this.w,l=Object(Zt.isFiniteNumber)(r.startPTS)?r.startPTS:r.start,c=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),f=!(d&&r.level===d.level),p=d&&r.sn===d.sn+1,g=!f&&p;if(h&&ee.logger.log(this.id+":discontinuity detected"),f&&ee.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:n,videoCodec:i,timeOffset:l,discontinuity:h,trackSwitch:f,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,c,e,n,i,l,h,f,g,a,o,s)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":Ge.URL.revokeObjectURL(this.w.objectURL);break;case te.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}(),Ke=Ve,We={toString:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}},qe=We,Ye=250,ze=2,Xe=.1,Qe=.05,$e=function(){function t(t,e,n,i){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,n=this.media,i=this.stalled,r=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===t){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var u=Ne.bufferInfo(n,r,0),l=u.len>0,c=u.nextStart||0;if(l||c){if(a){var d=u.len>ze,h=!c||c-r>ze&&!this.fragmentTracker.getPartialFragment(r);if(d||h)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(c,u.start||0)-r;if(f>0&&f<=ze)return void this._trySkipBufferHole(null)}var p=self.performance.now();if(null===i)return void(this.stalled=p);var g=p-i;!a&&g>=Ye&&this._reportStall(u.len);var m=Ne.bufferInfo(n,r,e.maxBufferHole);this._tryFixBufferStall(m,g)}}}else if(this.moved=!0,null!==i){if(this.stallReported){var v=self.performance.now()-i;ee.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,i=this.fragmentTracker,r=this.media,a=r.currentTime,o=i.getPartialFragment(a);if(o){var s=this._trySkipBufferHole(o);if(s)return}t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(ee.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media,i=this.stallReported;i||(this.stallReported=!0,ee.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,i=this.media,r=i.currentTime,a=0,o=0;o<i.buffered.length;o++){var s=i.buffered.start(o);if(r+e.maxBufferHole>=a&&r<s){var u=Math.max(s+Qe,i.currentTime+Xe);return ee.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+u),this.moved=!0,this.stalled=null,i.currentTime=u,t&&n.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+u,frag:t}),u}a=i.buffered.end(o)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if(this.nudgeRetry=r,r<t.nudgeMaxRetry){var a=i+r*t.nudgeOffset;ee.logger.warn("Nudging 'currentTime' from "+i+" to "+a),n.currentTime=a,e.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else ee.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}(),Je=function(t){function e(e){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return n=t.call.apply(t,[this,e].concat(r))||this,n._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(B(n)),n}j(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},e}(re),Ze={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},tn=function(t){function e(){return t.apply(this,arguments)||this}G(e,t);var n=e.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ze.STOPPED},n._streamEnded=function(t,e){var n=this.fragCurrent,i=this.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var r=i.getState(n);return r===Re.PARTIAL||r===Re.OK}return!1},n.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,i=this.state,r=e?e.currentTime:null,a=Ne.bufferInfo(n||e,r,this.config.maxBufferHole);if(ee.logger.log("media seeking to "+(Object(Zt.isFiniteNumber)(r)?r.toFixed(3):r)),i===Ze.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=t.maxFragLookUpTolerance,u=o.start-s,l=o.start+o.duration+s;r<u||r>l?(o.loader&&(ee.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Ze.IDLE):ee.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===Ze.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=Ze.IDLE);e&&(this.lastCurrentTime=r),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=r),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=Ze.STOPPED,this.fragmentTracker=null},n.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},e}(Je),en=100,nn=function(t){function e(e,n){var i;return i=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHING,te.default.MANIFEST_LOADING,te.default.MANIFEST_PARSED,te.default.LEVEL_LOADED,te.default.LEVELS_UPDATED,te.default.KEY_LOADED,te.default.FRAG_LOADED,te.default.FRAG_LOAD_EMERGENCY_ABORTED,te.default.FRAG_PARSING_INIT_SEGMENT,te.default.FRAG_PARSING_DATA,te.default.FRAG_PARSED,te.default.ERROR,te.default.AUDIO_TRACK_SWITCHING,te.default.AUDIO_TRACK_SWITCHED,te.default.BUFFER_CREATED,te.default.BUFFER_APPENDED,te.default.BUFFER_FLUSHED)||this,i.fragmentTracker=n,i.config=e.config,i.audioCodecSwap=!1,i._state=Ze.STOPPED,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i.audioOnly=!1,i.bitrateTest=!1,i}K(e,t);var n=e.prototype;return n.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(en),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;i===-1&&(n.config.testBandwidth?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&t===-1&&(ee.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Ze.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=Ze.STOPPED},n.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case Ze.BUFFER_FLUSHING:this.fragLoadError=0;break;case Ze.IDLE:this._doTickIdle();break;case Ze.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=Ze.IDLE);break;case Ze.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(ee.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Ze.IDLE);break;case Ze.ERROR:case Ze.STOPPED:case Ze.FRAG_LOADING:case Ze.PARSING:case Ze.PARSED:case Ze.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){if(this.altAudio&&this.audioOnly)return void(this.demuxer.frag=null);var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,a=this.levels[r];if(a){var o,s=a.bitrate;o=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,o=Math.min(o,e.maxMaxBufferLength);var u=i<e.maxBufferHole?Math.max(ze,e.maxBufferHole):e.maxBufferHole,l=Ne.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,u),c=l.len;if(!(c>=o)){ee.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var d=a.details;if(!d||d.live&&this.levelLastLoaded!==r)return void(this.state=Ze.WAITING_LEVEL);if(this._streamEnded(l,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(te.default.BUFFER_EOS,h),void(this.state=Ze.ENDED)}this._fetchPayloadOrEos(i,l,d)}}}},n._fetchPayloadOrEos=function(t,e,n){var i=this.fragPrevious,r=(this.level,n.fragments),a=r.length;if(0!==a){var o,s=r[0].start,u=r[a-1].start+r[a-1].duration,l=e.end;if(n.initSegment&&!n.initSegment.data)o=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(a<c)return void ee.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+c);if(o=this._ensureFragmentAtLivePoint(n,l,s,u,i,r),null===o)return}else l<s&&(o=r[0]);o||(o=this._findFragment(s,i,a,r,l,u,n)),o&&(o.encrypted?this._loadKey(o,n):this._loadFragment(o,n,t,l))}},n._ensureFragmentAtLivePoint=function(t,e,n,i,r,a){var o,s=this.hls.config,u=this.media,l=1/0;if(void 0!==s.liveMaxLatencyDuration?l=s.liveMaxLatencyDuration:Object(Zt.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(l=s.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(n-s.maxFragLookUpTolerance,i-l)){var c=this.liveSyncPosition=this.computeLivePosition(n,t);e=c,u&&!u.paused&&u.readyState&&u.duration>c&&c>u.currentTime&&(ee.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),u.currentTime=c),this.nextLoadPosition=c}if(t.PTSKnown&&e>i&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&r)if(t.hasProgramDateTime)ee.logger.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),o=N(a,r.endProgramDateTime,s.maxFragLookUpTolerance);else{var d=r.sn+1;if(d>=t.startSN&&d<=t.endSN){var h=a[d-t.startSN];r.cc===h.cc&&(o=h,ee.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=xe.search(a,function(t){return r.cc-t.cc}),o&&ee.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn))}return o},n._findFragment=function(t,e,n,i,r,a,o){var s,u=this.hls.config;if(r<a){var l=r>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance;s=M(e,i,r,l)}else s=i[n-1];if(s){var c=s.sn-o.startSN,d=e&&s.level===e.level,h=i[c-1],f=i[c+1];if(e&&s.sn===e.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var p=e.deltaPTS;p&&p>u.maxBufferHole&&e.dropped&&c?(s=h,ee.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=f,this.fragmentTracker.getState(s)!==Re.OK&&ee.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(f&&f.backtracked?(ee.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(ee.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h,s.backtracked=!0):c&&(s=null)))}return s},n._loadKey=function(t,e){ee.logger.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level),this.state=Ze.KEY_LOADING,this.hls.trigger(te.default.KEY_LOADING,{frag:t})},n._loadFragment=function(t,e,n,i){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(Zt.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===Re.NOT_LOADED||r===Re.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,ee.logger.log("Loading "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(i.toFixed(3))),this.hls.trigger(te.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Ke(this.hls,"main")),this.state=Ze.FRAG_LOADING):r===Re.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},n.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ae.MAIN)},n.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},n._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&n.seeking===!1&&(e=n.currentTime,e>this.lastCurrentTime&&(this.lastCurrentTime=e),Ne.isBuffered(n,e)?t=this.getBufferedFrag(e):Ne.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(te.default.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(te.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},n.immediateLevelSwitch=function(){if(ee.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused,t||e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&Ne.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},n.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n=this.getBufferedFrag(t.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,r=this.levels[i],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(t.currentTime+e);if(o){var s=this.followingBufferedFrag(o);if(s){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null;var l=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}},n.flushMainBuffer=function(t,e){this.state=Ze.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(te.default.BUFFER_FLUSHING,n)},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new $e(n,e,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(ee.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(Zt.isFiniteNumber)(e)&&ee.logger.log("media seeked to "+e.toFixed(3)),this.tick()},n.onManifestLoading=function(){ee.logger.log("trigger BUFFER_RESET"),this.hls.trigger(te.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(t){var e,n=!1,i=!1;t.levels.forEach(function(t){e=t.audioCodec,e&&(e.indexOf("mp4a.40.2")!==-1&&(n=!0),e.indexOf("mp4a.40.5")!==-1&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&ee.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},n.onLevelLoaded=function(t){var e=t.details,n=t.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=e.totalduration,o=0;if(ee.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var s=r.details;s&&e.fragments.length>0?(A(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&Object(Zt.isFiniteNumber)(o)?ee.logger.log("live playlist sliding:"+o.toFixed(3)):(ee.logger.log("live playlist - outdated PTS, unknown sliding"),
P(this.fragPrevious,i,e))):(ee.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,P(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(te.default.LEVEL_UPDATED,{details:e,level:n}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var u=e.startTimeOffset;Object(Zt.isFiniteNumber)(u)?(u<0&&(ee.logger.log("negative start time offset "+u+", count from end of last fragment"),u=o+a+u),ee.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):e.live?(this.startPosition=this.computeLivePosition(o,e),ee.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ze.WAITING_LEVEL&&(this.state=Ze.IDLE),this.tick()},n.onKeyLoaded=function(){this.state===Ze.KEY_LOADING&&(this.state=Ze.IDLE,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,i=this.levels,r=this.media,a=t.frag;if(this.state===Ze.FRAG_LOADING&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,s=i[e.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,ee.logger.log("Loaded "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level),a.bitrateTest&&n.nextLoadLevel)this.state=Ze.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(te.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=Ze.IDLE,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=t.payload,n.trigger(te.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{ee.logger.log("Parsing "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level+", cc "+e.cc),this.state=Ze.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var l=!(r&&r.seeking)&&(u.PTSKnown||!u.live),c=u.initSegment?u.initSegment.data:[],d=this._getAudioCodec(s),h=this.demuxer=this.demuxer||new Ke(this.hls,"main");h.push(t.payload,c,d,s.videoCodec,e,u.totalduration,l)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ze.PARSING){var i,r,a=t.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(ee.logger.log("swapping playlist audio codec"),o=o.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&s.indexOf("firefox")===-1&&(o="mp4a.40.5"),s.indexOf("android")!==-1&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",ee.logger.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=t.id}r=a.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(te.default.BUFFER_CODECS,a);for(i in a){r=a[i],ee.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(te.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===Ze.PARSING){var r=this.levels[this.level],a=n;if(Object(Zt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),t.hasAudio===!0&&a.addElementaryStream(oe.AUDIO),t.hasVideo===!0&&a.addElementaryStream(oe.VIDEO),ee.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)ee.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=r.details;if(!o||a.sn!==o.startSN)return ee.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=Ze.IDLE,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();ee.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=b(r.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(te.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(n){n&&n.length&&e.state===Ze.PARSING&&(e.appended=!0,e.pendingBuffering=!0,u.trigger(te.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))}),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ze.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=Ze.PARSED,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(t){var e=this.altAudio,n=!!t.url,i=t.id;if(!n){if(this.mediaBuffer!==this.media){ee.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(ee.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Ze.IDLE}var a=this.hls;e&&a.trigger(te.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(te.default.AUDIO_TRACK_SWITCHED,{id:i})}},n.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(ee.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},n.onBufferCreated=function(t){var e,n,i=t.tracks,r=!1;for(var a in i){var o=i[a];"main"===o.id?(n=a,e=o,"video"===a&&(this.videoBuffer=i[a].buffer)):r=!0}r&&e?(ee.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==Ze.PARSING&&e!==Ze.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==Ze.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;ee.logger.log("main buffered : "+qe.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(te.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=Ze.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},n.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&Ne.isBuffered(this.media,this.media.currentTime)&&Ne.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);ee.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Ze.FRAG_LOADING_WAITING_RETRY}else ee.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Ze.ERROR;break;case Jt.ErrorDetails.LEVEL_LOAD_ERROR:case Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ze.ERROR&&(t.fatal?(this.state=Ze.ERROR,ee.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==Ze.WAITING_LEVEL||(this.state=Ze.IDLE));break;case Jt.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==Ze.PARSING&&this.state!==Ze.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Ze.IDLE):(ee.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,ee.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=this.mediaBuffer?this.mediaBuffer:t,n=e.buffered;!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,n)}},n.onFragLoadEmergencyAborted=function(){this.state=Ze.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var e=this.audioOnly?oe.AUDIO:oe.VIDEO;this.fragmentTracker.detectEvictedFragments(e,t.buffered)}this.state=Ze.IDLE,this.fragPrevious=null},n.onLevelsUpdated=function(t){this.levels=t.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(e!==n&&n>=0){if(t.seeking)return void ee.logger.log("could not seek to "+n+", already seeking at "+e);var i=t.buffered.length?t.buffered.start(0):0,r=i-n;r>0&&r<this.config.maxBufferHole&&(ee.logger.log("adjusting start position by "+r+" to match buffer start"),n+=r,this.startPosition=n),ee.logger.log("seek to target start position "+n+" from current time "+e+". ready state "+t.readyState),t.currentTime=n}},n._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(ee.logger.log("swapping playlist audio codec"),e&&(e=e.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),e},V(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,ee.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(te.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(tn),rn=nn,an=function(t){function e(e){var n;return n=t.call(this,e,te.default.MANIFEST_LOADED,te.default.LEVEL_LOADED,te.default.AUDIO_TRACK_SWITCHED,te.default.FRAG_LOADED,te.default.ERROR)||this,n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,le=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}Y(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},n.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},n.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},n.stopLoad=function(){this.canload=!1},n.onManifestLoaded=function(t){var e,n=[],i=[],r={},a=null,o=!1,s=!1;if(t.levels.forEach(function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec,le&&t.audioCodec&&t.audioCodec.indexOf("mp4a.40.34")!==-1&&(t.audioCodec=void 0),a=r[t.bitrate],a?a.url.push(t.url):(t.url=[t.url],t.urlId=0,r[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&_(a||t,"audio",e.AUDIO),e.SUBTITLES&&_(a||t,"text",e.SUBTITLES))}),o&&s&&(n=n.filter(function(t){var e=t.videoCodec;return!!e})),n=n.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||c(e,"audio"))&&(!n||c(n,"video"))}),t.audioTracks&&(i=t.audioTracks.filter(function(t){return!t.audioCodec||c(t.audioCodec,"audio")}),i.forEach(function(t,e){t.id=e})),n.length>0){e=n[0].bitrate,n.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=n;for(var u=0;u<n.length;u++)if(n[u].bitrate===e){this._firstLevel=u,ee.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}var l=s&&!o;this.hls.trigger(te.default.MANIFEST_PARSED,{levels:n,audioTracks:i,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:!l&&i.some(function(t){return!!t.url})})}else this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},n.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){ee.logger.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,n.trigger(te.default.LEVEL_SWITCHING,i)}var r=e[t],a=r.details;if(!a||a.live){var o=r.urlId;n.trigger(te.default.LEVEL_LOADING,{url:r.url[o],level:t,id:o})}}else n.trigger(te.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},n.onError=function(t){if(t.fatal)return void(t.type===Jt.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var e,n=!1,i=!1;switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,i=!0;break;case Jt.ErrorDetails.LEVEL_LOAD_ERROR:case Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case Jt.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,i)},n.recoverLevel=function(t,e,n,i){var r,a,o,s=this,u=this.hls.config,l=t.details,c=this._levels[e];if(c.loadError++,c.fragmentError=i,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return ee.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},a),t.levelRetry=!0,this.levelRetryCount++,ee.logger.warn("level controller, "+l+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||i)&&(r=c.url.length,r>1&&c.loadError<r?(c.urlId=(c.urlId+1)%r,c.details=void 0,ee.logger.warn("level controller, "+l+" for level "+e+": switching to redundant URL-id "+c.urlId)):this.manualLevelIndex===-1?(o=0===e?this._levels.length-1:e-1,ee.logger.warn("level controller, "+l+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):i&&(ee.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},n.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},n.onLevelLoaded=function(t){var e=this,n=t.level,i=t.details;if(n===this.currentLevelIndex){var r=this._levels[n];if(r.fragmentError||(r.loadError=0,this.levelRetryCount=0),i.live){var a=w(r.details,i,t.stats.trequest);ee.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},a)}else this.clearTimer()}},n.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===e){i=r;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},n.loadLevel=function(){if(ee.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,n=t.urlId,i=t.url[n];ee.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(te.default.LEVEL_LOADING,{url:i,level:e,id:n})}}},n.removeLevel=function(t,e){var n=this.levels.filter(function(n,i){return i!==t||n.url.length>1&&void 0!==e&&(n.url=n.url.filter(function(t,n){return n!==e}),n.urlId=0,!0)}).map(function(t,e){var n=t.details;return n&&n.fragments&&n.fragments.forEach(function(t){t.level=e}),t});this._levels=n,this.hls.trigger(te.default.LEVELS_UPDATED,{levels:n})},q(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}]),e}(re),on=n("./src/demux/id3.js"),sn=.25,un=function(t){function e(e){var n;return n=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHING,te.default.FRAG_PARSING_METADATA,te.default.LIVE_BACK_BUFFER_REACHED)||this,n.id3Track=void 0,n.media=void 0,n}$(e,t);var n=e.prototype;return n.destroy=function(){re.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,!this.media},n.onMediaDetaching=function(){X(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return z(n,this.media),n}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=on.default.getID3Frames(n[r].data);if(a){var o=Math.max(n[r].pts,0),s=r<n.length-1?n[r+1].pts:e.endPTS;s||(s=e.start+e.duration);var u=s-o;u<=0&&(s=o+sn);for(var l=0;l<a.length;l++){var c=a[l];if(!on.default.isTimeStampFrame(c)){var d=new i(o,s,"");d.value=c,this.id3Track.addCue(d)}}}}},n.onLiveBackBufferReached=function(t){var e=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var i=Q(n.cues,e);if(i)for(;n.cues[0]!==i;)n.removeCue(n.cues[0])}},e}(re),ln=un,cn=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),dn=cn,hn=function(){function t(t,e,n,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new dn(e),this.fast_=new dn(n)}var e=t.prototype;return e.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var n=8*e,i=t/1e3,r=n/i;this.fast_.sample(i,r),this.slow_.sample(i,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}(),fn=hn,pn=window,gn=pn.performance,mn=function(t){function e(e){var n;return n=t.call(this,e,te.default.FRAG_LOADING,te.default.FRAG_LOADED,te.default.FRAG_BUFFERED,te.default.ERROR)||this,n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(et(n)),n}nt(e,t);var n=e.prototype;return n.destroy=function(){this.clearTimer(),re.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,i,r=this.hls,a=r.config,o=e.level,s=r.levels[o].details.live;s?(n=a.abrEwmaFastLive,i=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,i=a.abrEwmaSlowVoD),this._bwEstimator=new fn(r,i,n,a.abrEwmaDefaultEstimate)}},n._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var i=n.loader;if(!i||i.stats&&i.stats.aborted)return ee.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=i.stats;if(e&&r&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=gn.now()-r.trequest,o=Math.abs(e.playbackRate);if(a>500*n.duration/o){var s=t.levels,u=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/a),l=s[n.level];if(!l)return;var c=l.realBitrate?Math.max(l.realBitrate,l.bitrate):l.bitrate,d=r.total?r.total:Math.max(r.loaded,Math.round(n.duration*c/8)),h=e.currentTime,f=(d-r.loaded)/u,p=(Ne.bufferInfo(e,h,t.config.maxBufferHole).end-h)/o;if(p<2*n.duration/o&&f>p){var g,m,v=t.minAutoLevel;for(m=n.level-1;m>v;m--){var y=s[m].realBitrate?Math.max(s[m].realBitrate,s[m].bitrate):s[m].bitrate,_=n.duration*y/(6.4*u);if(_<p)break}g<f&&(ee.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+f.toFixed(1)+":"+p.toFixed(1)),t.nextLoadLevel=m,this._bwEstimator.sample(a,r.loaded),i.abort(),this.clearTimer(),t.trigger(te.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:r}))}}}}},n.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(Zt.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(e.aborted!==!0&&"main"===n.type&&Object(Zt.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var i=e.tparsed-e.trequest;ee.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},n.onError=function(t){switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){clearInterval(this.timer),this.timer=null},n._findBestLevel=function(t,e,n,i,r,a,o,s,u){for(var l=r;l>=i;l--){var c=u[l];if(c){var d=c.details,h=d?d.totalduration/d.fragments.length:e,f=!!d&&d.live,p=void 0;p=l<=t?o*n:s*n;var g=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,m=g*h/p;if(ee.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+g+"/"+h+"/"+a+"/"+m),p>g&&(!m||f&&!this.bitrateTestDelay||m<a))return l}}return-1},tt(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(t===-1||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return t!==-1&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,i=t.config,r=t.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(Ne.bufferInfo(a,u,i.maxBufferHole).end-u)/l,h=this._findBestLevel(o,s,c,r,e,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;ee.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;if(m){var v=s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay;f=v-m,ee.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1}}return h=this._findBestLevel(o,s,c,r,e,d+f,p,g,n),Math.max(h,0)}}]),e}(re),vn=mn,yn=v(),_n=function(t){function e(e){var n;return n=t.call(this,e,te.default.MEDIA_ATTACHING,te.default.MEDIA_DETACHING,te.default.MANIFEST_PARSED,te.default.BUFFER_RESET,te.default.BUFFER_APPENDING,te.default.BUFFER_CODECS,te.default.BUFFER_EOS,te.default.BUFFER_FLUSHING,te.default.LEVEL_PTS_UPDATED,te.default.LEVEL_UPDATED)||this,n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){ee.logger.log("media source opened"),n.hls.trigger(te.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){ee.logger.log("media source closed")},n._onMediaSourceEnded=function(){ee.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;ee.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,i=n.segments.reduce(function(t,n){return n.parent===e?t+1:t},0),r={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");r[o]=s.buffered}n.hls.trigger(te.default.BUFFER_APPENDED,{parent:e,pending:i,timeRanges:r}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===i&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){ee.logger.error("sourceBuffer error:",t),n.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=e.config,n}it(e,t);var n=e.prototype;return n.destroy=function(){re.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");var r=Math.abs(i.timestampOffset-t.start);if(r>.1){var a=i.updating;try{i.abort()}catch(t){ee.logger.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(ee.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},n.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,ee.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&yn){var n=this.mediaSource=new yn;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},n.onMediaDetaching=function(){ee.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){ee.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):ee.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(te.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(n){e.pendingTracks[n]=t[n]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!e[i]){var r=t[i];if(!r)throw Error("source buffer exists for track "+i+", however track does not");var a=r.levelCodec||r.codec,o=r.container+";codecs="+a;ee.logger.log("creating sourceBuffer("+o+")");try{var s=e[i]=n.addSourceBuffer(o);s.addEventListener("updateend",this._onSBUpdateEnd),s.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:s,codec:a,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(t){ee.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(te.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,ee.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var n in t){var i=t[n];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0);
}}ee.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){ee.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0)){if(!this.media)return void ee.logger.error("flushLiveBackBuffer called without attaching media");for(var e=this.media.currentTime,n=this.sourceBuffer,i=Object.keys(n),r=e-Math.max(t,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=n[o];if(s){var u=s.buffered;u.length>0&&r>u.start(0)&&this.removeBufferRange(o,s,0,r)&&this.hls.trigger(te.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}}}}},n.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var i=this.sourceBuffer[n];if(i&&i.updating===!0)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),this._live===!0&&e.liveDurationInfinity===!0?(ee.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(Zt.isFiniteNumber)(t))&&(ee.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n){var r=n[i];r&&(e+=r.buffered.length)}}catch(t){ee.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(te.default.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,e=this.hls,n=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void ee.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=n.shift();if(r)try{var a=i[r.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(r);a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){ee.logger.error("error while trying to append buffer:"+i.message),n.unshift(r);var o={type:Jt.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===i.code?(this.segments=[],o.details=Jt.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=Jt.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(ee.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),e.trigger(te.default.ERROR,o)}}}},n.flushBuffer=function(t,e,n){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),ee.logger.log("flushBuffer,pos/start/end: "+r+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return ee.logger.warn("abort flushing too many retries"),!0;var a=i[n];if(a){if(a.ended=!1,a.updating)return ee.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,t,e))return this.flushBufferCounter++,!1}return ee.logger.log("buffer flushed"),!0},n.removeBufferRange=function(t,e,n,i){try{for(var r=0;r<e.buffered.length;r++){var a=e.buffered.start(r),o=e.buffered.end(r),s=Math.max(a,n),u=Math.min(o,i);if(Math.min(u,o)-s>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),ee.logger.log("sb remove "+t+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+l),e.remove(s,u),!0}}}catch(t){ee.logger.warn("removeBufferRange failed",t)}return!1},e}(re),En=_n,bn=function(t){function e(e){var n;return n=t.call(this,e,te.default.FPS_DROP_LEVEL_CAPPING,te.default.MEDIA_ATTACHING,te.default.MANIFEST_PARSED,te.default.LEVELS_UPDATED,te.default.BUFFER_CODECS,te.default.MEDIA_DETACHING)||this,n.autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}ot(e,t);var n=e.prototype;return n.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},n.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},n.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},n.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onBufferCodecs=function(t){var e=this.hls;e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onLevelsUpdated=function(t){this.levels=t.levels},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(t){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return e.isLevelAllowed(r,n.restrictedLevels)&&r<=t});return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),e.indexOf(t)===-1},e.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var i=function(t,e){return!e||(t.width!==e.width||t.height!==e.height)},r=t.length-1,a=0;a<t.length;a+=1){var o=t[a];if((o.width>=e||o.height>=n)&&i(o,t[a+1])){r=a;break}}return r},at(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(re),An=bn,Tn=window,Sn=Tn.performance,kn=function(t){function e(e){return t.call(this,e,te.default.MEDIA_ATTACHING)||this}st(e,t);var n=e.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){var n=this.video=t.media instanceof window.HTMLVideoElement?t.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},n.checkFPS=function(t,e,n){var i=Sn.now();if(e){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/r,u=this.hls;if(u.trigger(te.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var l=u.currentLevel;ee.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=l)&&(l-=1,u.trigger(te.default.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,u.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(re),wn=kn,Cn=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===n){var o=e.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,window.performance.now());var s,u;"arraybuffer"===r.responseType?(s=e.response,u=s.byteLength):(s=e.responseText,u=s.length),i.loaded=i.total=u;var l={url:e.responseURL,data:s};this.callbacks.onSuccess(l,i,r,e)}else i.retry>=a.maxRetry||o>=400&&o<499?(ee.logger.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:e.statusText},r,e)):(ee.logger.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){ee.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)},t}(),Ln=Cn,Dn=function(t){function e(e){var n;return n=t.call(this,e,te.default.MANIFEST_LOADING,te.default.MANIFEST_PARSED,te.default.AUDIO_TRACK_LOADED,te.default.AUDIO_TRACK_SWITCHED,te.default.LEVEL_LOADED,te.default.ERROR)||this,n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}ct(e,t);var n=e.prototype;return n.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},n.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(te.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},n.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)return void ee.logger.warn("Invalid audio track id:",t.id);if(ee.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()},n.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},n.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},n.onError=function(t){t.type===Jt.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(ee.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},n._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)return void ee.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(t<0||t>=this.tracks.length)return void ee.logger.warn("Invalid id passed to audio-track controller");var e=this.tracks[t];ee.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,i=e.type,r=e.id;this.hls.trigger(te.default.AUDIO_TRACK_SWITCHING,{id:r,type:i,url:n}),this._loadTrackDetailsIfNeeded(e)},n.doTick=function(){this._updateTrack(this._trackId)},n._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},n._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],i=null;if(n&&(i=n.name),this._selectDefaultTrack){var r=e.filter(function(t){return t.default});r.length?e=r:ee.logger.warn("No default audio tracks defined")}var a=!1,o=function(){e.forEach(function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||i&&i!==e.name||(t._setAudioTrack(e.id),a=!0)})};o(),a||(i=null,o()),a||(ee.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},n._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live)&&!!n},n._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;ee.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(te.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},n._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,ee.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},n._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,i=e.language,r=e.groupId;ee.logger.warn("Loading failed on audio track id: "+t+", group-id: "+r+', name/language: "'+n+'" / "'+i+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===n){a=o;break}}return a===t?void ee.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+i+'"'):(ee.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),void this._setAudioTrack(a))},lt(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(Je),In=Dn,Rn=window,Pn=Rn.performance,On=100,xn=function(t){function e(e,n){var i;return i=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHING,te.default.AUDIO_TRACKS_UPDATED,te.default.AUDIO_TRACK_SWITCHING,te.default.AUDIO_TRACK_LOADED,te.default.KEY_LOADED,te.default.FRAG_LOADED,te.default.FRAG_PARSING_INIT_SEGMENT,te.default.FRAG_PARSING_DATA,te.default.FRAG_PARSED,te.default.ERROR,te.default.BUFFER_RESET,te.default.BUFFER_CREATED,te.default.BUFFER_APPENDED,te.default.BUFFER_FLUSHED,te.default.INIT_PTS_FOUND)||this,i.fragmentTracker=n,i.config=e.config,i.audioCodecSwap=!1,i._state=Ze.STOPPED,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i.waitingVideoCC=null,i}ft(e,t);var n=e.prototype;return n.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,this.videoTrackCC=n,ee.logger.log("InitPTS for cc: "+n+" found from main: "+i),this.state===Ze.WAITING_INIT_PTS&&this.tick())},n.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(On),this.fragLoadError=0,e>0&&t===-1?(ee.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Ze.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=Ze.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Ze.STOPPED},n.doTick=function(){var t,e,n,i=this.hls,r=i.config;switch(this.state){case Ze.ERROR:case Ze.PAUSED:case Ze.BUFFER_FLUSHING:break;case Ze.STARTING:this.state=Ze.WAITING_TRACK,this.loadedmetadata=!1;break;case Ze.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(t=this.nextLoadPosition,void 0===t)break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,u=t<r.maxBufferHole?Math.max(ze,r.maxBufferHole):r.maxBufferHole,l=Ne.bufferInfo(o,t,u),c=Ne.bufferInfo(s,t,u),d=l.len,h=l.end,f=this.fragPrevious,p=Math.min(r.maxBufferLength,r.maxMaxBufferLength),g=Math.max(p,c.len),m=this.audioSwitch,v=this.trackId;if((d<g||m)&&v<a.length){if(n=a[v].details,"undefined"==typeof n){this.state=Ze.WAITING_TRACK;break}if(!m&&this._streamEnded(l,n))return this.hls.trigger(te.default.BUFFER_EOS,{type:"audio"}),void(this.state=Ze.ENDED);var y,_=n.fragments,E=_.length,b=_[0].start,A=_[E-1].start+_[E-1].duration;if(m)if(n.live&&!n.PTSKnown)ee.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,n.PTSKnown&&t<b){if(!(l.end>b||l.nextStart))return;ee.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)y=n.initSegment;else if(h<=b){if(y=_[0],null!==this.videoTrackCC&&y.cc!==this.videoTrackCC&&(y=L(_,this.videoTrackCC)),n.live&&y.loadIdx&&y.loadIdx===this.fragLoadIdx){var T=l.nextStart?l.nextStart:b;return ee.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var S,k=r.maxFragLookUpTolerance,w=f?_[f.sn-_[0].sn+1]:void 0;h<A?(h>A-k&&(k=0),S=w&&!F(h,k,w)?w:xe.search(_,function(t){return F(h,k,t)})):S=_[E-1],S&&(y=S,b=S.start,f&&y.level===f.level&&y.sn===f.sn&&(y.sn<n.endSN?(y=_[y.sn+1-n.startSN],this.fragmentTracker.getState(y)!==Re.OK&&ee.logger.log("SN just loaded, load next one: "+y.sn)):y=null))}y&&(y.encrypted?(ee.logger.log("Loading key for "+y.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+v),this.state=Ze.KEY_LOADING,i.trigger(te.default.KEY_LOADING,{frag:y})):(this.fragCurrent=y,(m||this.fragmentTracker.getState(y)===Re.NOT_LOADED)&&(ee.logger.log("Loading "+y.sn+", cc: "+y.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+v+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+h.toFixed(3)),"initSegment"!==y.sn&&(this.startFragRequested=!0),Object(Zt.isFiniteNumber)(y.sn)&&(this.nextLoadPosition=y.start+y.duration),i.trigger(te.default.FRAG_LOADING,{frag:y}),this.state=Ze.FRAG_LOADING)))}break;case Ze.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=Ze.IDLE);break;case Ze.FRAG_LOADING_WAITING_RETRY:var C=Pn.now(),D=this.retryDate;o=this.media;var I=o&&o.seeking;(!D||C>=D||I)&&(ee.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Ze.IDLE);break;case Ze.WAITING_INIT_PTS:var R=this.waitingFragment;if(R){var P=R.frag.cc;if(void 0!==this.initPTS[P])this.waitingFragment=null,this.state=Ze.FRAG_LOADING,this.onFragLoaded(R);else if(this.videoTrackCC!==this.waitingVideoCC)ee.logger.log("Waiting fragment cc ("+P+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var O=Ne.bufferInfo(this.mediaBuffer,this.media.currentTime,r.maxBufferHole),x=F(O.end,r.maxFragLookUpTolerance,R.frag);x<0&&(ee.logger.log("Waiting fragment cc ("+P+") @ "+R.frag.start+" cancelled because another fragment at "+O.end+" is needed"),this.clearWaitingFragment())}}else this.state=Ze.IDLE;break;case Ze.STOPPED:case Ze.FRAG_LOADING:case Ze.PARSING:case Ze.PARSED:case Ze.ENDED:}},n.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=Ze.IDLE)},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(ee.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(t){ee.logger.log("audio tracks updated"),this.tracks=t.audioTracks},n.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=Ze.PAUSED,e?this.setInterval(On):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=Ze.IDLE),this.tick()},n.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,a=0;if(ee.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var o=i.details;o&&e.fragments.length>0?(A(o,e),a=e.fragments[0].start,e.PTSKnown?ee.logger.log("live audio playlist sliding:"+a.toFixed(3)):ee.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,ee.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(this.startPosition===-1){var s=e.startTimeOffset;Object(Zt.isFiniteNumber)(s)?(ee.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):e.live?(this.startPosition=this.computeLivePosition(a,e),ee.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ze.WAITING_TRACK&&(this.state=Ze.IDLE),this.tick()},n.onKeyLoaded=function(){this.state===Ze.KEY_LOADING&&(this.state=Ze.IDLE,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===Ze.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,o=e.level,s=e.sn,u=e.cc,l=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=Ze.IDLE,c.tparsed=c.tbuffered=Pn.now(),r.initSegment.data=t.payload,this.hls.trigger(te.default.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=Ze.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Ke(this.hls,"audio"));var d=this.initPTS[u],h=r.initSegment?r.initSegment.data:[];if(void 0!==d){this.pendingBuffering=!0,ee.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o);var f=!1;this.demuxer.push(t.payload,h,l,null,e,a,f,d)}else ee.logger.log("Unknown video PTS for cc "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=Ze.WAITING_INIT_PTS}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ze.PARSING){var i,r=t.tracks;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(te.default.BUFFER_CODECS,r),ee.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(te.default.BUFFER_APPENDING,o))}this.tick()}}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===Ze.PARSING){var r=this.trackId,a=this.tracks[r],o=this.hls;Object(Zt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(oe.AUDIO),ee.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),b(a.details,n,t.startPTS,t.endPTS);var s=this.media,u=!1;if(this.audioSwitch)if(s&&s.readyState){var l=s.currentTime;ee.logger.log("switching audio track : currentTime:"+l),l>=t.startPTS&&(ee.logger.log("switching audio track : flushing all audio"),this.state=Ze.BUFFER_FLUSHING,o.trigger(te.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,o.trigger(te.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(te.default.AUDIO_TRACK_SWITCHED,{id:r});var c=this.pendingData;if(!c)return ee.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(te.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&c.push({type:t.type,data:e,parent:"audio",content:"data"})}),!u&&c.length&&(c.forEach(function(t){e.state===Ze.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(te.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ze.PARSING&&(this.stats.tparsed=Pn.now(),this.state=Ze.PARSED,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},n.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==Ze.PARSING&&e!==Ze.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==Ze.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Pn.now(),n.trigger(te.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&ee.logger.log("audio buffered : "+qe.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(te.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Ze.IDLE}this.tick()}},n.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var r=this.config;if(i<=r.fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);ee.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Pn.now()+a,this.state=Ze.FRAG_LOADING_WAITING_RETRY}else ee.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Ze.ERROR}break;case Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case Jt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ze.ERROR&&(this.state=t.fatal?Ze.ERROR:Ze.IDLE,ee.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case Jt.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===Ze.PARSING||this.state===Ze.PARSED)){var o=this.mediaBuffer,s=this.media.currentTime,u=o&&Ne.isBuffered(o,s)&&Ne.isBuffered(o,s+.5);if(u){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,ee.logger.warn("AudioStreamController: reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=Ze.IDLE}else ee.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ze.BUFFER_FLUSHING,this.hls.trigger(te.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},n.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(ee.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(te.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Ze.PARSED):(this.state=Ze.IDLE,this.fragPrevious=null,this.tick())},ht(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,ee.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(tn),Nn=xn,Mn=function(){function t(t){if("string"!=typeof t)return!1;var e=a[t.toLowerCase()];return!!e&&t.toLowerCase()}function e(t){if("string"!=typeof t)return!1;var e=o[t.toLowerCase()];return!!e&&t.toLowerCase()}function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function i(i,a,o){var s=this,u={};u.enumerable=!0,s.hasBeenReset=!1;var l="",c=!1,d=i,h=a,f=o,p=null,g="",m=!0,v="auto",y="start",_=50,E="middle",b=50,A="middle";Object.defineProperty(s,"id",n({},u,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(s,"pauseOnExit",n({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",n({},u,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},u,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},u,{get:function(){return g},set:function(e){var n=t(e);if(n===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},u,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},u,{get:function(){return v},set:function(t){if("number"!=typeof t&&t!==r)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},u,{get:function(){return y},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,
this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},u,{get:function(){return E},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},u,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},u,{get:function(){return A},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");A=n,this.hasBeenReset=!0}})),s.displayState=void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){var t=window.WebVTT;return t.convertCueToDOMTree(window,this.text)},i}(),Fn=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};mt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){var n;return!!((n=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100))&&(this.set(t,e),!0)}};var Un=new Mn(0,0,0),Bn="middle"===Un.align?"middle":"center";pt.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=_t(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}function n(t){vt(t,function(t,e){switch(t){case"Region":}},/:/)}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;r=e();var a=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=e(),i.state){case"HEADER":/:/.test(r)?n(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new Mn(0,0,""),i.state="CUE",r.indexOf("-->")===-1){i.cue.id=r;continue}case"CUE":try{yt(r,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=r.indexOf("-->")!==-1;if(!r||s&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var jn,Gn=pt,Hn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Vn=function(t){var e=t;return Hn.hasOwnProperty(t)&&(e=Hn[t]),String.fromCharCode(e)},Kn=15,Wn=100,qn={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Yn={17:2,18:4,21:6,22:8,23:10,19:13,20:15},zn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Xn={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Qn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(jn||(jn={}));var $n,Jn=function(){function t(){this.time=null,this.verboseLevel=jn.ERROR}var e=t.prototype;return e.log=function(t,e){this.verboseLevel>=t&&ee.logger.log(this.time+" ["+t+"] "+e)},t}(),Zn=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},ti=function(){function t(t,e,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),ei=function(){function t(t,e,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new ti(e,n,i,r,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),ni=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<Wn;e++)this.chars.push(new ei);this.logger=t,this.pos=0,this.currPenState=new ti}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<Wn;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<Wn;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<Wn;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(jn.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Wn&&(this.logger.log(jn.DEBUG,"Too large cursor position "+this.pos),this.pos=Wn)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Vn(t);return this.pos>=Wn?void this.logger.log(jn.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<Wn;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<Wn;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t);var e=this.chars[this.pos];e.setPenState(this.currPenState)},t}(),ii=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<Kn;e++)this.rows.push(new ni(t));this.logger=t,this.currRow=Kn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<Kn;t++)this.rows[t].clear();this.currRow=Kn-1},e.equals=function(t){for(var e=!0,n=0;n<Kn;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<Kn;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<Kn;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){var t=this.rows[this.currRow];t.backSpace()},e.clearToEndOfRow=function(){var t=this.rows[this.currRow];t.clearToEndOfRow()},e.insertChar=function(t){var e=this.rows[this.currRow];e.insertChar(t)},e.setPen=function(t){var e=this.rows[this.currRow];e.setPenStyles(t)},e.moveCursor=function(t){var e=this.rows[this.currRow];e.moveCursor(t)},e.setCursor=function(t){this.logger.log(jn.INFO,"setCursor: "+t);var e=this.rows[this.currRow];e.setCursor(t)},e.setPAC=function(t){this.logger.log(jn.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<Kn;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=e;var u=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);u.setCursor(t.indent),t.color=u.chars[c].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(jn.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null===this.nrRollUpRows)return void this.logger.log(jn.DEBUG,"roll_up but nrRollUpRows not set yet");this.logger.log(jn.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(jn.INFO,"Rolling up")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<Kn;r++){var a=this.rows[r].getTextString();a&&(i=r+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),ri=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new ii(n),this.nonDisplayedMemory=new ii(n),this.lastOutputScreen=new ii(n),this.currRollUpRow=this.displayedMemory.rows[Kn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Kn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(jn.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(jn.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(jn.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(jn.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(jn.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(jn.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(jn.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(jn.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(jn.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(jn.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(jn.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(jn.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(jn.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(jn.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(jn.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(jn.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(jn.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[n]}this.logger.log(jn.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),ai=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new Jn;this.channels=[null,new ri(t,e,i),new ri(t+1,n,i)],this.cmdHistory=Tt(),this.logger=i}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,i,r,a=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(i=127&e[o],r=127&e[o+1],0!==i||0!==r){if(this.logger.log(jn.DATA,"["+Zn([e[o],e[o+1]])+"] -> ("+Zn([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r))){var s=this.currentChannel;if(s&&s>0){var u=this.channels[s];u.insertChars(a)}else this.logger.log(jn.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(jn.WARNING,"Couldn't parse cleaned data "+Zn([i,r])+" orig: "+Zn([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory,i=(20===t||28===t||21===t||29===t)&&e>=32&&e<=47,r=(23===t||31===t)&&e>=33&&e<=35;if(!i&&!r)return!1;if(At(t,e,n))return bt(null,null,n),this.logger.log(jn.DEBUG,"Repeated command ("+Zn([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,o=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),bt(t,e,n),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if(n=17===t?1:2,n!==this.currentChannel)return this.logger.log(jn.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(e),this.logger.log(jn.DEBUG,"MIDROW ("+Zn([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n,i=this.cmdHistory,r=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,a=(16===t||24===t)&&e>=64&&e<=95;if(!r&&!a)return!1;if(At(t,e,i))return bt(null,null,i),!0;var o=t<=23?1:2;n=e>=64&&e<=95?1===o?qn[t]:zn[t]:1===o?Yn[t]:Xn[t];var s=this.channels[o];return!!s&&(s.setPAC(this.interpretPAC(n,e)),bt(t,e,i),this.currentChannel=o,!0)},e.interpretPAC=function(t,e){var n=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,i.underline=1===(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.parseChars=function(t,e){var n,i=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),r>=17&&r<=19){var a=e;a=17===r?e+80:18===r?e+112:e+144,this.logger.log(jn.INFO,"Special char '"+Vn(a)+"' in channel "+n),i=[a]}else t>=32&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var o=Zn(i);this.logger.log(jn.DEBUG,"Char codes =  "+o.join(",")),bt(t,e,this.cmdHistory)}return i},e.parseBackgroundAttributes=function(t,e){var n=(16===t||24===t)&&e>=32&&e<=47,i=(23===t||31===t)&&e>=45&&e<=47;if(!n&&!i)return!1;var r,a={};16===t||24===t?(r=Math.floor((e-32)/2),a.background=Qn[r],e%2===1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var o=t<=23?1:2,s=this.channels[o];return s.setBkgData(a),bt(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory=Tt()},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}(),oi=ai,si=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),ui=function(t,e,n){return t.substr(n||0,e.length)===e},li=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),r=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(Zt.isFiniteNumber)(e)&&Object(Zt.isFiniteNumber)(n)&&Object(Zt.isFiniteNumber)(i)&&Object(Zt.isFiniteNumber)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,e+=6e4*i,e+=36e5*r},ci=function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},di=function(t,e,n){var i=t[e],r=t[i.prevCC];if(!r||!r.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)t.ccOffset+=i.start-r.start,i.new=!1,i=r,r=t[i.prevCC];t.presentationOffset=n},hi={parse:function(t,e,n,i,r,a){var o,s=/\r\n|\n\r|\n|\r/g,u=Object(on.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(s,"\n").split("\n"),l="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new Gn;m.oncue=function(t){var e=n[i],r=n.ccOffset;e&&e.new&&(void 0!==d?r=n.ccOffset=e.start:di(n,i,h)),h&&(r=h-n.presentationOffset),g&&(t.startTime+=r-d,t.endTime+=r-d),t.id=ci(t.startTime.toString())+ci(t.endTime.toString())+ci(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&f.push(t)},m.onparsingerror=function(t){o=t},m.onflush=function(){return o&&a?void a(o):void r(f)},u.forEach(function(t){if(p){if(ui(t,"X-TIMESTAMP-MAP=")){p=!1,g=!0,t.substr(16).split(",").forEach(function(t){ui(t,"LOCAL:")?l=t.substr(6):ui(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{e+(9e4*n[i].start||0)<0&&(e+=8589934592),c-=e,d=li(l)/1e3,h=c/9e4}catch(t){g=!1,o=t}return}""===t&&(p=!1)}m.parse(t+"\n")}),m.flush()}},fi=hi,pi=function(t){function e(e){var n;if(n=t.call(this,e,te.default.MEDIA_ATTACHING,te.default.MEDIA_DETACHING,te.default.FRAG_PARSING_USERDATA,te.default.FRAG_DECRYPTED,te.default.MANIFEST_LOADING,te.default.MANIFEST_LOADED,te.default.FRAG_LOADED,te.default.INIT_PTS_FOUND)||this,n.media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=Lt(),n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var i=new si(St(n),"textTrack1"),r=new si(St(n),"textTrack2"),a=new si(St(n),"textTrack3"),o=new si(St(n),"textTrack4");n.cea608Parser1=new oi(1,i,r),n.cea608Parser2=new oi(3,a,o)}return n}kt(e,t);var n=e.prototype;return n.addCues=function(t,e,n,i,r){for(var a=!1,o=r.length;o--;){var s=r[o],u=Ct(s[0],s[1],e,n);if(u>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],n),a=!0,u/(n-e)>.5))return}if(a||r.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,i);else{var l=this.Cues.newCue(null,e,n,i);this.hls.trigger(te.default.CUES_PARSED,{type:"captions",cues:l,track:t})}},n.onInitPtsFound=function(t){var e=this,n=t.frag,i=t.id,r=t.initPTS,a=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]=r),a.length&&(this.unparsedVttFrags=[],a.forEach(function(t){e.onFragLoaded(t)}))},n.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n];if(i[t])return i}return null},n.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},n.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,n=this.captionsTracks,i=this.media,r=e[t],a=r.label,o=r.languageCode,s=this.getExistingTrack(t);if(s)n[t]=s,X(n[t]),z(n[t],i);else{var u=this.createTextTrack("captions",a,o);u&&(u[t]=!0,n[t]=u)}}},n.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n=e.label,i={_id:t,label:n,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=i,this.hls.trigger(te.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}}},n.createTextTrack=function(t,e,n){var i=this.media;if(i)return i.addTextTrack(t,e,n)},n.destroy=function(){t.prototype.destroy.call(this)},n.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},n.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){X(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=Lt(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)X(e[n])}},n.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=t.subtitles||[],i=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,n){var i;if(n<r.length){for(var a=null,o=0;o<r.length;o++)if(wt(r[o],t)){a=r[o];break}a&&(i=a)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),t.default?i.mode=e.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",e.textTracks.push(i)})}else if(!i&&this.tracks&&this.tracks.length){var a=this.tracks.map(function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}});this.hls.trigger(te.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(t){var n=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(n){var i="textTrack"+n[1],r=e.captionsProperties[i];r&&(r.label=t.name,t.lang&&(r.languageCode=t.lang),r.media=t)}})},n.onFragLoaded=function(t){var e=t.frag,n=t.payload,i=this.cea608Parser1,r=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===e.type){var u=e.sn;e.sn!==o+1&&i&&r&&(i.reset(),r.reset()),this.lastSn=u}else if("subtitle"===e.type)if(n.byteLength){if(!Object(Zt.isFiniteNumber)(a[e.cc]))return s.push(t),void(a.length&&this.hls.trigger(te.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var l=e.decryptdata;null!=l&&null!=l.key&&"AES-128"===l.method||this._parseVTTs(e,n)}else this.hls.trigger(te.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},n._parseVTTs=function(t,e){var n=this,i=this.hls,r=this.prevCC,a=this.textTracks,o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:r,new:!0},this.prevCC=t.cc),fi.parse(e,this.initPTS[t.cc],o,t.cc,function(e){if(n.config.renderTextTracksNatively){var r=a[t.level];if("disabled"===r.mode)return void i.trigger(te.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach(function(t){if(!r.cues.getCueById(t.id))try{if(r.addCue(t),!r.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){ee.logger.debug("Failed occurred on adding cues: "+n);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}})}else{var o=n.tracks[t.level].default?"default":"subtitles"+t.level;i.trigger(te.default.CUES_PARSED,{type:"subtitles",cues:e,track:o})}i.trigger(te.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){ee.logger.log("Failed to parse VTT cue: "+e),i.trigger(te.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},n.onFragDecrypted=function(t){var e=t.frag,n=t.payload;if("subtitle"===e.type){if(!Object(Zt.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,n)}},n.onFragParsingUserdata=function(t){var e=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&e&&n)for(var i=0;i<t.samples.length;i++){var r=t.samples[i].bytes;if(r){var a=this.extractCea608Data(r);e.addData(t.samples[i].pts,a[0]),n.addData(t.samples[i].pts,a[1])}}},n.extractCea608Data=function(t){for(var e=31&t[0],n=2,i=[[],[]],r=0;r<e;r++){var a=t[n++],o=127&t[n++],s=127&t[n++],u=0!==(4&a),l=3&a;0===o&&0===s||u&&(0!==l&&1!==l||(i[l].push(o),i[l].push(s)))}return i},e}(re),gi=pi,mi=function(t){function e(e){var n;return n=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHING,te.default.MANIFEST_LOADED,te.default.SUBTITLE_TRACK_LOADED)||this,n.tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}Rt(e,t);var n=e.prototype;return n.destroy=function(){re.prototype.destroy.call(this)},n.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(Zt.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(Zt.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var t=Pt(this.media.textTracks);t.forEach(function(t){X(t)}),this.subtitleTrack=-1,this.media=null}},n.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(te.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},n.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,i=t.details,r=this.trackId,a=this.tracks,o=a[r];if(n>=a.length||n!==r||!o||this.stopped)return void this._clearReloadTimer();if(ee.logger.log("subtitle track "+n+" loaded"),i.live){var s=w(o.details,i,t.stats.trequest);ee.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout(function(){e._loadCurrentTrack()},s)}else this._clearReloadTimer()},n.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},n._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,i=e[t];t<0||!i||i.details&&!i.details.live||(ee.logger.log("Loading subtitle track "+t),n.trigger(te.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))},n._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,i=this.trackId;if(e){var r=Pt(e.textTracks);if(t===-1)[].slice.call(r).forEach(function(t){t.mode="disabled"});else{var a=r[i];a&&(a.mode="disabled")}var o=r[t];o&&(o.mode=n?"showing":"hidden")}},n._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(Zt.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,ee.logger.log("Switching to subtitle track "+t),e.trigger(te.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},n._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=Pt(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},It(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(re),vi=mi,yi=n("./src/crypt/decrypter.js"),_i=window,Ei=_i.performance,bi=500,Ai=function(t){function e(e,n){var i;return i=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHING,te.default.ERROR,te.default.KEY_LOADED,te.default.FRAG_LOADED,te.default.SUBTITLE_TRACKS_UPDATED,te.default.SUBTITLE_TRACK_SWITCH,te.default.SUBTITLE_TRACK_LOADED,te.default.SUBTITLE_FRAG_PROCESSED,te.default.LEVEL_UPDATED)||this,
i.fragmentTracker=n,i.config=e.config,i.state=Ze.STOPPED,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new yi.default(e,e.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(Ot(i)),i}xt(e,t);var n=e.prototype;return n.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=Ze.IDLE,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=e.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}var s=e.start+e.duration;r?r.end=s:(r={start:a,end:s},i.push(r))}}},n.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=Ze.IDLE},n.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]}),this.media=null,this.state=Ze.STOPPED)},n.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=Ze.IDLE)},n.onSubtitleTracksUpdated=function(t){var e=this;ee.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]})},n.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1)return void this.clearInterval();var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(bi)},n.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,i=this.currentTrackId,r=this.tracks,a=r[i];e>=r.length||e!==i||!a||(n.live&&T(a.details,n,this.lastAVStart),a.details=n,this.setInterval(bi))},n.onKeyLoaded=function(){this.state===Ze.KEY_LOADING&&(this.state=Ze.IDLE)},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,i=t.frag,r=this.hls;if(this.state===Ze.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Ei.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,function(t){var e=Ei.now();r.trigger(te.default.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:a,tdecrypt:e}})})}},n.onLevelUpdated=function(t){var e=t.details,n=e.fragments;this.lastAVStart=n.length?n[0].start:0},n.doTick=function(){if(!this.media)return void(this.state=Ze.IDLE);switch(this.state){case Ze.IDLE:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,i=this.media,r=this.tracks;if(!r||!r[e]||!r[e].details)break;var a=t.maxBufferHole,o=t.maxFragLookUpTolerance,s=Math.min(t.maxBufferLength,t.maxMaxBufferLength),u=Ne.bufferedInfo(this._getBuffered(),i.currentTime,a),l=u.end,c=u.len,d=r[e].details,h=d.fragments,f=h.length,p=h[f-1].start+h[f-1].duration;if(c>s)return;var g,m=this.fragPrevious;l<p?(m&&d.hasProgramDateTime&&(g=N(h,m.endProgramDateTime,o)),g||(g=M(m,h,l,o))):g=h[f-1],g&&g.encrypted?(ee.logger.log("Loading key for "+g.sn),this.state=Ze.KEY_LOADING,this.hls.trigger(te.default.KEY_LOADING,{frag:g})):g&&n.getState(g)===Re.NOT_LOADED&&(this.fragCurrent=g,this.state=Ze.FRAG_LOADING,this.hls.trigger(te.default.FRAG_LOADING,{frag:g}))}},n.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){this.fragPrevious=null},e}(tn);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}($n||($n={}));var Ti=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),Si=3,ki=function(t,e,n){var i={audioCapabilities:[],videoCapabilities:[]};return t.forEach(function(t){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})}),e.forEach(function(t){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})}),[i]},wi=function(t,e,n,i){switch(t){case $n.WIDEVINE:return ki(e,n,i);default:throw new Error("Unknown key-system: "+t)}},Ci=function(t){function e(e){var n;return n=t.call(this,e,te.default.MEDIA_ATTACHED,te.default.MEDIA_DETACHED,te.default.MANIFEST_PARSED)||this,n._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(t){if(ee.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!n.mediaKeysPromise)return ee.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){n._media&&(n._attemptSetMediaKeys(e),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}Ft(e,t);var n=e.prototype;return n.getLicenseServerUrl=function(t){switch(t){case $n.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},n._attemptKeySystemAccess=function(t,e,n){var i=this,r=wi(t,e,n,this._drmSystemOptions);ee.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(t,r);this.mediaKeysPromise=a.then(function(e){return i._onMediaKeySystemAccessObtained(t,e)}),a.catch(function(e){ee.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},n._onMediaKeySystemAccessObtained=function(t,e){var n=this;ee.logger.log('Access for key-system "'+t+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i);var r=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return i.mediaKeys=e,ee.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e});return r.catch(function(t){ee.logger.error("Failed to create media-keys:",t)}),r},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},n._onNewMediaKeySession=function(t){var e=this;ee.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(n){e._onKeySessionMessage(t,n.message)},!1)},n._onKeySessionMessage=function(t,e){ee.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){ee.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)})},n._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return ee.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});ee.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(t,e){var n=this,i=this._mediaKeysList[0];if(!i)return ee.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)return void ee.logger.warn("Key-Session already initialized but requested again");var r=i.mediaKeysSession;return r?e?(ee.logger.log('Generating key-session request for "'+t+'" init data type'),i.mediaKeysSessionInitialized=!0,void r.generateRequest(t,e).then(function(){ee.logger.debug("Key-session generation succeeded")}).catch(function(t){ee.logger.error("Error generating key-session request:",t),n.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(ee.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(ee.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))},n._createLicenseXhr=function(t,e,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,t)}catch(e){i.open("POST",t,!0),r(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,n),i},n._onLicenseRequestReadyStageChange=function(t,e,n,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,ee.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&ee.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(t.response);else{if(ee.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Si)return void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var r=Si-this._requestLicenseFailureCount+1;ee.logger.warn("Retrying license request, "+r+" attempts left"),this._requestLicense(n,i)}}},n._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case $n.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},n._requestLicense=function(t,e){ee.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return ee.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,t,e);ee.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(n,t);r.send(a)}catch(t){ee.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(te.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map(function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch(function(){})})).then(function(){return t.setMediaKeys(null)}).catch(function(){}))},n.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),n=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess($n.WIDEVINE,e,n)}},Mt(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(re),Li=Ci,Di=Bt(Bt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ln,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:vn,bufferController:En,capLevelController:An,fpsController:wn,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ti,testBandwidth:!0},Gt()),{},{subtitleStreamController:Ai,subtitleTrackController:vi,timelineController:gi,audioStreamController:Nn,audioTrackController:In,emeController:Li}),Ii=function(t){function e(n){var i;void 0===n&&(n={}),i=t.call(this)||this,i.config=void 0,i._autoLevelCapping=void 0,i.abrController=void 0,i.capLevelController=void 0,i.levelController=void 0,i.streamController=void 0,i.networkControllers=void 0,i.audioTrackController=void 0,i.subtitleTrackController=void 0,i.emeController=void 0,i.coreComponents=void 0,i.media=null,i.url=null;var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");i.config=Vt(Vt({},r),n);var a=Wt(i),o=a.config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(ee.enableLogs)(o.debug),i._autoLevelCapping=-1;var s=i.abrController=new o.abrController(Wt(i)),u=new o.bufferController(Wt(i)),l=i.capLevelController=new o.capLevelController(Wt(i)),c=new o.fpsController(Wt(i)),d=new we(Wt(i)),h=new Le(Wt(i)),f=new Ie(Wt(i)),p=new ln(Wt(i)),g=i.levelController=new an(Wt(i)),m=new Pe(Wt(i)),v=i.streamController=new rn(Wt(i),m),y=[g,v],_=o.audioStreamController;_&&y.push(new _(Wt(i),m)),i.networkControllers=y;var E=[d,h,f,s,u,l,c,p,m];if(_=o.audioTrackController){var b=new _(Wt(i));i.audioTrackController=b,E.push(b)}if(_=o.subtitleTrackController){var A=new _(Wt(i));i.subtitleTrackController=A,y.push(A)}if(_=o.emeController){var T=new _(Wt(i));i.emeController=T,E.push(T)}return _=o.subtitleStreamController,_&&y.push(new _(Wt(i),m)),_=o.timelineController,_&&E.push(new _(Wt(i))),i.coreComponents=E,i}zt(e,t),e.isSupported=function(){return J()},Yt(e,null,[{key:"version",get:function(){return"0.14.13"}},{key:"Events",get:function(){return te.default}},{key:"ErrorTypes",get:function(){return Jt.ErrorTypes}},{key:"ErrorDetails",get:function(){return Jt.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Di},set:function(t){e.defaultConfig=t}}]);var n=e.prototype;return n.destroy=function(){ee.logger.log("destroy"),this.trigger(te.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(t){ee.logger.log("attachMedia"),this.media=t,this.trigger(te.default.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){ee.logger.log("detachMedia"),this.trigger(te.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=$t.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),ee.logger.log("loadSource:"+t),this.url=t,this.trigger(te.default.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),ee.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},n.stopLoad=function(){ee.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},n.swapAudioCodec=function(){ee.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){ee.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},n.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},Yt(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){ee.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){ee.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){ee.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){ee.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){ee.logger.log("set startLevel:"+t),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){ee.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){var r=t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate;if(r>e)return i}return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.levels,n=this.autoLevelCapping;return t=n===-1&&e&&e.length?e.length-1:n}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),e}(je);Ii.defaultConfig=void 0},"./src/polyfills/number.js":/*!*********************************!*\
	  !*** ./src/polyfills/number.js ***!
	  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */
function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",function(){return i}),n.d(e,"MAX_SAFE_INTEGER",function(){return r});var i=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":/*!*************************************!*\
	  !*** ./src/utils/get-self-scope.js ***!
	  \*************************************/
/*! exports provided: getSelfScope */
function(t,e,n){"use strict";function i(){return"undefined"==typeof window?self:window}n.r(e),n.d(e,"getSelfScope",function(){return i})},"./src/utils/logger.js":/*!*****************************!*\
	  !*** ./src/utils/logger.js ***!
	  \*****************************/
/*! exports provided: enableLogs, logger */
function(t,e,n){"use strict";function i(){}function r(t,e){return e="["+t+"] > "+e}function a(t){var e=c.console[t];return e?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0]&&(i[0]=r(t,i[0])),e.apply(c.console,i)}:i}function o(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach(function(e){l[e]=t[e]?t[e].bind(t):a(e)})}n.r(e),n.d(e,"enableLogs",function(){return d}),n.d(e,"logger",function(){return h});var s=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),u={trace:i,debug:i,log:i,warn:i,info:i,error:i},l=u,c=Object(s.getSelfScope)(),d=function(t){if(c.console&&t===!0||"object"==typeof t){o(t,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u},h=l}}).default})},function(t,e){var n=function(){function t(){if(!K){try{var t=F.getElementsByTagName("body")[0].appendChild(v("span"));t.parentNode.removeChild(t)}catch(t){return}K=!0;for(var e=j.length,n=0;n<e;n++)j[n]()}}function e(t){K?t():j[j.length]=t}function i(t){if(typeof M.addEventListener!=D)M.addEventListener("load",t,!1);else if(typeof F.addEventListener!=D)F.addEventListener("load",t,!1);else if(typeof M.attachEvent!=D)y(M,"onload",t);else if("function"==typeof M.onload){var e=M.onload;M.onload=function(){e(),t()}}else M.onload=t}function r(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=v(I);e.setAttribute("type",O);var n=t.appendChild(e);if(n){var i=0;!function(){if(typeof n.GetVariable!=D){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),Y.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,o()}()}else o()}function o(){var t=G.length;if(t>0)for(var e=0;e<t;e++){var n=G[e].id,i=G[e].callbackFn,r={success:!1,id:n};if(Y.pv[0]>0){var a=m(n);if(a)if(!_(G[e].swfVersion)||Y.wk&&Y.wk<312)if(G[e].expressInstall&&u()){var o={};o.data=G[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,n,i)}else c(a),i&&i(r);else b(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(b(n,!0),i){var g=s(n);g&&typeof g.SetVariable!=D&&(r.success=!0,r.ref=g),i(r)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=D)e=n;else{var i=n.getElementsByTagName(I)[0];i&&(e=i)}return e}function u(){return!W&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,n,i){W=!0,k=i||null,w={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(T=d(r),S=null):(T=r,S=n),t.id=x,(typeof t.width==D||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==D||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?["Active"].concat("").join("X"):"PlugIn",o="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=D?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=r.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(t,e,n)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=v("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(I)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function h(t,e,n){var i,r=m(n);if(Y.wk&&Y.wk<312)return i;if(r)if(typeof t.id==D&&(t.id=n),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,i=m(t.id)}else{var l=v(I);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);r.parentNode.replaceChild(l,r),i=l}return i}function f(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function p(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?g(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function g(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function v(t){return F.createElement(t)}function y(t,e,n){t.attachEvent(e,n),V[V.length]=[t,e,n]}function _(t){var e=Y.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function E(t,e,n,i){if(!Y.ie||!Y.mac){var r=F.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(C=null,L=null),!C||L!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),C=r.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=D&&F.styleSheets.length>0&&(C=F.styleSheets[F.styleSheets.length-1]),L=a}Y.ie&&Y.win?C&&typeof C.addRule==I&&C.addRule(t,e):C&&typeof F.createTextNode!=D&&C.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function b(t,e){if(q){var n=e?"visible":"hidden";K&&m(t)?m(t).style.visibility=n:E("#"+t,"visibility:"+n)}}function A(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=D?encodeURIComponent(t):t}var T,S,k,w,C,L,D="undefined",I="object",R="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",x="SWFObjectExprInst",N="onreadystatechange",M=window,F=document,U=navigator,B=!1,j=[r],G=[],H=[],V=[],K=!1,W=!1,q=!0,Y=function(){var t=typeof F.getElementById!=D&&typeof F.getElementsByTagName!=D&&typeof F.createElement!=D,e=U.userAgent.toLowerCase(),n=U.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=D&&typeof U.plugins[R]==I)u=U.plugins[R].description,!u||typeof U.mimeTypes!=D&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M[["Active"].concat("Object").join("X")]!=D)try{var l=new(window[["Active"].concat("Object").join("X")])(P);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){Y.w3&&((typeof F.readyState!=D&&"complete"==F.readyState||typeof F.readyState==D&&(F.getElementsByTagName("body")[0]||F.body))&&t(),K||(typeof F.addEventListener!=D&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(N,function(){"complete"==F.readyState&&(F.detachEvent(N,arguments.callee),t())}),M==top&&!function(){if(!K){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!K)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var i=H.length,r=0;r<i;r++)p(H[r]);for(var a in Y)Y[a]=null;Y=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(t,e,n,i){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,G[G.length]=r,b(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,n,i,r,a,o,s,c,d,f){var p={success:!1,id:n};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&n&&i&&r&&a?(b(n,!1),e(function(){i+="",r+="";var e={};if(d&&typeof d===I)for(var g in d)e[g]=d[g];e.data=t,e.width=i,e.height=r;var m={};if(c&&typeof c===I)for(var v in c)m[v]=c[v];if(s&&typeof s===I)for(var y in s)typeof m.flashvars!=D?m.flashvars+="&"+y+"="+s[y]:m.flashvars=y+"="+s[y];if(_(a)){var E=h(e,m,n);e.id==n&&b(n,!0),p.success=!0,p.ref=E}else{if(o&&u())return e.data=o,void l(e,m,n,f);b(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,n){return Y.w3?h(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Y.w3&&u()&&l(t,e,n,i)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,n,i){Y.w3&&E(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return A(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return A(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var t=m(x);t&&T&&(t.parentNode.replaceChild(T,t),S&&(b(S,!0),Y.ie&&Y.win&&(T.style.display="block")),k&&k(w)),W=!1}}}}();t.exports=n},function(t,e,n){var i,r;i=[],r=function(){var t={AD_ID:"adId",AD_TYPE:"adType",CUE_TITLE:"cueTitle",CUE_TIME_DURATION:"cueTimeDuration",AD_URL:"adUrl",AD_VAST_URL:"adVastURL",AD_VAST:"adVast"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports={ABORT:"abort",CAN_PLAY:"canPlay",CAN_PLAY_THROUGH:"canPlayThrough",DATA_LOADING:"dataLoading",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOAD_START:"loadStart",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",STALLED:"stalled",STOP:"stop",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",WAITING:"waiting",PLAY_NOT_ALLOWED:"playbackNotAllowed"}},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(103),n(102)],r=function(t,e,n,i,r){var a=t([r],{constructor:function(t,e){this.target=t,this.config=e,this.adQuartile=new i,this._defaultSequence=-1,this._adsTrackingProgress=[],this._destroyAdToggle=!1},init:function(){this._destroyAdlisteners(),this.onAdPlaybackStatusListener=this.target.on("ad-playback-status",n.hitch(this,this._onAdPlaybackStatus)),this.inherited(arguments)},destroyAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&(this._destroyAdToggle=!0,this.html5OnDemand.skip()),this.html5OnDemand=null)},skipAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&this.html5OnDemand.skip(),this.html5OnDemand=null)},initAdListeners:function(t){this.html5OnDemand=t,this.html5OnDemand.initHTMLElementsStyle(this.html5OnDemand.videoNode),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(n.hitch(this,this._onAdPlaybackStatus)),this.clickTrackingElementClickedHandler=this.html5OnDemand.setClickTrackingElementClickedHandler(n.hitch(this,this._onClickTrackingElementClicked)),this.adPlaybackCompleteHandler=this.target.on("ad-playback-complete",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackDestroyHandler=this.target.on("ad-playback-destroy",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackErrorHandler=this.target.on("ad-playback-error",n.hitch(this,this._destroyAdlisteners))},getVastInlineAd:function(){return null},_onAdPlaybackStatus:function(t){if(this.html5Node=t.html5Node,"MEDIA_STARTED"==t.code)0==this.html5Node.currentTime&&this.emit(this.AD_MODULE_PLAYBACK_START,{id:this.playerNode,type:t.adServerType,error:!1});else if("MEDIA_TIME_UPDATE"==t.code){var e=Math.round(this.html5Node.currentTime),n=Math.round(this.html5Node.duration);this._checkVideoPlaybackQuartile(this._getTimePercent(e,n)),this.emit(this.AD_MODULE_COUNTDOWN,{countDown:n-e})}else"MEDIA_ENDED"!=t.code&&"MEDIA_ERROR"!=t.code||(this.html5OnDemand.stop(),this._destroyAdToggle?this.emit(this.AD_MODULE_PLAYBACK_DESTROY):this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{id:this.playerNode,type:t.adServerType,error:!1}),this._destroyAdToggle=!1,this._adsTrackingProgress=[],this.onAdPlaybackStatusListener.remove())},_onClickTrackingElementClicked:function(t){this.emit(this.AD_MODULE_CLICK_TRACKING,t)},_getTimePercent:function(t,e){return 0==e?0:(t/e).toFixed(2)},_checkVideoPlaybackQuartile:function(t){var e=Math.floor(4*t);void 0==this._adsTrackingProgress[e]&&(this._adsTrackingProgress[e]=!0,this.emit(this.AD_MODULE_QUARTILE,{id:this.playerNode,adQuartile:this.adQuartile.getQuartileByIndex(e),error:!1}))},_destroyAdlisteners:function(){this.playbackOnDemandStatushandler&&this.playbackOnDemandStatushandler.remove(),this.clickTrackingElementClickedHandler&&this.clickTrackingElementClickedHandler.remove(),this.adPlaybackCompleteHandler&&this.adPlaybackCompleteHandler.remove(),this.adPlaybackErrorHandler&&this.adPlaybackErrorHandler.remove(),this.onAdPlaybackStatusListener&&this.onAdPlaybackStatusListener.remove(),this.adPlaybackDestroyHandler&&this.adPlaybackDestroyHandler.remove()}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(t){this.id=t,this.inlineAd=null,this.wrapperAd=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.width=null,this.height=null,this.expandedWidth=null,this.expandedHeight=null,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.altText=null,this.adParameters=null,this.creativeView=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.vastAd=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{DELIVERY_STREAMING:"streaming",DELIVERY_PROGRESSIVE:"progressive",constructor:function(){this.url=null,this.id=null,this.delivery=null,this.bitrate=null,this.width=null,this.height=null,this.type=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minBitrate=null,this.maxBitrate=null,this.codec=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{IFRAME:"iframe",HTML:"html",STATIC:"static",SCRIPT:"script",OTHER:"other",constructor:function(t){this.name=t}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.urls=[],this.type=null},addUrls:function(t){for(var e=t.length,n=0;n<e;n++)this.urls.push(t[n])}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.clickThrough=null,this.clickTrackings=[],this.customClicks=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.vastAdTagURL=null,this.impression=null,this.impressions=[],this.error=null,this.trackingEvents=null,this.creatives=[],this.videoClicks=null},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).trackingEvents:this.trackingEvents},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(t==-1)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).videoClick:this.videoClicks}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={ID:"id",NODEKIND_ELEMENT:"element",INLINE:"InLine",WRAPPER:"Wrapper",AD_SYSTEM:"AdSystem",AD_TITLE:"AdTitle",DESCRIPTION:"Description",ERROR:"Error",IMPRESSION:"Impression",TRACKING_EVENTS:"TrackingEvents",COMPANION_ADS:"CompanionAds",COMPANION_CLICK_THROUGH:"CompanionClickThrough",LINEAR:"Linear",NON_LINEAR_ADS:"NonLinearAds",NON_LINEAR:"NonLinear",NON_LINEAR_CLICK_THROUGH:"NonLinearClickThrough",TRACKING:"Tracking",EVENT:"event",DURATION:"Duration",AD_ID:"AdID",MEDIA_FILES:"MediaFiles",MEDIA_FILE:"MediaFile",VIDEO_CLICKS:"VideoClicks",CLICK_THROUGH:"ClickThrough",CLICK_TRACKING:"ClickTracking",CUSTOM_CLICK:"CustomClick",COMPANION:"Companion",ALT_TEXT:"AltText",AD_PARAMETERS:"AdParameters",BITRATE:"bitrate",MIN_BITRATE:"minBitrate",MAX_BITRATE:"maxBitrate",CODEC:"codec",DELIVERY:"delivery",TYPE:"type",WIDTH:"width",HEIGHT:"height",EXPANDED_WIDTH:"expandedWidth",EXPANDED_HEIGHT:"expandedHeight",CREATIVE_TYPE:"creativeType",SEQUENCE:"sequence",SCALABLE:"scalable",MAINTAIN_ASPECT_RATIO:"maintainAspectRatio",API_FRAMEWORK:"apiFramework",IFRAME_RESOURCE:"IFrameResource",HTML_RESOURCE:"HTMLResource",STATIC_RESOURCE:"StaticResource",CREATIVE_VIEW:"creativeView",MIN_SUGGESTED_DURATION:"minSuggestedDuration",EXPIRES:"Expires",CATEGORY:"Category",SURVEY:"Survey",ADVERTISER:"Advertiser",AUDIO_INTERACTIONS:"AudioInteractions",LOGO_TILE:"logoTile",LOGO_TITLE:"logoTitle",LOGO_ARTIST:"logoArtist",LOGO_URL:"logoURL"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1)],r=function(t){var e=t([],{constructor:function(t){this.target=t},getTagValue:function(t,e){return 0==t.getElementsByTagName(e).length?null:a.textContent(t.getElementsByTagName(e)[0])},getDataAsArray:function(t,e,n){if(0==t.getElementsByTagName(e).length)return null;for(var i=t.getElementsByTagName(e)[0].childNodes,r=[],o=0;o<i.length;o++)i[o].nodeName==n&&r.push(a.textContent(i[o]));return r},trim:function(t){return void 0==t?null:t.replace(/^\s+|\s+$/g,"")}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(2)],r=function(t){var e={};return{objectToQuery:function(n){var i=encodeURIComponent,r=[];for(var a in n){var o=n[a];if(o!=e[a]){var s=i(a)+"=";if(t.isArray(o))for(var u=0,l=o.length;u<l;++u)r.push(s+i(o[u]));else r.push(s+i(o))}}return r.join("&")},queryToObject:function(e){for(var n,i,r,a=decodeURIComponent,o=e.split("&"),s={},u=0,l=o.length;u<l;++u)if(r=o[u],r.length){var c=r.indexOf("=");c<0?(n=a(r),i=""):(n=a(r.slice(0,c)),i=a(r.slice(c+1))),"string"==typeof s[n]&&(s[n]=[s[n]]),t.isArray(s[n])?s[n].push(i):s[n]=i}return s}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(54)],r=function(t){return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(34),n(24),n(32),n(51),n(6),n(2),n(25)],r=function(t,e,n,i,r,a,o,s){function u(t){return c(t)}function l(t){return t.data||t.text}t.deepCopy=function(e,n){for(var i in n){var r=e[i],a=n[i];r!==a&&(r&&"object"==typeof r&&a&&"object"==typeof a?t.deepCopy(r,a):e[i]=a)}return e},t.deepCreate=function(e,n){n=n||{};var i,r,a=o.delegate(e);for(i in e)r=e[i],r&&"object"==typeof r&&(a[i]=t.deepCreate(r,n[i]));return t.deepCopy(a,n)};var c=Object.freeze||function(t){return t};t.deferred=function(r,a,d,h,f,p){function g(t){throw t.response=r,t}var m=new i(function(t){return a&&a(m,r),t&&(t instanceof e||t instanceof n)?t:new n("Request canceled",r)});m.response=r,m.isValid=d,m.isReady=h,m.handleResponse=f;var v=m.then(u).otherwise(g);t.notify&&v.then(o.hitch(t.notify,"emit","load"),o.hitch(t.notify,"emit","error"));var y=v.then(l),_=new s;for(var E in y)y.hasOwnProperty(E)&&(_[E]=y[E]);return _.response=v,c(_),p&&m.then(function(t){p.call(m,t)},function(t){p.call(m,r,t)}),m.promise=_,m.then=_.then,m},t.addCommonMethods=function(t,e){a.forEach(e||["GET","POST","PUT","DELETE"],function(e){t[("DELETE"===e?"DEL":e).toLowerCase()]=function(n,i){return i=o.delegate(i||{}),i.method=e,t(n,i)}})},t.parseArgs=function(t,e,n){var i=e.data,a=e.query;return i&&!n&&"object"==typeof i&&(e.data=r.objectToQuery(i)),a?("object"==typeof a&&(a=r.objectToQuery(a)),e.preventCache&&(a+=(a?"&":"")+"request.preventCache="+ +new Date)):e.preventCache&&(a="request.preventCache="+ +new Date),t&&a&&(t+=(~t.indexOf("?")?"&":"?")+a),{url:t,options:e,getHeader:function(t){return null}}},t.checkStatus=function(t){return t=t||0,t>=200&&t<300||304===t||1223===t||!t}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(34),n(88),n(87),n(53),n(4)],r=function(t,e,n,i,r){function a(e,r){var a=e.xhr;if(e.status=e.xhr.status,e.text=a.responseText,"xml"===e.options.handleAs&&(e.data=a.responseXML),!r)try{n(e)}catch(t){r=t}r?this.reject(r):i.checkStatus(a.status)?this.resolve(e):(r=new t("Unable to load "+e.url+" status: "+a.status,e),this.reject(r))}function o(t){return this.xhr.getResponseHeader(t)}function s(n,p,g){var m=i.parseArgs(n,i.deepCreate(f,p),r("native-formdata")&&p&&p.data&&p.data instanceof FormData);n=m.url,p=m.options;var v,y=function(){v&&v()},_=i.deferred(m,d,u,l,a,y),E=m.xhr=s._create();if(!E)return _.cancel(new t("XHR was not created")),g?_:_.promise;m.getHeader=o,c&&(v=c(E,_,m));var b=p.data,A=!p.sync,T=p.method;try{E.open(T,n,A,p.user||h,p.password||h),p.withCredentials&&(E.withCredentials=p.withCredentials);var S=p.headers,k="application/x-www-form-urlencoded";if(S)for(var w in S)"content-type"===w.toLowerCase()?k=S[w]:S[w]&&E.setRequestHeader(w,S[w]);k&&k!==!1&&E.setRequestHeader("Content-Type",k),S&&"X-Requested-With"in S||E.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.notify&&i.notify.emit("send",m,_.promise.cancel),E.send(b)}catch(t){_.reject(t)}return e(_),E=null,g?_:_.promise}r.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),r.add("dojo-force-activex-xhr",function(){return r("activex")&&!document.addEventListener&&"file:"===window.location.protocol}),r.add("native-xhr2",function(){if(r("native-xhr")){var t=new XMLHttpRequest;return"undefined"!=typeof t.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof t.upload)}}),r.add("native-formdata",function(){return"function"==typeof FormData});var u,l,c,d;r("native-xhr2")?(u=function(t){return!this.isFulfilled()},d=function(t,e){e.xhr.abort()},c=function(e,n,i){function r(t){n.handleResponse(i)}function a(e){var r=e.target,a=new t("Unable to load "+i.url+" status: "+r.status,i);n.handleResponse(i,a)}function o(t){t.lengthComputable&&(i.loaded=t.loaded,i.total=t.total,n.progress(i))}return e.addEventListener("load",r,!1),e.addEventListener("error",a,!1),e.addEventListener("progress",o,!1),function(){e.removeEventListener("load",r,!1),e.removeEventListener("error",a,!1),e.removeEventListener("progress",o,!1),e=null}}):(u=function(t){return t.xhr.readyState},l=function(t){return 4===t.xhr.readyState},d=function(t,e){var n=e.xhr,i=typeof n.abort;"function"!==i&&"object"!==i&&"unknown"!==i||n.abort()});var h,f={data:null,query:null,sync:!1,method:"GET"};if(s._create=function(){throw new Error("XMLHTTP not available")},r("native-xhr")&&!r("dojo-force-activex-xhr"))s._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),s._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),s._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}return i.addCommonMethods(s),s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(27)],r=function(t,e){"use strict";var n=document.createElement("div");t.add("dom-qsa2.1",!!n.querySelectorAll),t.add("dom-qsa3",function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(t){}});var i,r="./acme",a="./lite";return{load:function(n,o,s,u){var l=e;if(n="default"==n?t("config-selectorEngine")||"css3":n,n="css2"==n||"lite"==n?a:"css2.1"==n?t("dom-qsa2.1")?a:r:"css3"==n?t("dom-qsa3")?a:r:"acme"==n?r:(l=o)&&n,"?"==n.charAt(n.length-1)){n=n.substring(0,n.length-1);var c=!0}return c&&(t("dom-compliant-qsa")||i)?s(i):void l([n],function(t){"./lite"!=n&&(i=t),s(t)})}}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports=void 0},function(t,e){t.exports={gettingStationInformation:"Getting station information...",paused:"Paused",onAir:"On Air",disconnected:"Disconnected",streamUnavailable:"Stream unavailable",buffering:"Buffering",connecting:"Live stream connection in progress...",reconnecting:"Live stream connection in progress...",seekfailed:"Seek failed",seekinvalidtime:"Impossible to seek due to invalid time",ended:"Ended",pause:"Paused",play:"Playing",stop:"Stopped",error:"Error",streamGeoBlocked:"Sorry, this content is not available in your area",stationNotFound:"Station not found",flashPluginOutOfDate:"Your Flash plugin version detected is out of date. Minimum version required is: 10.2.0",browserNotSupported:"Your browser does not support HTML5 feature",embedFailed:"The embed failed!",playbackNotAllowed:"Playback of media in the current context or situation is not allowed",tritonListenLink:"The OnDemand player cannot be used with Triton listen links"}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function o(){g&&f&&(g=!1,f.length?p=f.concat(p):m=-1,p.length&&s())}function s(){if(!g){var t=r(o);g=!0;for(var e=p.length;e;){for(f=p,p=[];++m<e;)f&&f[m].run();m=-1,e=p.length}f=null,g=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,d,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(t){d=i}}();var f,p=[],g=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||g||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){var i,r,a=n(21),o=a.getProtocol();i=[n(1)],r=function(t){var e=t([],{ENDPOINT:o+"//runspot4.tritondigital.com/RunSpotV4.svc/GetVASTAd?&StationID={sid}&MediaFormat={mediaformat}&RecordImpressionOnCall={recordimpressiononcall}&AdMinimumDuration={adminimumduration}&AdMaximumDuration={admaximumduration}&AdLevelPlacement={adlevelplacement}&AdCategory={adcategory}",mediaAdBlankFiles:["blank.flv","9483.mp3"],getVastUri:function(t,e,n,i,r,a,o,s){var n=void 0!=n?n:"21",i=void 0!=i?i:"1",r=void 0!=r&&r,a=void 0!=a?a:"0",o=void 0!=o?o:"900",s=void 0!=s?s:"1",u=void 0!=t?t:this.ENDPOINT;return u=u.replace("{sid}",e),u=u.replace("{mediaformat}",parseInt(n)),u=u.replace("{adlevelplacement}",parseInt(i)),u=u.replace("{recordimpressiononcall}",r),u=u.replace("{adminimumduration}",parseInt(a)),u=u.replace("{admaximumduration}",parseInt(o)),u=u.replace("{adcategory}",parseInt(s))}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={HLS_TRACK_ID:"hlsTrackId",HLS_SEGMENT_ID:"hlsSegmentId"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){var t={CUE_TITLE:"cueTitle",ARTIST_NAME:"artistName",ALBUM_NAME:"albumName",PROGRAM_ID:"trackID",CUE_TIME_DURATION:"cueTimeDuration",CUE_TIME_START:"cueTimeStart",TRACK_ID:"trackID",NOW_PLAYING_URL:"nowplayingURL",TRACK_COVER_URL:"coverURL"};return t}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){t.exports={AUDIO:"Audio",VIDEO:"Video"}},function(t,e){/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(t){function e(){this.data={}}function n(){this.listeners=new e}function i(t){c(function(){throw t},0)}function r(t){this.type=t,this.target=void 0}function a(t,e){r.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function o(t,e){var n=t;return n!==n&&(n=e),n<w?w:n>C?C:n}function s(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){i(t)}}function u(e,i){function u(){G=_,void 0!=F&&(F.abort(),F=void 0),0!==U&&(d(U),U=0),0!==B&&(d(B),B=0),O.readyState=_}function l(t){var n="";if(G===y||G===v)try{n=F.responseText}catch(t){}var i=void 0,l=!1;if(G===v){var h=0,f="",p=void 0;if("contentType"in F)""!==t&&"error"!==t&&(h=200,f="OK",p=F.contentType);else try{h=F.status,f=F.statusText,p=F.getResponseHeader("Content-Type")}catch(t){h=0,f="",p=void 0}if(void 0==p&&(p=""),0===h&&""===f&&"load"===t&&""!==n&&(h=200,f="OK",""===p)){var g=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e);void 0!=g&&(p=g[1])}if(200===h&&k.test(p)){if(G=y,N=!0,x=I,O.readyState=y,i=new r("open"),O.dispatchEvent(i),s(O,O.onopen,i),G===_)return}else if(0!==h&&(200!==h||""!==p)){var w="";w=200!==h?"EventSource's response has a status "+h+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+p.replace(/\s+/g," ")+". Aborting the connection.",c(function(){throw new Error(w)},0),l=!0}}if(G===y){n.length>j&&(N=!0);for(var L=j-1,D=n.length,M="\n";++L<D;)if(M=n.charAt(L),q===E&&"\n"===M)q=b;else if(q===E&&(q=b),"\r"===M||"\n"===M){if("data"===Y?H.push(z):"id"===Y?V=z:"event"===Y?K=z:"retry"===Y?(I=o(Number(z),I),x=I):"heartbeatTimeout"===Y&&(R=o(Number(z),R),0!==U&&(d(U),U=c(W,R))),z="",Y="",q===b){if(0!==H.length&&(P=V,""===K&&(K="message"),i=new a(K,{data:H.join("\n"),lastEventId:V}),O.dispatchEvent(i),"message"===K&&s(O,O.onmessage,i),G===_))return;H.length=0,K=""}q="\r"===M?E:b}else q===b&&(q=A),q===A?":"===M?q=T:Y+=M:q===T?(" "!==M&&(z+=M),q=S):q===S&&(z+=M);j=D}G!==y&&G!==v||!("load"===t||"error"===t||l||j>1048576||0===U&&!N)?0===U&&(N=!1,U=c(W,R)):(l?u():(""!==t||0!==U||N||c(function(){throw new Error("No activity within "+R+" milliseconds. Reconnecting.")},0),G=m,F.abort(),0!==U&&(d(U),U=0),x>16*I&&(x=16*I),x>C&&(x=C),U=c(W,x),x=2*x+1,O.readyState=v),i=new r("error"),O.dispatchEvent(i),s(O,O.onerror,i))}function h(){l("progress")}function f(){l("load")}function w(){l("error")}function L(){l(4===F.readyState?0===F.status?"error":"load":"progress")}e=e.toString();var D=p&&void 0!=i&&Boolean(i.withCredentials),I=o(1e3,0),R=o(6e10,0),P="",O=this,x=I,N=!1,M=void 0!=i&&void 0!=i.Transport?i.Transport:g,F=new M,U=0,B=0,j=0,G=m,H=[],V="",K="",W=void 0,q=b,Y="",z="";"readyState"in F&&void 0!=t.opera&&(B=c(function t(){3===F.readyState&&l("progress"),B=c(t,500)},0)),W=function(){if(U=0,G!==m)return void l("");if((!("ontimeout"in F)||"sendAsBinary"in F||"mozAnon"in F)&&void 0!=t.document&&void 0!=t.document.readyState&&"complete"!==t.document.readyState)return void(U=c(W,4));F.onload=f,F.onerror=w,"onabort"in F&&(F.onabort=w),"onprogress"in F&&(F.onprogress=h),"onreadystatechange"in F&&(F.onreadystatechange=L),N=!1,U=c(W,R),j=0,G=v,H.length=0,K="",V=P,z="",Y="",q=b;var n=e.slice(0,5);n="data:"!==n&&"blob:"!==n?e+((e.indexOf("?",0)===-1?"?":"&")+"lastEventId="+encodeURIComponent(P)+"&r="+(Math.random()+1).toString().slice(2)):e,F.open("GET",n,!0),"withCredentials"in F&&(F.withCredentials=D),"responseType"in F&&(F.responseType="text"),"setRequestHeader"in F&&F.setRequestHeader("Accept","text/event-stream"),F.send(void 0)},n.call(this),this.close=u,this.url=e,this.readyState=v,this.withCredentials=D,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,W()}function l(){this.CONNECTING=v,this.OPEN=y,this.CLOSED=_}var c=t.setTimeout,d=t.clearTimeout;e.prototype.get=function(t){return this.data[t+"~"]},e.prototype.set=function(t,e){this.data[t+"~"]=e},e.prototype.delete=function(t){delete this.data[t+"~"]},n.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this.listeners,r=n.get(e);if(void 0!=r)for(var a=r.length,o=-1,s=void 0;++o<a;){s=r[o];try{s.call(this,t)}catch(t){i(t)}}},n.prototype.addEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);void 0==i&&(i=[],n.set(t,i));for(var r=i.length;--r>=0;)if(i[r]===e)return;i.push(e)},n.prototype.removeEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);if(void 0!=i){for(var r=i.length,a=[],o=-1;++o<r;)i[o]!==e&&a.push(i[o]);0===a.length?n.delete(t):n.set(t,a)}},a.prototype=r.prototype;var h=t.XMLHttpRequest,f=t.XDomainRequest,p=void 0!=h&&void 0!=(new h).withCredentials,g=p||void 0!=h&&void 0==f?h:f,m=-1,v=0,y=1,_=2,E=3,b=4,A=5,T=6,S=7,k=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,w=1e3,C=18e6;l.prototype=n.prototype,u.prototype=new l,l.call(u),p&&(u.prototype.withCredentials=void 0);var L=function(){return void 0!=t.EventSource&&"withCredentials"in t.EventSource.prototype};void 0!=g&&(void 0==t.EventSource||p&&!L())&&(t.NativeEventSource=t.EventSource,t.EventSource=u)}("undefined"!=typeof window?window:this)},function(t,e,n){var i,r,a=n(16),o=n(15);i=[n(1),n(2),n(12),n(61),n(38),n(10),n(14)],r=function(t,e,n,i,r,s,u){var l=t([n],{cuePointMap:{timestamp:"timestamp",type:"type",cue_title:i.CUE_TITLE,track_artist_name:i.ARTIST_NAME,track_album_name:i.ALBUM_NAME,program_id:i.PROGRAM_ID,cue_time_duration:i.CUE_TIME_DURATION,cue_time_start:i.CUE_TIME_START,track_id:i.TRACK_ID,track_nowplaying_url:i.NOW_PLAYING_URL,track_cover_url:i.TRACK_COVER_URL,ad_id:r.AD_ID,ad_type:r.AD_TYPE,cue_title:r.CUE_TITLE,cue_time_duration:r.CUE_TIME_DURATION,ad_url:r.AD_URL},constructor:function(t,e){this.inherited(arguments),this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"NowPlayingApi",module:this})},load:function(t){var n=new u,i=this._getRequestArgs(t.hd?t.mount+"AAC":t.mount,t.numberToFetch,t.eventType||"track",t.mode),r=new s;return r.request(this.platform.endpoint.nowPlayingHistory,{mount:t.mount,mode:t.mode||"songHistory",deferred:n},i,e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)),n},_onLoadError:function(t,e){return console.error("nowPlayingApi::_onLoadError - mount="+t.mount+" - error="+e),this.emit("nowplaying-api-error",{mount:t.mount,error:t.error}),t.deferred.reject({mount:t.mount,error:t.error})},_onLoadComplete:function(t,e){e=e.getElementsByTagName("nowplaying-info");for(var n,i,r,o,s,u,l=[],c=0;c<e.length;c++){s=e[c].getAttribute("type"),u=e[c].getAttribute("timestamp"),i=e[c].childNodes,n={parameters:{}},n[this.cuePointMap.type]=s,n[this.cuePointMap.timestamp]=parseInt(u);for(var d=0;d<i.length;d++)r=i[d].getAttribute("name"),o=a.textContent(i[d]),void 0!=this.cuePointMap[r]&&(n[this.cuePointMap[r]]=o),n.parameters[r]=o;l.push(n)}l=l.sort(function(t,e){return t.cueTimeStart-e.cueTimeStart}).reverse(),this._emitNotificationByMode(t.mount,t.mode,l),t.deferred.resolve({mount:t.mount,list:l})},_emitNotificationByMode:function(t,e,n){switch(e){case"songHistory":this._emitSongHistoryNotification(t,n);break;case"nowPlaying":this._emitNowPlayingNotification(t,n)}},_emitSongHistoryNotification:function(t,e){e.length>0?this.emit("list-loaded",{mount:t,list:e}):this.emit("list-empty",{mount:t})},_emitNowPlayingNotification:function(t,e){e.length>0?this.emit("cue-point",{mount:t,cuePoint:e[0]}):this.emit("cue-point-empty",{mount:t})},_getRequestArgs:function(t,e,n,i){return{handleAs:"xml",preventCache:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"},query:{mountName:t,numberToFetch:"nowPlaying"==i?1:e,eventType:n}}}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.adID=null,this.sequence=null,this.linearElement=null,this.companionAds=[],this.nonLinearAds=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.creatives=[],this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){var e=this._getLinearElement();null!=e&&(e.trackingEvents=e.trackingEvents.concat(t))},addWrapperLinearVideoClickTracking:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.clickTrackings=e.videoClick.clickTrackings.concat(t))},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},addCustomClicks:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.customClicks=e.videoClick.customClicks.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement()?this._getLinearElement().trackingEvents:null},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=!1,o=r.length,s=0;s<o;s++)if(a=r[s].width==t&&r[s].height==e,1!=a){if(null==n)return r[s];if(companionAd.resourceType==n)return r[s]}return null},getCompanionAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].companionAds.length>0){if(t==-1)return this.creatives[n].companionAds;if(this.creatives[n].sequence==t)return this.creatives[n].companionAds}},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).mediaFiles:null},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this._getLinearElement(e).mediaFiles[t]?this._getLinearElement(e).mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).videoClick?this._getLinearElement(t).videoClick:null},getNonLinearAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].nonLinearAds.length>0){if(t==-1)return this.creatives[n].nonLinearAds;if(this.creatives[n].sequence==t)return this.creatives[n].nonLinearAds}},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).duration?this._getLinearElement(t).duration:null},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(t==-1)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.duration=null,this.trackingEvents=[],this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.adParameters=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minSuggestedDuration=null}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18);i=[n(1)],r=function(t){var e=t([],{constructor:function(){var t=a.getLocalization();this.flashModuleMap={flashPluginOutOfDate:{code:100,message:t.flashPluginOutOfDate}},this.html5ModuleMap={browserNotSupported:{code:101,message:t.browserNotSupported},tritonListenLink:{code:102,message:t.tritonListenLink}}}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(4),n(3),n(7),n(12),n(26),n(51)],r=function(t,e,n,i,r,a,o,s){var u=t([a],{TIME_OUT_MESSAGE_DELAY:3e4,constructor:function(t,e,n){this.type=n,this.volume=1,this.params=null,this.connection=null,this._track=null,this._currentLiveApiParams=null,this.isLiveStream=!1,this.lowActivated=!1,this.playAdCalled=!1,this.mount=null,this.station=null,this.__resetBackOff(),t&&t.playerId&&(this.playerNode=r.byId(t.playerId,document)),t&&t.mount&&(this.mount=t.mount),t&&t.station&&(this.station=t.station),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.__initSbmConfig(t)},start:function(){i(this.target,"stream-start",e.hitch(this,this.__onStreamStart)),i(this.target,"stream-stop",e.hitch(this,this.__onStreamStop)),i(this.target,"stream-fail",e.hitch(this,this.__onStreamFailed)),i(this.target,"media-playback-started",e.hitch(this,this._onMediaPlaybackStarted)),i(this.target,"media-playback-error",e.hitch(this,this._onMediaPlaybackError)),i(this.target,"ad-break-cue-point",e.hitch(this,this.__onAdBreakCuePoint))},play:function(t){if(null!=t){if(this.params=t,void 0!=t.file&&""!=t.file)return this.isLiveStream=!1,void this.__playMedia(t);this._currentLiveApiParams=t,this.connectionIterator?(this.isLiveStream=!0,this.__connect(this.connectionIterator.current())):console.error("techModule::play - connectionIterator is not defined")}},setConnectionIterator:function(t){this.connectionIterator=t},currentConnection:function(){return this.connection},currentTrack:function(){return this._track},setCurrentTrack:function(t){this._track=t},_onMediaPlaybackStarted:function(t){},_onMediaPlaybackError:function(){},__onStreamStart:function(){this.__resetBackOff(),this._currentLiveApiParams&&this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},__onStreamStop:function(){this.breakTimer&&clearInterval(this.breakTimer),this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer)},__onStreamFailed:function(){console.error("techModule::__onStreamFailed"),this.__reconnect()},__onStreamUnmute:function(){console.info("techModule::__onStreamUnmute"),this.connectionIterator&&this.__reconnect()},__reconnect:function(){if(!this.connectionIterator)return void console.error("techModule::__reconnect - connectionIterator is not defined");if(this.connectionIterator.hasLooped()){var t=Math.min(this.backOffDelay<<this.backOffRetry++,6e4);this.backOffTimer=setTimeout(e.hitch(this,this.__onBackOffTimeOut),t)}else this.__connect(this.connectionIterator.next())},__onBackOffTimeOut:function(){this.connectionIterator.reset(),this.__connect(this.connectionIterator.next())},__resetBackOff:function(){this.backOffRetry=0,this.backOffDelay=4e3*Math.random()+1e3,this.backOffTimer&&clearTimeout(this.backOffTimer)},__playMedia:function(t){null!=t&&(1==this.config.adStitcher&&t.trackingParameters&&(t.file+=(t.file.indexOf("?")!=-1?"&":"?")+s.objectToQuery(t.trackingParameters).replace(/\./g,"%2E")),this.playMedia({url:t.file}))},__connect:function(t){if(null!=t){if(this.connection=t,null!=this.connection&&(this.mount=this.connection.mount?this.connection.mount:null),null!=this._currentLiveApiParams&&(this.station=this._currentLiveApiParams.station?this._currentLiveApiParams.station:null),this.connection.isGeoBlocked&&this.connection.alternateContent)return void o.publish("api/request","get-alternate-content",this.connection.alternateContent);var e=this._currentLiveApiParams.trackingParameters||{};this.lowActivated&&this.connection.isAudioAdaptive&&(e.utags="low-bw");var n=this.connection.mimeType,i=this.connection.url;e&&(i=i+"?"+s.objectToQuery(e)),this.emit("stream-select"),this.playStream({url:i,mimeType:n,format:this.connection.format,timeShift:this._currentLiveApiParams.timeShift,uuidEnabled:this.connection.uuidEnabled,sendPageUrl:this.connection.sendPageUrl,hasVideo:this.connection.hasVideo,type:this.connection.type,mount:this.connection.mount,sbmConfig:this.__getSbmData(),isHLS:this.connection.isHLS,isHLSTS:this.connection.isHLSTS})}},__getSbmData:function(){return null!=this._sbmConfig&&this._sbmConfig.active&&null!=this.connection.metadata&&null!=this.connection.metadata.sseSideband?(this._sbmConfig.info=this.connection.metadata.sseSideband,this._sbmConfig):this._sbmConfig},__onAdBreakCuePoint:function(t){var e=t.data.adBreakData;this.breakTimer&&clearInterval(this.breakTimer),e.duration>0&&this.__initBreakTimer(e.duration)},__initBreakTimer:function(t){this.breakTimer=setInterval(e.hitch(this,this.__onBreakTimerComplete),t)},__onBreakTimerComplete:function(){this.breakTimer&&clearInterval(this.breakTimer),this.emit("ad-break-cue-point-complete")},__initSbmConfig:function(t){t.sbm&&!t.sbm.active?this._sbmConfig={active:!1,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:t.sbm&&t.sbm.active?this._sbmConfig={active:!0,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:"Html5"==this.type?this._sbmConfig={active:!0,aSyncCuePointFallback:!0}:this._sbmConfig=null},prepare:function(t){"adModule"===t&&(this.playAdCalled=!0)},playStream:function(t){},pause:function(){},stop:function(){this.isLiveStream?(this.__resetBackOff(),this.stopStream()):this.stopMedia()},resume:function(){},seek:function(t){1==this.isLiveStream?this.seekStream(t):this.seekMedia(t)},seekLive:function(){},restartConnectionTimeOut:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},setVolume:function(t){this.volume=t},getVolume:function(){return this.volume},mute:function(){1==this.isLiveStream?this.muteStream():this.muteMedia()},unMute:function(){1==this.isLiveStream?this.unMuteStream():this.unMuteMedia()},playAd:function(t,e){this.playAdCalled=!0},skipAd:function(){},destroyAd:function(){},reloadSyncBanner:function(){},__onTimeOutAlert:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutReached),this.TIME_OUT_MESSAGE_DELAY),this.emit("timeout-alert")},__onTimeOutReached:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.stopStream(),this.emit("timeout-reach")}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=(n(20),n(36),n(39));n(22);i=[n(1),n(3),n(13),n(6),n(2),n(19),n(86),n(4)],r=function(t,e,n,i,r,o,s,u){var l=t([n],{MAX_CONNECTION_LATENCY:5e3,constructor:function(){this.inherited(arguments),this.mediaNode=null,this.audioSource=null,this.isStopped=!0,this.isPaused=!0,this.listeners=[],this.volume=1,this._onCanPlayHandler=r.hitch(this,this._onCanPlay),this._onCanPlayThroughHandler=r.hitch(this,this._onCanPlayThrough),this._onLoadDataHandler=r.hitch(this,this._onLoadData),this._onLoadStartHandler=r.hitch(this,this._onLoadStart),this._onWaitingHandler=r.hitch(this,this._onWaiting),this._onEmptiedHandler=r.hitch(this,this._onEmptied),this._onAbortHandler=r.hitch(this,this._onAbort),this._onErrorHandler=r.hitch(this,this._onError),this._onLoadedMetadataHandler=r.hitch(this,this._onLoadedmetadata),this._onTimeUpdateHandler=r.hitch(this,this._onTimeupdate),this._onEndedHandler=r.hitch(this,this._onEnded),this._onPlayHandler=r.hitch(this,this._onPlay),this._onPauseHandler=r.hitch(this,this._onPause),this._onProgressHandler=r.hitch(this,this._onProgress),this._onStalledHandler=r.hitch(this,this._onStalled),this._onSuspendHandler=r.hitch(this,this._onSuspend)},play:function(t){t&&(this.isStopped||this.isPaused)&&(this.params=t,this.mediaNode=t.mediaNode,this.isStopped=!1,this.isPaused=!1,this._loadMedia(t))},stop:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.mediaNode.pause(),this._emptyMediaNode())},skip:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.emit("html5-playback-status",{type:a.ENDED}),this.mediaNode.pause())},pause:function(){this.isPaused=!0,void 0!=this.mediaNode&&this.mediaNode.pause()},resume:function(){var t=this;this.isPaused=!1,void 0!=this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})})},seek:function(t){void 0!=this.mediaNode&&(this.mediaNode.currentTime=t,this.isPaused&&this.resume())},setVolume:function(t){void 0!=this.mediaNode&&(this.volume=t,this.mediaNode.volume=t,this.mediaNode.muted&&t>0&&(this.mediaNode.muted=!1))},mute:function(){void 0!=this.mediaNode&&(this.mediaNode.muted=!0)},unMute:function(){void 0!=this.mediaNode&&(this.mediaNode.muted=!1)},_loadMedia:function(t){this.mediaNode.src=t.url,this._initMediaListeners(t.isLive),this.mediaNode.load()},_emptyMediaNode:function(){this.mediaNode.src="",this.mediaNode.load()},_removeMediaSource:function(){o.has(this.audioSource,"src")&&o.remove(this.audioSource,"src"),o.has(this.mediaNode,"src")&&o.remove(this.mediaNode,"src")},_onLoadData:function(){var t=this;this.isStopped||this.isPaused||(u("mozilla")&&this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}),this.emit("html5-playback-status",{type:a.DATA_LOADING,mediaNode:this.mediaNode}))},_onCanPlay:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}))},_onCanPlayThrough:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY_THROUGH,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}))},_onWaiting:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.WAITING,mediaNode:this.mediaNode})},_onEmptied:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onAbort:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.ABORT,mediaNode:this.mediaNode})},_onError:function(t){return this._removeMediaListeners(),this.isStopped||this.isPaused?void this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):void this.emit("html5-playback-status",{type:3==this.mediaNode.readyState?a.STOP:a.ERROR,mediaNode:this.mediaNode})},_onLoadedmetadata:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onTimeupdate:function(){this.isStopped||this.isPaused||(this.mediaNode.currentTime.toFixed(1)==this.mediaNode.duration.toFixed(1)?(this.isStopped=!0,this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode})):this.emit("html5-playback-status",{type:a.TIME_UPDATE,mediaNode:this.mediaNode}))},_onLoadStart:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.LOAD_START,mediaNode:this.mediaNode})},_onEnded:function(){this.isStopped||(this._removeMediaListeners(),this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode}))},_onPlay:function(){this.emit("html5-playback-status",{type:a.PLAY,mediaNode:this.mediaNode})},_onPause:function(){this.isStopped?this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):this.emit("html5-playback-status",{type:a.PAUSE,mediaNode:this.mediaNode})},_initMediaListeners:function(t){this._errorHandler=e(this.mediaNode,"error",this._onErrorHandler),this._loadDataHandler=e(this.mediaNode,"loadeddata",this._onLoadDataHandler),this._loadStartHandler=e(this.mediaNode,"loadstart",this._onLoadStartHandler),this._canPlayHandler=e(this.mediaNode,"canplay",this._onCanPlayHandler),this._canPlayThroughHandler=e(this.mediaNode,"canplaythrough",this._onCanPlayThroughHandler),this._waitingHandler=e(this.mediaNode,"waiting",this._onWaitingHandler),this._emptiedHandler=e(this.mediaNode,"emptied",this._onEmptiedHandler),this._abortHandler=e(this.mediaNode,"abort",this._onAbortHandler),this._endedHandler=e(this.mediaNode,"ended",this._onEndedHandler),this._playHandler=e(this.mediaNode,"play",this._onPlayHandler),this._pauseHandler=e(this.mediaNode,"pause",this._onPauseHandler),this._loadedMetadataHandler=e(this.mediaNode,"loadedmetadata",this._onLoadedMetadataHandler),this._timeUpdateHandler=t?null:e(this.mediaNode,"timeupdate",this._onTimeUpdateHandler)},_removeMediaListeners:function(){this.params.mediaNode.src="",this._errorHandler.remove(),this._loadDataHandler.remove(),this._loadStartHandler.remove(),this._canPlayHandler.remove(),this._canPlayThroughHandler.remove(),this._waitingHandler.remove(),this._emptiedHandler.remove(),this._abortHandler.remove(),this._endedHandler.remove(),this._playHandler.remove(),this._pauseHandler.remove(),this._loadedMetadataHandler.remove(),this._timeUpdateHandler&&this._timeUpdateHandler.remove()}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){function i(t,e,n){return"string"==typeof e&&(e=[e]),h.isUndefined(n)&&(n=!1),t.filter(function(t){return!(h.isEmpty(t.tags)&&n)||h.some(e,function(e){return t.tags.indexOf(e)!==-1})})}function r(t){return h.sortBy(t,function(t){return t.mediaFormat.isAudioAdaptive?0:1},function(t){return t.mediaFormat.audioTracks[0].isAAC?0:1})}function a(t){var e=h.groupBy(t,function(t){var e;return e=t.mediaFormat.isAudioAdaptive?"audioAdaptive":t.mediaFormat.audioTracks[0].isAAC?"aac":"mp3"}),n=h.keys(e);return h.flatMap(n,function(t){var n=e[t];return h.orderBy(n,"bitRate","desc")})}function o(t,e){return h.isArray(e)||(e=[e]),h.forEach(t,function(t){var n=t.transports.filter(function(n){return!h.some(e,function(e){return e.transport===n.transport&&t.mediaFormat.audioTracks[0].codec.indexOf(e.codec)>-1})});t.transports=n}),t.filter(function(t){return!h.isEmpty(t.transports)})}function s(t){return h.filter(t,function(t){return!t.mediaFormat.isAudioAdaptive})}function u(t){return o(t,[{transport:"hls",codec:"aac"},{transport:"hlsts",codec:"aac"}])}function l(t,e){return o(t,[{transport:e?"hls":"hlsts",codec:"aac"},{transport:"http",codec:"aac"},{transport:"http",codec:"mp3"}])}function c(t,e){var n=h.map(e,function(t){return function(e){return e.transport===t?0:1}});return h.forEach(t,function(t){var e=t.transports,i=h.sortBy(e,n);t.transports=i}),t}function d(t,e,n){if("flash"==n.toLowerCase())t=s(t),t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]);else switch(e.os.family){case"iOS":t=o(t,{transport:"hlsts",codec:"aac"}),"Chrome Mobile"===e.name&&(t=o(t,[{transport:"hls",codec:"aac"}])),t=c(t,["hls","http"]);break;case"Android":t=c(t,["hlsts","http"]);break;default:switch(e.name){case"Safari":t=o(t,{transport:"hlsts",codec:"aac"}),t=c(t,["hls","http"]);break;case"IE":t="11.0"===e.version&&parseInt(e.os.version)>7?o(t,[{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]):o(t,[{transport:"hls",codec:"aac"},{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;case"Microsoft Edge":t=o(t,[{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;default:t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]),t=c(t,["hls","http"])}}return t}var h=n(8);t.exports={filterMountPoints:function(t,e,n,o,c,h,f,p,g){return!h||p||g||(t=u(t)),f&&(t=s(t)),t=i(t,o,c),t=p?l(t):g?l(t,!0):d(t,e,n),t=a(t),t=r(t)},filterByTag:i,sortMountpoints:r}},function(t,e,n){var i,r;i=[n(1),n(6),n(2),n(10),n(31),n(75),n(74),n(3)],r=function(t,e,n,i,r,a,o,s){var u=t([r],{constructor:function(t,e){this.albumData=null,this.inherited(arguments)},getArtists:function(){return this.albumData.artists},getArtistId:function(){return this.getArtists()[0].id},getDuration:function(){return this.albumData.duration},getGenres:function(){for(var t=[],e=0;e<this.albumData.genres.length;e++)t.push(this.albumData.genres[e].name);return t},getTitle:function(){return null!=this.albumData?this.albumData.title:this.data.title},getLabel:function(){return this.data.label},getReleaseDate:function(){return null!=this.albumData?this.albumData.release:this.data.release},getReview:function(){return this.albumData.review},getReviewAuthor:function(){return this.albumData.reviewAuthor},getBuyUrl:function(){return null!=this.albumData?this.albumData.buyURL:this.data.buyURL},getRating:function(){return null!=this.albumData?this.albumData.rating:this.data.rating},getCoverArtOriginal:function(){var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null!=t||void 0!=t?{url:t.originalSourceUrl,width:t.width,height:t.height,id:t.id}:null},getCoverArtPicture:function(){return this.coverArtPicture},fetchCoverArtPicture:function(){if(this.coverArtPicture)return void this.notify("cover-complete",this.coverArtPicture);var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null==t?void this.notify("cover-complete"):(t.albumId=this.id,this.coverArtPicture=new o(t,this.platformId),this.coverArtPicture.successCallback&&this.coverArtPicture.successCallback.remove(),this.coverArtPicture.errorCallback&&this.coverArtPicture.errorCallback.remove(),this.coverArtPicture.successCallback=s(this.coverArtPicture,"picture-complete",n.hitch(this,this._onCoverArtPictureComplete)),this.coverArtPicture.errorCallback=s(this.coverArtPicture,"picture-error",n.hitch(this,this._onCoverArtPictureComplete)),void this.coverArtPicture.fetchData())},_onCoverArtPictureComplete:function(t,e){this.notify("cover-complete",this.coverArtPicture)},getTracks:function(){if(null==this.tracks){this.tracks=[];var t;e.forEach(this.albumData.tracks,function(e,n){t=new a(e,this.platformId),this.tracks.push(t)},this)}return this.tracks},getTrackById:function(t){var n=-1;return e.forEach(this.getTracks(),function(e,i){e.id==t&&(n=i)},this),n>-1?this.getTracks()[n]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicAlbumUrl(this.id)),null==this.url)return console.error("album::fetchData - The album url is undefined for album title="+this.getTitle()),void this.notify("album-error",{albumId:this.id});if(0==this.alreadyFetched){var e=new i;e.request(this.url,{albumId:this.id,isDynamicCall:t},this.getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError))}else this.notify("album-complete",{albumId:this.id})},fetchTrackByIds:function(t){"string"==typeof t&&(t=[t]),this.tracksQueue=n.clone(t);for(var e,i=0;i<t.length;i++)e=this.getTrackById(t[i]),e.successCallback&&e.successCallback.remove(),e.errorCallback&&e.errorCallback.remove(),e.successCallback=s(e,"track-complete",n.hitch(this,this._onTrackComplete)),e.errorCallback=s(e,"track-error",n.hitch(this,this._onTrackComplete)),e.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("album-error",{albumId:t.albumId})},_onLoadComplete:function(t,e){this.albumData=e.album,this.alreadyFetched=!0,this.notify("album-complete",{albumId:t.albumId})},_onTrackComplete:function(t,e){this._removeTrackFromQueue(t.trackId),0==this.tracksQueue.length&&this.notify("track-complete",this.tracks)},_removeTrackFromQueue:function(t){var n=-1;e.forEach(this.tracksQueue,function(e,i){e==t&&(n=i)},this),n>-1&&this.tracksQueue.splice(n,1)}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.pictureData=null,this.albumId=t.albumId?t.albumId:null,this.artistId=t.artistId?t.artistId:null,this.inherited(arguments)},getOriginalSourceUrl:function(){return this.data.originalSourceUrl},getOriginalWidth:function(){return this.data.width},getOriginalHeight:function(){return this.data.height},getFiles:function(){return null!=this.pictureData&&void 0!=this.pictureData.files&&this.pictureData.files.length>0?this.pictureData.files:null},fetchData:function(t){if(t=void 0!=t&&t,t?null!=this.albumId?this.url=this.getDynamicAlbumPictureUrl(this.albumId,this.id):this.url=this.getDynamicArtistPictureUrl(this.artistId,this.id):null!=this.albumId?this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.albumId:this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.artistId,
0==this.alreadyFetched){var i=new n;i.request(this.url,{pictureId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("picture-complete",{pictureId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("picture-error",{pictureId:t.pictureId})},_onLoadComplete:function(t,e){this.pictureData=e.picture,this.alreadyFetched=!0,this.notify("picture-complete",{pictureId:t.pictureId})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.trackData=null,this.inherited(arguments)},getBuyUrl:function(){return null!=this.trackData?this.trackData.buyURL:this.data.buyURL},getDuration:function(){return this.data.duration},getSampleUrl:function(){return null!=this.trackData?this.trackData.sampleURL:this.data.sampleURL},getTitle:function(){return null!=this.trackData?this.trackData.title:this.data.title},getArtists:function(){return this.trackData.artists},getReview:function(){return this.trackData.review},getReviewAuthor:function(){return this.trackData.reviewAuthor},getDisc:function(){return this.data.disc},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicTrackUrl(this.id)),0==this.alreadyFetched){var i=new n;i.request(this.url,{trackId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("track-complete",{trackId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("track-error",{trackId:t.trackId})},_onLoadComplete:function(t,e){this.trackData=e.track,this.alreadyFetched=!0,this.notify("track-complete",{trackId:t.trackId})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(27)],r=function(t,e){var n={};if(t("dojo-config-api")){var i,r=e.rawConfig;for(i in r)n[i]=r[i]}else{var a=function(e,n,r){for(i in e)"has"!=i&&t.add(n+i,e[i],0,r)};n=t("dojo-loader")?e.rawConfig:this.dojoConfig||this.djConfig||{},a(n,"config",1),a(n.has,"",1)}return n.locale||(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(26),n(33),n(78),n(85),n(79),n(2),n(84)],r=function(t,e,n,i,r,a,o,s){function u(n,r,o,u,l){if(u=s.hitch(o,u),!n||!n.addEventListener&&!n.attachEvent)return i.after(n||t.global,r,u,!0);if("string"==typeof r&&"on"==r.substring(0,2)&&(r=r.substring(2)),n||(n=t.global),!l)switch(r){case"keypress":r=c;break;case"mouseenter":r=a.enter;break;case"mouseleave":r=a.leave}return e(n,r,u,l)}function l(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}o.add("events-keypress-typed",function(){var t={charCode:0};try{t=document.createEvent("KeyboardEvent"),(t.initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==t.charCode&&!o("opera")});var c,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},h=o("mac")?"metaKey":"ctrlKey",f=function(t,e){var n=s.mixin({},t,e);return l(n),n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()},n};if(o("events-keypress-typed")){var p=function(t,e){try{return t.keyCode=e}catch(t){return 0}};c=function(t,n){var i=e(t,"keydown",function(t){var e=t.keyCode,i=13!=e&&32!=e&&(27!=e||!o("ie"))&&(e<48||e>90)&&(e<96||e>111)&&(e<186||e>192)&&(e<219||e>222)&&229!=e;if(i||t.ctrlKey){var r=i?0:e;if(t.ctrlKey){if(3==e||13==e)return n.call(t.currentTarget,t);r>95&&r<106?r-=48:!t.shiftKey&&r>=65&&r<=90?r+=32:r=d[r]||r}var a=f(t,{type:"keypress",faux:!0,charCode:r});n.call(t.currentTarget,a),o("ie")&&p(t,a.keyCode)}}),r=e(t,"keypress",function(t){var e=t.charCode;return e=e>=32?e:0,t=f(t,{charCode:e,faux:!0}),n.call(this,t)});return{remove:function(){i.remove(),r.remove()}}}}else c=o("opera")?function(t,n){return e(t,"keypress",function(t){var e=t.which;return 3==e&&(e=99),e=e<32&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&e<=90&&(e+=32),n.call(this,f(t,{charCode:e}))})}:function(t,n){return e(t,"keypress",function(t){return l(t),n.call(this,t)})};var g={_keypress:c,connect:function(t,e,n,i,r){var a=arguments,o=[],s=0;o.push("string"==typeof a[0]?null:a[s++],a[s++]);var l=a[s+1];o.push("string"==typeof l||"function"==typeof l?a[s++]:null,a[s++]);for(var c=a.length;s<c;s++)o.push(a[s]);return u.apply(this,o)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,i){return n.subscribe(t,s.hitch(e,i))},publish:function(t,e){return n.publish.apply(n,[t].concat(e))},connectPublisher:function(t,e,n){var i=function(){g.publish(t,arguments)};return n?g.connect(e,n,i):g.connect(e,i)},isCopyKey:function(t){return t[h]}};return g.unsubscribe=g.disconnect,o("extend-dojo")&&s.mixin(t,g),g}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(80)],r=function(t,e,n,i){if(e._fixEvent){var r=e._fixEvent;e._fixEvent=function(t,e){return t=r(t,e),t&&i.normalizeEvent(t),t}}var a={fix:function(t,n){return e._fixEvent?e._fixEvent(t,n):t},stop:function(t){n("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t=t||window.event,t.cancelBubble=!0,e._preventDefault.call(t))}};return n("extend-dojo")&&(t.fixEvent=a.fix,t.stopEvent=a.stop),a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(2),n(9)],r=function(t,e,n){return n("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(9),n(17),n(7),n(23)],r=function(t,e,n,i){function r(t,e,n,i,r,a){a=a||"px";var o=t.style;isNaN(e)||(o.left=e+a),isNaN(n)||(o.top=n+a),i>=0&&(o.width=i+a),r>=0&&(o.height=r+a)}function a(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function o(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||a(t)}var s={};s.boxModel="content-box",t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.paddingLeft),s=a(t,r.paddingTop),u=a(t,r.paddingRight),l=a(t,r.paddingBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}};var u="none";s.getBorderExtents=function(t,e){t=n.byId(t);var r=i.toPixelValue,a=e||i.getComputedStyle(t),o=a.borderLeftStyle!=u?r(t,a.borderLeftWidth):0,s=a.borderTopStyle!=u?r(t,a.borderTopWidth):0,l=a.borderRightStyle!=u?r(t,a.borderRightWidth):0,c=a.borderBottomStyle!=u?r(t,a.borderBottomWidth):0;return{l:o,t:s,r:l,b:c,w:o+l,h:s+c}},s.getPadBorderExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=s.getPadExtents(t,r),o=s.getBorderExtents(t,r);return{l:a.l+o.l,t:a.t+o.t,r:a.r+o.r,b:a.b+o.b,w:a.w+o.w,h:a.h+o.h}},s.getMarginExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.marginLeft),s=a(t,r.marginTop),u=a(t,r.marginRight),l=a(t,r.marginBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}},s.getMarginBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),l=s.getMarginExtents(e,o),c=e.offsetLeft-l.l,d=e.offsetTop-l.t,h=e.parentNode,f=i.toPixelValue;if(t("mozilla")){var p=parseFloat(o.left),g=parseFloat(o.top);isNaN(p)||isNaN(g)?h&&h.style&&(a=i.getComputedStyle(h),"visible"!=a.overflow&&(c+=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d+=a.borderTopStyle!=u?f(e,a.borderTopWidth):0)):(c=p,d=g)}else(t("opera")||8==t("ie")&&!t("quirks"))&&h&&(a=i.getComputedStyle(h),c-=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d-=a.borderTopStyle!=u?f(e,a.borderTopWidth):0);return{l:c,t:d,w:e.offsetWidth+l.w,h:e.offsetHeight+l.h}},s.getContentBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),u=e.clientWidth,l=s.getPadExtents(e,o),c=s.getBorderExtents(e,o);return u?(a=e.clientHeight,c.w=c.h=0):(u=e.offsetWidth,a=e.offsetHeight),t("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:u-l.w-c.w,h:a-l.h-c.h}},s.setContentSize=function(t,e,i){t=n.byId(t);var a=e.w,u=e.h;if(o(t)){var l=s.getPadBorderExtents(t,i);a>=0&&(a+=l.w),u>=0&&(u+=l.h)}r(t,NaN,NaN,a,u)};var l={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,u,c){e=n.byId(e);var d=c||i.getComputedStyle(e),h=u.w,f=u.h,p=o(e)?l:s.getPadBorderExtents(e,d),g=s.getMarginExtents(e,d);if(t("webkit")&&a(e)){var m=e.style;h>=0&&!m.width&&(m.width="4px"),f>=0&&!m.height&&(m.height="4px")}h>=0&&(h=Math.max(h-p.w-g.w,0)),f>=0&&(f=Math.max(f-p.h-g.h,0)),r(e,u.l,u.t,h,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(n){n=n||e.doc;var i=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in i?{x:i.pageXOffset,y:i.pageYOffset}:(i=t("quirks")?e.body(n):n.documentElement)&&{x:s.fixIeBiDiScrollLeft(i.scrollLeft||0,n),y:i.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(n){n=n||e.doc;var i=n.documentElement;if(t("ie")<8){var r=i.getBoundingClientRect(),a=r.left,o=r.top;return t("ie")<7&&(a+=i.clientLeft,o+=i.clientTop),{x:a<0?0:a,y:o<0?0:o}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(n,i){i=i||e.doc;var r=t("ie");if(r&&!s.isBodyLtr(i)){var a=t("quirks"),o=a?e.body(i):i.documentElement,u=e.global;return 6==r&&!a&&u.frameElement&&o.scrollHeight>o.clientHeight&&(n+=o.clientLeft),r<8||a?n+o.clientWidth-o.scrollWidth:-n}return n},s.position=function(i,r){i=n.byId(i);var a=e.body(i.ownerDocument),o=i.getBoundingClientRect();if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},t("ie")<9){var u=s.getIeDocumentElementOffset(i.ownerDocument);o.x-=u.x+(t("quirks")?a.clientLeft+a.offsetLeft:0),o.y-=u.y+(t("quirks")?a.clientTop+a.offsetTop:0)}if(r){var l=s.docScroll(i.ownerDocument);o.x+=l.x,o.y+=l.y}return o},s.getMarginSize=function(t,e){t=n.byId(t);var r=s.getMarginExtents(t,e||i.getComputedStyle(t)),a=t.getBoundingClientRect();return{w:a.right-a.left+r.w,h:a.bottom-a.top+r.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var n=e.target,i=n&&n.ownerDocument||document,r=t("quirks")?i.body:i.documentElement,a=s.getIeDocumentElementOffset(i);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(r.scrollLeft||0,i)-a.x,e.pageY=e.clientY+(r.scrollTop||0)-a.y}},s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[e,n(5),n(9),n(2),n(7),n(23),n(11),n(77)],r=function(t,e,n,i,r,a,o,s){var u={},l=0,c=e._scopeName+"attrid";t.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},t.get=function(e,n){e=r.byId(e);var i=n.toLowerCase(),a=t.names[i]||n;return e[a]},t.set=function(e,d,h){e=r.byId(e);var f=arguments.length;if(2==f&&"string"!=typeof d){for(var p in d)t.set(e,p,d[p]);return e}var g=d.toLowerCase(),m=t.names[g]||d;if("style"==m&&"string"!=typeof h)return a.set(e,h),e;if("innerHTML"==m)return n("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(e),e.appendChild(o.toDom(h,e.ownerDocument))):e[m]=h,e;if(i.isFunction(h)){var v=e[c];v||(v=l++,e[c]=v),u[v]||(u[v]={});var y=u[v][m];if(y)s.disconnect(y);else try{delete e[m]}catch(t){}return h?u[v][m]=s.connect(e,m,h):e[m]=null,e}return e[m]=h,e}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(35),n(34)],r=function(t,e){return t("RequestTimeoutError",null,e,{dojoType:"timeout"})}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],__WEBPACK_AMD_DEFINE_RESULT__=function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(t,e){return e||1})),has("json-stringify"))return JSON;var escapeString=function(t){return('"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(t,e,n){function i(t,a,o){e&&(t=e(o,t));var s,u=typeof t;if("number"==u)return isFinite(t)?t+"":"null";if("boolean"==u)return t+"";if(null===t)return"null";if("string"==typeof t)return escapeString(t);if("function"==u||"undefined"==u)return r;if("function"==typeof t.toJSON)return i(t.toJSON(o),a,o);if(t instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(e,n,i){var r=t["getUTC"+n]()+(i?1:0);return r<10?"0"+r:r});if(t.valueOf()!==t)return i(t.valueOf(),a,o);var l=n?a+n:"",c=n?" ":"",d=n?"\n":"";if(t instanceof Array){var h=t.length,f=[];for(o=0;o<h;o++){var p=t[o];s=i(p,l,o),"string"!=typeof s&&(s="null"),f.push(d+l+s)}return"["+f.join(",")+d+a+"]"}var g=[];for(o in t){var m;if(t.hasOwnProperty(o)){if("number"==typeof o)m='"'+o+'"';else{if("string"!=typeof o)continue;m=escapeString(o)}if(s=i(t[o],l,o),"string"!=typeof s)continue;g.push(d+l+m+":"+c+s)}}return"{"+g.join(",")+d+a+"}"}var r;return"string"==typeof e&&(n=e,e=null),i(t,"","")}}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,n){var i,r;i=[n(5),n(9)],r=function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(7),n(17)],r=function(t,e,n,i,r){function a(t,n){var r=function(r,a){return e(r,t,function(t){return n?n(t,a):i.isDescendant(t.relatedTarget,r)?void 0:a.call(this,t)})};return r.bubble=function(e){return a(t,function(t,n){var i=e(t.target),r=t.relatedTarget;if(i&&i!=(r&&1==r.nodeType&&e(r)))return n.call(i,t)})},r}n.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode),n.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div")),n.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc);var o;o=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=o;var s;return s=n("events-mousewheel")?"mousewheel":function(t,n){return e(t,"DOMMouseScroll",function(t){t.wheelDelta=-t.detail,n.call(this,t)})},{_eventHandler:a,enter:a("mouseover"),leave:a("mouseout"),wheel:s,isLeft:o.isLeft,isMiddle:o.isMiddle,isRight:o.isRight}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(5),n(4),n(7),n(3),n(6),n(2),n(55),n(89)],r=function(t,e,n,i,r,a,o,s){"use strict";function u(t,e){var i=function(i,r){if("string"==typeof r&&(r=n.byId(r),!r))return new e([]);var a="string"==typeof i?t(i,r):i?i.end&&i.on?i:[i]:[];return a.end&&a.on?a:new e(a)};if(i.matches=t.match||function(t,e,n){return i.filter([t],e,n).length>0},i.filter=t.filter||function(t,e,n){return i(e,n).filter(function(e){return r.indexOf(t,e)>-1})},"function"!=typeof t){var a=t.search;t=function(t,e){return a(e||document,t)}}return i}e.add("array-extensible",function(){return 1==a.delegate([],{length:1}).length&&!e("bug-for-in-skips-shadowed")});var l=Array.prototype,c=l.slice,d=l.concat,h=r.forEach,f=function(t,e,n){var i=new(n||this._NodeListCtor||E)(t);return e?i._stash(e):i},p=function(e,n,i){return n=[0].concat(c.call(n,0)),i=i||t.global,function(t){return n[0]=t,e.apply(i,n)}},g=function(t,e){return function(){return this.forEach(p(t,arguments,e)),this}},m=function(t,e){return function(){return this.map(p(t,arguments,e))}},v=function(t,e){return function(){return this.filter(p(t,arguments,e))}},y=function(e,n,i){return function(){var r=arguments,a=p(e,r,i);return n.call(i||t.global,r)?this.map(a):(this.forEach(a),this)}},_=function(t){var n=this instanceof E&&e("array-extensible");"number"==typeof t&&(t=Array(t));var i=t&&"length"in t?t:arguments;if(n||!i.sort){for(var r=n?this:[],o=r.length=i.length,s=0;s<o;s++)r[s]=i[s];if(n)return r;i=r}return a._mixin(i,b),i._NodeListCtor=function(t){return E(t)},i},E=_,b=E.prototype=e("array-extensible")?[]:{};E._wrap=b._wrap=f,E._adaptAsMap=m,E._adaptAsForEach=g,E._adaptAsFilter=v,E._adaptWithCondition=y,h(["slice","splice"],function(t){var e=l[t];b[t]=function(){return this._wrap(e.apply(this,arguments),"slice"==t?this:null)}}),h(["indexOf","lastIndexOf","every","some"],function(e){var n=r[e];b[e]=function(){return n.apply(t,[this].concat(c.call(arguments,0)))}}),a.extend(_,{constructor:E,_NodeListCtor:E,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,e){var n=this.map(function(n){return i(n,t,e)});return n.remove=function(){for(var t=0;t<n.length;t++)n[t].remove()},n},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var e=c.call(this,0),n=r.map(arguments,function(t){return c.call(t,0)});return this._wrap(d.apply(e,n),this)},map:function(t,e){return this._wrap(r.map(this,t,e),this)},forEach:function(t,e){return h(this,t,e),this},filter:function(t){var e=arguments,n=this,i=0;if("string"==typeof t){if(n=A._filterResult(this,e[0]),1==e.length)return n._stash(this);i=1}return this._wrap(r.filter(n,e[i],e[i+1]),this)},instantiate:function(t,e){var n=a.isFunction(t)?t:a.getObject(t);return e=e||{},this.forEach(function(t){new n(e,t)})},at:function(){var t=new this._NodeListCtor(0);return h(arguments,function(e){e<0&&(e=this.length+e),this[e]&&t.push(this[e])},this),t._stash(this)}});var A=u(s,_);return t.query=u(s,function(t){return _(t)}),A.load=function(t,e,n){o.load(t,e,function(t){n(u(t,_))})},t._filterQueryResult=A._filterResult=function(t,e,n){return new _(A.filter(t,e,n))},t.NodeList=A.NodeList=_,A}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(83),n(5),n(6),n(4),n(55)],r=function(t,e,n,i){function r(t){var e=s[t.options.handleAs];return t.data=e?e(t):t.data||t.text,t}i.add("activex","undefined"!=typeof ActiveXObject),i.add("dom-parser",function(t){return"DOMParser"in t});var a;if(i("activex")){var o=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];a=function(t){var e=t.data;if(e&&i("dom-qsa2.1")&&!e.querySelectorAll&&i("dom-parser")&&(e=(new DOMParser).parseFromString(t.text,"application/xml")),!e||!e.documentElement){var r=t.text;n.some(o,function(t){try{var n=new ActiveXObject(t);n.async=!1,n.loadXML(r),e=n}catch(t){return!1}return!0})}return e}}var s={javascript:function(t){return e.eval(t.text||"")},json:function(e){return t.parse(e.text||null)},xml:a};return r.register=function(t,e){s[t]=e},r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(53),n(82),n(24),n(6),n(17),n(56)],r=function(t,e,n,i,r,a){function o(){for(var t,n=+new Date,i=0;i<l.length&&(t=l[i]);i++){var r=t.response,a=r.options;t.isCanceled&&t.isCanceled()||t.isValid&&!t.isValid(r)?(l.splice(i--,1),s._onAction&&s._onAction()):t.isReady&&t.isReady(r)?(l.splice(i--,1),t.handleResponse(r),s._onAction&&s._onAction()):t.startTime&&t.startTime+(a.timeout||0)<n&&(l.splice(i--,1),t.cancel(new e("Timeout exceeded",r)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(t),l.length||(clearInterval(u),u=null)}function s(t){t.response.options.timeout&&(t.startTime=+new Date),t.isFulfilled()||(l.push(t),u||(u=setInterval(o,50)),t.response.options.sync&&o())}var u=null,l=[];return s.cancelAll=function(){try{i.forEach(l,function(t){try{t.cancel(new n("All requests canceled."))}catch(t){}})}catch(t){}},r&&a&&r.doc.attachEvent&&a(r.global,"unload",function(){s.cancelAll()}),s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(4),n(5)],r=function(t,e){"use strict";var n=document.createElement("div"),i=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,r=n.querySelectorAll,a=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;t.add("dom-matches-selector",!!i),t.add("dom-qsa",!!r);var o=function(t,n){if(l&&t.indexOf(",")>-1)return l(t,n);var i=n?n.ownerDocument||n:e.doc||document,a=(r?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(t);if(n=n||i,a){if(a[2]){var c=e.byId?e.byId(a[2],i):i.getElementById(a[2]);if(!c||a[1]&&a[1]!=c.tagName.toLowerCase())return[];if(n!=i)for(var d=c;d!=n;)if(d=d.parentNode,!d)return[];return a[3]?o(a[3],c):[c]}if(a[3]&&n.getElementsByClassName)return n.getElementsByClassName(a[4]);var c;if(a[5]){if(c=n.getElementsByTagName(a[5]),!a[4]&&!a[6])return c;t=(a[4]||"")+a[6]}}if(r)return 1===n.nodeType&&"object"!==n.nodeName.toLowerCase()?s(n,t,n.querySelectorAll):n.querySelectorAll(t);c||(c=n.getElementsByTagName("*"));for(var h=[],f=0,p=c.length;f<p;f++){var g=c[f];1==g.nodeType&&u(g,t,n)&&h.push(g)}return h},s=function(t,e,n){var i=t,r=t.getAttribute("id"),o=r||"__dojo__",s=t.parentNode,u=/^\s*[+~]/.test(e);if(u&&!s)return[];r?o=o.replace(/'/g,"\\$&"):t.setAttribute("id",o),u&&s&&(t=t.parentNode);for(var l=e.match(a),c=0;c<l.length;c++)l[c]="[id='"+o+"'] "+l[c];e=l.join(",");try{return n.call(t,e)}finally{r||i.removeAttribute("id")}};if(!t("dom-matches-selector"))var u=function(){function t(t,e,n){var i=e.charAt(0);'"'!=i&&"'"!=i||(e=e.slice(1,-1)),e=e.replace(/\\/g,"");var r=s[n||""];return function(n){var i=n.getAttribute(t);return i&&r(i,e)}}function e(t){return function(e,n){for(;(e=e.parentNode)!=n;)if(t(e,n))return!0}}function i(t){return function(e,n){return e=e.parentNode,t?e!=n&&t(e,n):e==n}}function r(t,e){return t?function(n,i){return e(n)&&t(n,i)}:e}var a="div"==n.tagName?"toLowerCase":"toUpperCase",o={"":function(t){return t=t[a](),function(e){return e.tagName==t}},".":function(t){var e=" "+t+" ";return function(n){return n.className.indexOf(t)>-1&&(" "+n.className+" ").indexOf(e)>-1}},"#":function(t){return function(e){return e.id==t}}},s={"^=":function(t,e){return 0==t.indexOf(e)},"*=":function(t,e){return t.indexOf(e)>-1},"$=":function(t,e){return t.substring(t.length-e.length,t.length)==e},"~=":function(t,e){return(" "+t+" ").indexOf(" "+e+" ")>-1},"|=":function(t,e){return 0==(t+"-").indexOf(e+"-")},"=":function(t,e){return t==e},"":function(t,e){return!0}},u={};return function(n,a,s){var l=u[a];if(!l){if(a.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(n,a,s,u,c,d,h){return u?l=r(l,o[s||""](u.replace(/\\/g,""))):a?l=(" "==a?e:i)(l):c&&(l=r(l,t(c,h,d))),""}))throw new Error("Syntax error in query");if(!l)return!0;u[a]=l}return l(n,s)}}();if(!t("dom-qsa"))var l=function(t,e){for(var n=t.match(a),i=[],r=0;r<n.length;r++){t=new String(n[r].replace(/\s*$/,"")),t.indexOf=escape;for(var s=o(t,e),u=0,l=s.length;u<l;u++){var c=s[u];i[c.sourceIndex]=c}}var d=[];for(r in i)d.push(i[r]);return d};return o.match=i?function(t,e,n){return n&&9!=n.nodeType?s(n,e,function(e){return i.call(t,e)}):i.call(t,e)}:u,o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(32),n(25)],r=function(t,e){"use strict";return function(n,i,r,a){var o=n&&"function"==typeof n.then,s=o&&n instanceof e;if(!o)return arguments.length>1?i?i(n):n:(new t).resolve(n);if(!s){var u=new t(n.cancel);n.then(u.resolve,u.reject,u.progress),n=u.promise}return i||r||a?n.then(i,r,a):n}}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){!function(){var n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var i="string"==typeof t.initial?{state:t.initial}:t.initial,r=t.terminal||t.final,a=e||t.target||{},o=t.events||[],s=t.callbacks||{},u={},l={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[n.WILDCARD];u[t.name]=u[t.name]||{};for(var i=0;i<e.length;i++)l[e[i]]=l[e[i]]||[],l[e[i]].push(t.name),u[t.name][e[i]]=t.to||e[i];t.to&&(l[t.to]=l[t.to]||[])};i&&(i.event=i.event||"startup",c({name:i.event,from:"none",to:i.state}));for(var d=0;d<o.length;d++)c(o[d]);for(var h in u)u.hasOwnProperty(h)&&(a[h]=n.buildEvent(h,u[h]));for(var h in s)s.hasOwnProperty(h)&&(a[h]=s[h]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(n.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(l[this.current]||[]).concat(l[n.WILDCARD]||[])},a.isFinished=function(){return this.is(r)},a.error=t.error||function(t,e,n,i,r,a,o){throw o||a},a.states=function(){return Object.keys(l).sort()},i&&!i.defer&&a[i.event](),a},doCallback:function(t,e,i,r,a,o){if(e)try{return e.apply(t,[i,r,a].concat(o))}catch(e){return t.error(i,r,a,o,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,i,r,a){return n.doCallback(t,t.onbeforeevent,e,i,r,a)},afterAnyEvent:function(t,e,i,r,a){return n.doCallback(t,t.onafterevent||t.onevent,e,i,r,a)},leaveAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onleavestate,e,i,r,a)},enterAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onenterstate||t.onstate,e,i,r,a)},changeState:function(t,e,i,r,a){return n.doCallback(t,t.onchangestate,e,i,r,a)},beforeThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onbefore"+e],e,i,r,a)},afterThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onafter"+e]||t["on"+e],e,i,r,a)},leaveThisState:function(t,e,i,r,a){return n.doCallback(t,t["onleave"+i],e,i,r,a)},enterThisState:function(t,e,i,r,a){return n.doCallback(t,t["onenter"+r]||t["on"+r],e,i,r,a)},beforeEvent:function(t,e,i,r,a){if(!1===n.beforeThisEvent(t,e,i,r,a)||!1===n.beforeAnyEvent(t,e,i,r,a))return!1},afterEvent:function(t,e,i,r,a){n.afterThisEvent(t,e,i,r,a),n.afterAnyEvent(t,e,i,r,a)},leaveState:function(t,e,i,r,a){var o=n.leaveThisState(t,e,i,r,a),s=n.leaveAnyState(t,e,i,r,a);return!1!==o&&!1!==s&&(n.ASYNC===o||n.ASYNC===s?n.ASYNC:void 0)},enterState:function(t,e,i,r,a){n.enterThisState(t,e,i,r,a),n.enterAnyState(t,e,i,r,a)},buildEvent:function(t,e){return function(){var i=this.current,r=e[i]||(e[n.WILDCARD]!=n.WILDCARD?e[n.WILDCARD]:i)||i,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,i,r,a,n.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,i,r,a,n.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,t,i,r,a))return n.Result.CANCELLED;if(i===r)return n.afterEvent(this,t,i,r,a),n.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=r,n.enterState(o,t,i,r,a),n.changeState(o,t,i,r,a),
n.afterEvent(o,t,i,r,a),n.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,n.afterEvent(o,t,i,r,a)};var s=n.leaveState(this,t,i,r,a);return!1===s?(this.transition=null,n.Result.CANCELLED):n.ASYNC===s?n.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.StateMachine=n}()},function(t,e){t.exports={gettingStationInformation:"Obteniendo información de la estación...",paused:"Pausado",onAir:"En el aire",disconnected:"Desconectado",streamUnavailable:"Transmisión no disponible",buffering:"Buffering",connecting:"Conexión de transmisión en vivo en progreso...",reconnecting:"Conexión de transmisión en vivo en progreso...",seekfailed:"Operación imposible",seekinvalidtime:"Operación imposible: tiempo no válido",ended:"Terminado",pause:"Pausado",play:"En vivo",stop:"Desconectado",error:"Erro",streamGeoBlocked:"Lo sentimos, este contenido no está disponible en su área",stationNotFound:"No se encontró la estación",flashPluginOutOfDate:"Su versión Flash plugin detectada es obsoleta. La versión mínima requerida es: 10.2.0",browserNotSupported:"Su navegador no es compatible con la función HTML5",playbackNotAllowed:"No se permite la reproducción de medios en el contexto o situación actual",tritonListenLink:"El reproductor OnDemand no se puede usar con enlaces de escucha Triton"}},function(t,e){t.exports={gettingStationInformation:"Chargement des informations de la station...",paused:"En pause",onAir:"En ondes",disconnected:"Déconnecté",streamUnavailable:"Flux indisponible",buffering:"Mise en mémoire tampon",connecting:"Connexion en cours...",reconnecting:"Connexion en cours...",seekfailed:"Opération impossible",seekinvalidtime:"Opération impossible : temps invalide",ended:"Terminé",pause:"En pause",play:"En lecture",stop:"Déconnecté",error:"Erreur",streamGeoBlocked:"Désolé, ce flux n'est pas disponible dans votre région",stationNotFound:"Station inexistante",flashPluginOutOfDate:"La version de votre plugin Flash est obsolète. La version minimale requise est: 10.2.0",browserNotSupported:"Votre navigateur ne supporte pas HTML5",playbackNotAllowed:"La lecture de contenu multimédia dans le contexte ou la situation actuels n'est pas autorisée",tritonListenLink:"Le lecteur OnDemand ne peut pas être utilisé avec les liens d'écoute Triton"}},function(t,e){t.exports={gettingStationInformation:"Obtendo informações da estação...",paused:"Em Pausa",onAir:"No Ar",disconnected:"Desconectado",streamUnavailable:"Streaming não disponível",buffering:"Em Buffer",connecting:"Conexão com stream ao vivo em andamento...",reconnecting:"Conexão com stream ao vivo em andamento...",seekfailed:"Operação impossível",seekinvalidtime:"Operação impossível: hora inválida",ended:"Terminou",pause:"Pausa",play:"Tocando",stop:"Interrompido",error:"Erro",streamGeoBlocked:"Infelizmente, este conteúdo não está disponível na sua área",stationNotFound:"Estação não encontrada",flashPluginOutOfDate:"A versão detectada do seu plug-in Flash está desatualizada. A versão mínima necessária é: 10.2.0",browserNotSupported:"Seu navegador não oferece suporte para o recurso HTML5",playbackNotAllowed:"A reprodução de mídia no contexto ou situação atual não é permitida",tritonListenLink:"O OnDemand player não pode ser usado com links de escuta do Triton"}},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return X.apply(t,arguments)}}function i(t){return t===Object(t)}function r(t){return"[object StopIteration]"===rt(t)||t instanceof W}function a(t,e){if(V&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var n=[],i=e;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(et(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var r=n.join("\n"+at+"\n"),a=o(r);et(t,"stack",{value:a,configurable:!0})}}function o(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];l(r)||s(r)||!r||n.push(r)}return n.join("\n")}function s(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function l(t){var e=u(t);if(!e)return!1;var n=e[0],i=e[1];return n===K&&i>=q&&i<=dt}function c(){if(V)try{throw new Error}catch(i){var t=i.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=u(e);if(!n)return;return K=n[0],n[1]}}function d(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof m?t:E(t)?D(t):L(t)}function f(){function t(t){e=t,h.longStackSupport&&V&&(a.source=t),$(n,function(e,n){h.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,i=void 0}var e,n=[],i=[],r=tt(f.prototype),a=tt(m.prototype);if(a.promiseDispatch=function(t,r,a){var o=Q(arguments);n?(n.push(o),"when"===r&&a[1]&&i.push(a[1])):h.nextTick(function(){e.promiseDispatch.apply(e,o)})},a.valueOf=function(){if(n)return a;var t=y(e);return _(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&V)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1),a.stackCounter=ot++}return r.promise=a,r.resolve=function(n){e||t(h(n))},r.fulfill=function(n){e||t(L(n))},r.reject=function(n){e||t(C(n))},r.notify=function(t){e||$(i,function(e,n){h.nextTick(function(){n(t)})},void 0)},r}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function g(t){return p(function(e,n){for(var i=0,r=t.length;i<r;i++)h(t[i]).then(e,n)})}function m(t,e,n){void 0===e&&(e=function(t){return C(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=tt(m.prototype);if(i.promiseDispatch=function(n,r,a){var o;try{o=t[r]?t[r].apply(i,a):e.call(i,r,a)}catch(t){o=C(t)}n&&n(o)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function v(t,e,n,i){return h(t).then(e,n,i)}function y(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof m}function E(t){return i(t)&&"function"==typeof t.then}function b(t){return _(t)&&"pending"===t.inspect().state}function A(t){return!_(t)||"fulfilled"===t.inspect().state}function T(t){return _(t)&&"rejected"===t.inspect().state}function S(){st.length=0,ut.length=0,ct||(ct=!0)}function k(t,n){ct&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){J(ut,t)!==-1&&(e.emit("unhandledRejection",n,t),lt.push(t))}),ut.push(t),n&&"undefined"!=typeof n.stack?st.push(n.stack):st.push("(no stack) "+n))}function w(t){if(ct){var n=J(ut,t);n!==-1&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){var i=J(lt,t);i!==-1&&(e.emit("rejectionHandled",st[n],t),lt.splice(i,1))}),ut.splice(n,1),st.splice(n,1))}}function C(t){var e=m({when:function(e){return e&&w(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return k(e,t),e}function L(t){return m({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return it(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function D(t){var e=f();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function I(t){return m({isDef:function(){}},function(e,n){return M(t,e,n)},function(){return h(t).inspect()})}function R(t,e,n){return h(t).spread(e,n)}function P(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=n[t](e)}catch(t){return C(t)}return o.done?h(o.value):v(o.value,i,a)}try{o=n[t](e)}catch(t){return r(t)?h(t.value):C(t)}return v(o,i,a)}var n=t.apply(this,arguments),i=e.bind(e,"next"),a=e.bind(e,"throw");return i()}}function O(t){h.done(h.async(t)())}function x(t){throw new W(t)}function N(t){return function(){return R([this,F(arguments)],function(e,n){return t.apply(e,n)})}}function M(t,e,n){return h(t).dispatch(e,n)}function F(t){return v(t,function(t){var e=0,n=f();return $(t,function(i,r,a){var o;_(r)&&"fulfilled"===(o=r.inspect()).state?t[a]=o.value:(++e,v(r,function(i){t[a]=i,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:a,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){if(0===t.length)return h.resolve();var e=h.defer(),n=0;return $(t,function(i,r,a){function o(t){e.resolve(t)}function s(t){if(n--,0===n){var i=t||new Error(""+t);i.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+i.message,e.reject(i)}}function u(t){e.notify({index:a,value:t})}var l=t[a];n++,v(l,o,s,u)},void 0),e.promise}function B(t){return v(t,function(t){return t=Z(t,h),v(F(Z(t,function(t){return v(t,Y,Y)})),function(){return t})})}function j(t){return h(t).allSettled()}function G(t,e){return h(t).then(void 0,void 0,e)}function H(t,e){return h(t).nodeify(e)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var K,W,q=c(),Y=function(){},z=function(){function t(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),i(t,e);for(;l.length;)t=l.pop(),i(t);o=!1}function i(e,n){try{e()}catch(e){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}var r={task:void 0,next:null},a=r,o=!1,s=void 0,u=!1,l=[];if(z=function(t){a=a.next={task:t,domain:u&&e.domain,next:null},o||(o=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=d,c.port1.onmessage=t,t()};var d=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),d()}}else s=function(){setTimeout(t,0)};return z.runAfter=function(t){l.push(t),o||(o=!0,s())},z}(),X=Function.call,Q=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),J=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,i=[];return $(n,function(r,a,o){i.push(t.call(e,a,o,n))},void 0),i}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},nt=t(Object.prototype.hasOwnProperty),it=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},rt=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var at="From previous event:";h.resolve=h,h.nextTick=z,h.longStackSupport=!1;var ot=1;"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Q(arguments,1)):t.resolve(n)}},h.Promise=p,h.promise=p,p.race=g,p.all=F,p.reject=C,p.resolve=h,h.passByCopy=function(t){return t},m.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},m.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},h.race=g,m.prototype.race=function(){return this.then(h.race)},h.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(t,e,n){function i(e){try{return"function"==typeof t?t(e):e}catch(t){return C(t)}}function r(t){if("function"==typeof e){a(t,s);try{return e(t)}catch(t){return C(t)}}return C(t)}function o(t){return"function"==typeof n?n(t):t}var s=this,u=f(),l=!1;return h.nextTick(function(){s.promiseDispatch(function(t){l||(l=!0,u.resolve(i(t)))},"when",[function(t){l||(l=!0,u.resolve(r(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=o(t)}catch(t){if(n=!0,!h.onerror)throw t;h.onerror(t)}n||u.notify(e)}]),u.promise},h.tap=function(t,e){return h(t).tap(e)},m.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=v,m.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},m.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=y,h.isPromise=_,h.isPromiseAlike=E,h.isPending=b,m.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=A,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=T,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],ut=[],lt=[],ct=!0;h.resetUnhandledRejections=S,h.getUnhandledReasons=function(){return st.slice()},h.stopUnhandledRejectionTracking=function(){S(),ct=!1},S(),h.reject=C,h.fulfill=L,h.master=I,h.spread=R,m.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=P,h.spawn=O,h.return=x,h.promised=N,h.dispatch=M,m.prototype.dispatch=function(t,e){var n=this,i=f();return h.nextTick(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},m.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,n){return h(t).dispatch("set",[e,n])},m.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h.delete=function(t,e){return h(t).dispatch("delete",[e])},m.prototype.del=m.prototype.delete=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,n){return h(t).dispatch("post",[e,n])},m.prototype.mapply=m.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,Q(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(t){return this.dispatch("post",[t,Q(arguments,1)])},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},m.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h.try=h.fcall=function(t){return h(t).dispatch("apply",[void 0,Q(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,Q(arguments)])},h.fbind=function(t){var e=h(t),n=Q(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Q(arguments))])}},m.prototype.fbind=function(){var t=this,e=Q(arguments);return function(){return t.dispatch("apply",[this,e.concat(Q(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},h.all=F,m.prototype.all=function(){return F(this)},h.any=U,m.prototype.any=function(){return U(this)},h.allResolved=d(B,"allResolved","allSettled"),m.prototype.allResolved=function(){return B(this)},h.allSettled=j,m.prototype.allSettled=function(){return this.then(function(t){return F(Z(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h.catch=function(t,e){return h(t).then(void 0,e)},m.prototype.fail=m.prototype.catch=function(t){return this.then(void 0,t)},h.progress=G,m.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h.finally=function(t,e){return h(t).finally(e)},m.prototype.fin=m.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,n,i){return h(t).done(e,n,i)},m.prototype.done=function(t,n,i){var r=function(t){h.nextTick(function(){if(a(t,o),!h.onerror)throw t;h.onerror(t)})},o=t||n||i?this.then(t,n,i):this;"object"==typeof e&&e&&e.domain&&(r=e.domain.bind(r)),o.then(void 0,r)},h.timeout=function(t,e,n){return h(t).timeout(e,n)},m.prototype.timeout=function(t,e){var n=f(),i=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},m.prototype.delay=function(t){return this.then(function(e){var n=f();return setTimeout(function(){n.resolve(e)},t),n.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},m.prototype.nfapply=function(t){var e=f(),n=Q(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},h.nfcall=function(t){var e=Q(arguments,1);return h(t).nfapply(e)},m.prototype.nfcall=function(){var t=Q(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=Q(arguments,1);return function(){var n=e.concat(Q(arguments)),i=f();return n.push(i.makeNodeResolver()),h(t).fapply(n).fail(i.reject),i.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var t=Q(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var n=Q(arguments,2);return function(){function i(){return t.apply(e,arguments)}var r=n.concat(Q(arguments)),a=f();return r.push(a.makeNodeResolver()),h(i).fapply(r).fail(a.reject),a.promise}},m.prototype.nbind=function(){var t=Q(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,n){return h(t).npost(e,n)},m.prototype.nmapply=m.prototype.npost=function(t,e){var n=Q(e||[]),i=f();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var n=Q(arguments,2),i=f();return n.push(i.makeNodeResolver()),h(t).dispatch("post",[e,n]).fail(i.reject),i.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(t){var e=Q(arguments,1),n=f();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},h.nodeify=H,m.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this},h.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var dt=c();return h})}).call(e,n(58),n(99).setImmediate)},function(t,e,n){var i,r;/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */
!function(a,o){"undefined"!=typeof t&&t.exports?t.exports=o():(i=o,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)))}("$script",function(){function t(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return u;return 1}function e(e,n){t(e,function(t){return!n(t)})}function n(a,o,s){function u(t){return t.call?t():h[t]}function c(){if(!--y){h[v]=1,m&&m();for(var n in p)t(n.split("|"),u)&&!e(p[n],u)&&(p[n]=[])}}a=a[l]?a:[a];var d=o&&o.call,m=d?o:s,v=d?a.join(""):o,y=a.length;return setTimeout(function(){e(a,function t(e,n){return null===e?c():(n||/^https?:\/\//.test(e)||!r||(e=e.indexOf(".js")===-1?r+e+".js":r+e),g[e]?(v&&(f[v]=1),2==g[e]?c():setTimeout(function(){t(e,!0)},0)):(g[e]=1,v&&(f[v]=1),void i(e,c)))})},0),n}function i(t,e){var n,i=o.createElement("script");i.onload=i.onerror=i[d]=function(){i[c]&&!/^c|loade/.test(i[c])||n||(i.onload=i[d]=null,n=1,g[t]=2,e())},i.async=1,i.src=a?t+(t.indexOf("?")===-1?"?":"&")+a:t,s.insertBefore(i,s.lastChild)}var r,a,o=document,s=o.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",d="onreadystatechange",h={},f={},p={},g={};return n.get=i,n.order=function(t,e,i){!function r(a){a=t.shift(),t.length?n(a,r):n(a,e,i)}()},n.path=function(t){r=t},n.urlArgs=function(t){a=t},n.ready=function(i,r,a){i=i[l]?i:[i];var o=[];return!e(i,function(t){h[t]||o[l](t)})&&t(i,function(t){return h[t]})?r():!function(t){p[t]=p[t]||[],p[t][l](r),a&&a(o)}(i.join("|")),n},n.done=function(t){n([null],t)},n})},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return g[p]=i,f(p),p++}function r(t){delete g[t]}function a(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function o(t){if(m)setTimeout(o,0,t);else{var e=g[t];if(e){m=!0;try{a(e)}finally{r(t),m=!1}}}}function s(){f=function(t){e.nextTick(function(){o(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function l(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),f=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},f=function(e){t.port2.postMessage(e)}}function d(){var t=v.documentElement;f=function(e){var n=v.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function h(){f=function(t){setTimeout(o,0,t)}}if(!t.setImmediate){var f,p=1,g={},m=!1,v=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?l():t.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?d():h(),y.setImmediate=i,y.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(58))},function(t,e,n){(function(t){function i(t,e){this._id=t,this._clearFn=e}var r="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;e.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(98),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t){return t&&DataView.prototype.isPrototypeOf(t)}function n(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _.iterable&&(e[Symbol.iterator]=function(){return e}),e}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function l(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:_.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:_.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():_.arrayBuffer&&_.blob&&e(t)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||b(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return A.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function m(t){var e=new a,n=t.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}function y(e,n){return new Promise(function(i,r){function a(){s.abort()}var o=new p(e,n);if(o.signal&&o.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:m(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new v(e,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&_.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})}var _={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(_.arrayBuffer)var E=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(t){return t&&E.indexOf(Object.prototype.toString.call(t))>-1};a.prototype.append=function(t,e){t=n(t),e=i(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},a.prototype.delete=function(t){delete this.map[n(t)]},a.prototype.get=function(t){return t=n(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(n(t))},a.prototype.set=function(t,e){this.map[n(t)]=i(e)},a.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},_.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];v.redirect=function(t,e){if(T.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}y.polyfill=!0,self.fetch||(self.fetch=y,self.Headers=a,self.Request=p,self.Response=v),t.Headers=a,t.Request=p,t.Response=v,t.fetch=y,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){var i,r;i=[n(12),n(6),n(1),n(14),n(2),n(3),n(130),n(108),n(117),n(114),n(64),n(115),n(116),n(118),n(119)],r=function(t,e,n,i,r,a,o,s,u,l,c,d,h,f,p){var g=n([t],{constructor:function(t,e){this.coreModules=[],this.modulesQueue=this.config&&this.config.coreModules?r.clone(this.config.coreModules):[],this.moduleReadyHandler=a(this.target,"module-ready",r.hitch(this,this._onModuleComplete)),this.moduleErrorHandler=a(this.target,"module-error",r.hitch(this,this._onModuleComplete)),this.inherited(arguments)},loadModules:function(){if(0!=this.modulesQueue.length)for(var t=0;t<this.config.coreModules.length;t++)this.loadModule(this.config.coreModules[t].id,this._getModuleConfigById(this.config.coreModules[t].id))},loadModule:function(t,e){var n=null;switch(t){case"SyncBanners":n=u;break;case"MediaPlayer":n=l;break;case"Npe":n=d;break;case"NowPlayingApi":n=c;break;case"PlayerWebAdmin":n=h;break;case"TargetSpot":n=f;break;case"UserRegistration":n=p}n&&this._instanciateCurrentModule(n,t,e)},getModuleById:function(t){var n=null;return e.forEach(this.coreModules,function(e,i){e.id==t&&(n=e.module)},this),n},_instanciateCurrentModule:function(t,e,n){var i=new t(n,this.target);this.coreModules.push({id:e,module:i}),i.start()},_removeCurrentModuleFromQueue:function(t){var n=-1;e.forEach(this.modulesQueue,function(e,i){e.id==t&&(n=i)},this),n>-1&&this.modulesQueue.splice(n,1)},_onModuleComplete:function(t){this._removeCurrentModuleFromQueue(t.data.id);var e=this;if(0==this.modulesQueue.length){if(this.moduleReadyHandler.remove(),this.moduleErrorHandler.remove(),this.getModuleById("UserRegistration")&&this.getModuleById("MediaPlayer")){new o(r.hitch(this,this.getModuleById),this.target)}var n=this.getModuleById("MediaPlayer");if(void 0==n||"Html5"!=n.tech.type||this.config.adBlockerDetected)this.emit("player-ready");else{var i=new s,a=i.init();a.then(function(){e.emit("player-ready")},function(t){e.emit("player-ready")})}this.config.adBlockerDetected&&this.emit("ad-blocker-detected",{message:"Ad Blocker is activated"})}},_getModuleConfigById:function(t){var n={};return this.config&&this.config.coreModules&&e.forEach(this.config.coreModules,function(e){e.id==t&&(n=e)},this),n}});return g}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3)],r=function(t,e){var n=t([],{AD_MODULE_PLAYBACK_START:"ad-module-playback-start",AD_MODULE_PLAYBACK_COMPLETE:"ad-module-playback-complete",AD_MODULE_PLAYBACK_DESTROY:"ad-module-playback-destroy",AD_MODULE_PLAYBACK_ERROR:"ad-module-playback-error",AD_MODULE_COUNTDOWN:"ad-module-countdown",AD_MODULE_MEDIA_READY:"ad-module-media-ready",AD_MODULE_MEDIA_EMPTY:"ad-module-media-empty",AD_MODULE_QUARTILE:"ad-module-quartile",AD_MODULE_COMPANIONS:"ad-module-companions",AD_MODULE_CLICK_TRACKING:"ad-module-click-tracking",AD_MODULE_VAST_ERROR:"ad-module-vast-error",AD_MODULE_VAST_EMPTY:"ad-module-vast-empty",AD_MODULE_VAST_PROCESS_COMPLETE:"ad-module-vast-process-complete",emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{quartileMap:["start","firstQuartile","midpoint","thirdQuartile","complete"],constructor:function(){},getQuartileByIndex:function(t){return this.quartileMap[t]},isValidType:function(t){for(var e=0;e<this.length();e++)if(this.quartileMap[e]==t)return!0;return!1},length:function(){return this.quartileMap.length}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[],r=function(){return["970x250","120x60","300x600","728x90","970x100","300x250","88x31","300x1050","970x90","180x150","320x480","300x50","320x50","300x300","970x66","160x600"]}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(21),o=a.getProtocol();i=[n(1)],r=function(t){var e=t([],{ENDPOINT:o+"//{host}/ondemand/ars?type={type}",getVastUri:function(t){if(void 0==t.host||void 0==t.type||void 0==t.stationName&&void 0==t.stationId)return null;var e=this.ENDPOINT;return e=e.replace("{host}",t.host),e=e.replace("{type}",t.type),void 0!=t.format&&(e=e+"&fmt="+t.format),void 0!=t.stationName?e=e+"&stn="+t.stationName:void 0!=t.stationId&&(e=e+"&stid="+parseInt(t.stationId)),void 0!=t.maxAds&&(e=e+"&Max_ads="+parseInt(t.maxAds)),void 0!=t.assetType&&(e=e+"&at="+t.assetType),void 0!=t.minFileSize&&(e=e+"&minsz="+parseInt(t.minFileSize)),void 0!=t.maxFileSize&&(e=e+"&maxsz="+parseInt(t.maxFileSize)),void 0!=t.fileFormat&&(e=e+"&cntnr="+t.fileFormat),void 0!=t.minDuration&&(e=e+"&mindur="+parseInt(t.minDuration)),void 0!=t.maxDuration&&(e=e+"&maxdur="+parseInt(t.maxDuration)),void 0!=t.minBitrate&&(e=e+"&minbr="+parseInt(t.minBitrate)),void 0!=t.maxBitrate&&(e=e+"&maxbr="+parseInt(t.maxBitrate)),void 0!=t.minWidth&&(e=e+"&minw="+parseInt(t.minWidth)),void 0!=t.maxWidth&&(e=e+"&maxw="+parseInt(t.maxWidth)),void 0!=t.minHeight&&(e=e+"&minh="+parseInt(t.minHeight)),void 0!=t.maxHeight&&(e=e+"&maxh="+parseInt(t.maxHeight)),void 0!=t.audioCodec&&(e=e+"&acodec="+t.audioCodec),void 0!=t.audioMinChannels&&(e=e+"&minach="+parseInt(t.audioMinChannels)),void 0!=t.audioMaxChannels&&(e=e+"&maxach="+parseInt(t.audioMaxChannels)),void 0!=t.audioSampleRates&&(e=e+"&asr="+t.audioSampleRates),void 0!=t.videoCodec&&(e=e+"&vcodec="+t.videoCodec),void 0!=t.videoAspectRatio&&(e=e+"&vaspect="+t.videoAspectRatio),void 0!=t.minFrameRate&&(e=e+"&minfps="+parseFloat(t.minFrameRate)),void 0!=t.maxFrameRate&&(e=e+"&maxfps="+parseFloat(t.maxFrameRate)),void 0!=t.excludedCategories&&(e=e+"&iab-categories-to-exclude="+t.excludedCategories),e}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(20);i=[n(1)],r=function(t){var e=!0,n="BlockAdBlock",i=function(){var t=this,n={};this.errors={throwError:function(t,e,n){throw'Argument "'+t+'" of method "'+e+'" is not an "'+n+'"'},isObject:function(t,e,n){"object"==typeof t&&Array.isArray(t)!==!0&&null!==t||this.throwError(e,n,"object")},isArray:function(t,e,n){Array.isArray(t)===!1&&this.throwError(e,n,"array")},isFunction:function(t,e,n){"function"!=typeof t&&this.throwError(e,n,"function")},isString:function(t,e,n){"string"!=typeof t&&this.throwError(e,n,"string")},isBoolean:function(t,e,n){"boolean"!=typeof t&&this.throwError(e,n,"boolean")}},this.options={set:function(e){t.errors.isObject(e,"optionsList","options.set");for(var i in e)n[i]=e[i],t.debug.log("options.set",'Set "'+i+'" to "'+e[i]+'"');return t},get:function(t){return n[t]}},this.debug={set:function(n){return e=n,t.debug.log("debug.set",'Set debug to "'+e+'"'),t},isEnable:function(){return e},log:function(n,i){e===!0&&(t.errors.isString(n,"method","debug.log"),t.errors.isString(i,"message","debug.log"))}},this.versionToInt=function(t){for(var e="",n=0;n<3;n++){var i=t[n]||0;1===(""+i).length&&(i="0"+i),e+=i}return parseInt(e)}},r=function(){i.apply(this);var t=null,e=null;this.setDetected=function(e){return t=e,this},this.callDetected=function(){return null!==t&&(t(),t=null,!0)},this.setUndetected=function(t){return e=t,this},this.callUndetected=function(){return null!==e&&(e(),e=null,!0)}},o=function(){i.apply(this),this.options.set({timeout:200});var t=this,e=[4,0,0,"beta",3],r={},o={};this.getVersion=function(t){return t!==!0?e:void this.versionToInt(e)},this.addEvent=function(t,e){return this.errors.isString(t,"name","addEvent"),this.errors.isFunction(e,"callback","addEvent"),void 0===r[t]&&(r[t]=[]),r[t].push(e),this.debug.log("set",'Event "'+t+'" added'),this},this.on=function(t,e){return this.errors.isBoolean(t,"detected","on"),this.errors.isFunction(e,"callback","on"),this.addEvent(t===!0?"detected":"undetected",e)},this.onDetected=function(t){return this.errors.isFunction(t,"callback","onDetected"),this.addEvent("detected",t)},this.onNotDetected=function(t){return this.errors.isFunction(t,"callback","onNotDetected"),this.addEvent("undetected",t)};var l=function(e){var n=r[e];if(t.debug.isEnable()===!0){var i=void 0!==n?n.length:0;t.debug.log("dispatchEvent",'Starts dispatch of events "'+e+'" (0/'+i+")")}if(void 0!==n)for(var a in n)t.debug.isEnable()===!0&&t.debug.log("dispatchEvent",'Dispatch event "'+e+'" ('+(parseInt(a)+1)+"/"+i+")"),n[a]();return this};this.check=function(e,n){e instanceof Array==!1&&void 0===n&&(n=e,e=void 0),void 0===e&&(e=Object.keys(o)),void 0===n&&(n={}),this.errors.isArray(e,"pluginsList","check"),this.errors.isObject(n,"optionsList","check"),this.debug.log("check","Starting check");var i={},r=e.length,a=0,s=function(e,n,o){if(a++,t.debug.log("check",(n===!0?"Positive":"Negative")+'" check of plugin "'+e+'"'),o===!0||n===!0||a===r){clearTimeout(h);for(var s in i)i[s].instance.stop();l(n===!0?"detected":"undetected")}};if(this.debug.log("check","Starting loading plugins (0/"+r+") ("+e.join()+")"),0===r)return s("#NoPlugin",!1,!0),this;for(var u in e){var c=e[u];this.debug.log("check",'Load plugin "'+c+'" ('+(parseInt(u)+1)+"/"+r+")");var d=i[c]={name:c,instance:new o[c],detected:null};void 0!==n[c]&&d.instance.options.set(n[c]),function(t,e){e.instance.setDetected(function(){e.detected=!0,t(e.name,!0)}).setUndetected(function(){e.detected=!1,t(e.name,!1)})}(s,d)}for(var c in i)i[c].instance.start();var h=setTimeout(function(){s("#Timeout",!1,!0)},this.options.get("timeout"));return this},this.registerPlugin=function(t){if(this.errors.isFunction(t,"pluginClass","registerPlugin"),this.errors.isString(t.pluginName,"pluginClass.pluginName","registerPlugin"),this.errors.isArray(t.versionMin,"pluginClass.versionMin","registerPlugin"),3!==t.versionMin.length&&this.errors.throwError("pluginClass.versionMin","registerPlugin","array with 3 values"),void 0===o[t.pluginName]){if(this.versionToInt(e)>=this.versionToInt(t.versionMin))return o[t.pluginName]=t,this.debug.log("registerPlugin",'Plugin "'+t.pluginName+'" registered'),!0;throw'The plugin "'+t.pluginName+'" ('+t.versionMin.join(".")+") is too recent for this version of "+n+" ("+e.join(".")+")"}throw'The plugin "'+t.pluginName+'" is already registered'},"iOS"===a.os.family?this.registerPlugin(u):this.registerPlugin(s)};o.getPluginClass=function(){return r};var s=function(){o.getPluginClass().apply(this,arguments),this.options.set({loopTime:50,baitElement:null,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adBanner",baitStyle:"width:1px!important;height:1px!important;position:absolute!important;left:-10000px!important;top:-1000px!important;",baitParent:null});var t={};this.start=function(){var e=this;if(null===this.options.get("baitElement")){t.bait=this.createBait({class:this.options.get("baitClass"),style:this.options.get("baitStyle")});var n=this.options.get("baitParent");null===n?window.document.body.appendChild(t.bait):n.appendChild(t.bait)}else t.bait=this.options.get("baitElement");var i=function(){e.checkBait(t.bait,!0)===!0&&e.callDetected()};return t.loopTimeout=setTimeout(i,1),t.loopInterval=setInterval(i,this.options.get("loopTime")),this},this.stop=function(){clearInterval(t.loopTimeout),clearInterval(t.loopInterval);var e=this.options.get("baitParent");return null===e?window.document.body.removeChild(t.bait):e.removeChild(t.bait),this},this.createBait=function(t){var e=window.document.createElement("div");return e.setAttribute("class",t.class),e.setAttribute("style",t.style),e.offsetParent,e.offsetHeight,e.offsetLeft,e.offsetTop,e.offsetWidth,e.clientHeight,e.clientWidth,e},this.checkBait=function(t,e){var n=!1;if(e===!0&&null!==window.document.body.getAttribute("abp")||null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)n=!0;else{var i=window.getComputedStyle(t);"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(n=!0)}return n}};s.pluginName="html",s.version=[1,0,0],s.versionMin=[4,0,0];var u=function(){o.getPluginClass().apply(this,arguments),this.options.set({baitMode:"ajax",baitUrl:"https://sdk.listenlive.co/ad/banner/_adsense_/_adserver/_adview_.ad.json?adzone=top&adsize=300x250&advid={RANDOM}"});var t={};this.start=function(){var e=this;t.end=!1;var n=this.options.get("baitUrl").replace(/\{RANDOM\}/g,function(){return parseInt(1e8*Math.random())});return this._urlCheck(n,this.options.get("baitMode"),function(){t.end===!1&&(t.end=!0,e.callDetected())},function(){t.end===!1&&(t.end=!0,e.callUndetected())}),this},this.stop=function(){return t.end=!0,this},this._urlCheck=function(t,e,n,i){var r=!1,a=function(t){r===!1&&(r=!0,t===!0?n():i())};if("ajax"===e){var o=[!1,!1,!1,!1],s=null,u=function(t){if(void 0!==t)a(t);else{if(0===s)return void a(!0);for(var e=0;e<4;e++)if(o[e]===!1&&404!=s)return void a(!0);a(!1)}},l=new XMLHttpRequest;l.onreadystatechange=function(){o[l.readyState-1]=!0;try{s=l.status}catch(t){}4===l.readyState&&u()};try{l.open("GET",t,!0),l.send()}catch(t){"2153644038"==t.result&&u(!0)}}else if("import"===e){var c=document.createElement("script");c.src=t,c.onerror=function(){a(!0),window.document.body.removeChild(c)},c.onload=function(){a(!1),window.document.body.removeChild(c)},window.document.body.appendChild(c)}else a(!1)}};u.pluginName="http",s.version=[1,0,0],u.versionMin=[4,0,0];var l=t([],{constructor:function(){this.fab=new o}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(a){i=[n(1),n(2),n(3),n(13),n(6),n(7),n(11),n(52),n(10)],r=function(t,e,i,r,o,s,u,l,c){var d=(n(100),window.TdCompanions=t([r],{JS_BANNER_URL:"https://player.tritondigital.com/tpl/default/jsbanner.php",constructor:function(){this.listeners=[]},loadCompanionIframe:function(t,e,n,i){var r=s.byId(t,document);u.empty(r),u.create("iframe",{src:e,width:n,height:i,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},r)},loadCompanionStatic:function(t,e,n,i,r,o,l){o=o||"",l=l||"";var c=s.byId(t,document);u.empty(c);var d=e.substring(e.lastIndexOf(".")+1).toLowerCase();if("application/x-shockwave-flash"==l||"swf"==d){if(!a.getFlashPlayerVersion().major>0)return console.error("companions::loadCompanionStatic - SWF file embed error: Flash is not available. containerId="+t+", adSpotUrl="+e),void this.emit("companion-load-error",{containerId:t,adSpotUrl:e});e=e+(e.indexOf("?")>-1?"&":"?")+"cb_"+(new Date).getTime();var h=({expressInstall:!0,path:e,width:n,height:i,allowScriptAccess:"always",allowfullscreen:!0,allowNetworking:"all",minimumVersion:"10.2.0",vars:{clickTAG:encodeURIComponent(r)},params:{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}},"td_flash_companions");u.create("div",{id:h},c),a.embedSWF(e,h,n,i,"10.2.0",!1,{clickTAG:encodeURIComponent(r)},{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"},!1,!1)}else{var f="";void 0!=r&&(f='<a href="'+r+'" target="_blank">'),f+='<img src="'+e+'" width="'+n+'" height="'+i+'" title="'+o+'" border="0"/>',void 0!=r&&(f+="</a>"),c.innerHTML=f}},loadVASTCompanionAd:function(t,e){if(e.content)return void(s.byId(t,document).innerHTML=e.content);switch(e.resourceType.name){case"html":e.code.indexOf("<script>")>-1&&e.code.indexOf("document.write")>-1?s.byId(t,document).innerHTML=e.code:e.code.indexOf("document.write")>-1?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?code="+encodeURIComponent(e.code),this.loadVASTCompanionAd(t,e)):s.byId(t,document).innerHTML=e.code;break;case"iframe":this.loadCompanionIframe(t,e.url,e.width,e.height);break;case"static":"text/javascript"==e.creativeType?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?url="+encodeURIComponent(e.url),this.loadVASTCompanionAd(t,e)):this.loadCompanionStatic(t,e.url,e.width,e.height,e.clickThroughURL,e.altText,e.creativeType)}e.creativeView&&e.creativeView.length&&e.creativeView.forEach(function(t){window.fetch(t,{mode:"no-cors"})})},addEventListener:function(t,n){var r=-1;o.forEach(this.listeners,function(e,i){e.eventName==t&&e.callback==n&&(r=i)},this),r==-1&&this.listeners.push({eventName:t,callback:n,listener:i(this,t,e.hitch(this,n))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))}}));return d}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(37))},function(t,e,n){var i,r,a=n(97);i=[n(1),n,n(14)],r=function(t,e,n){var i=t([],{constructor:function(){},init:function(){var t="//imasdk.googleapis.com/js/sdkloader/ima3.js",e=new n;return a(t,function(){e.resolve()}),e}});return i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){var n=function(t){function e(e,n){var i,r=t.createElement(e);for(i in n)n.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return r}function n(t){var e,n,i=l[t];i&&(e=i.callback,n=i.urls,n.shift(),c=0,n.length||(e&&e.call(i.context,i.obj),l[t]=null,d[t].length&&r(t)))}function i(){var e=navigator.userAgent;s={async:t.createElement("script").async===!0},(s.webkit=/AppleWebKit\//.test(e))||(s.ie=/MSIE|Trident/.test(e))||(s.opera=/Opera/.test(e))||(s.gecko=/Gecko\//.test(e))||(s.unknown=!0)}function r(r,c,h,f,p){var g,m,v,y,_,E,b=function(){n(r)},A="css"===r,T=[];if(s||i(),c)if(c="string"==typeof c?[c]:c.concat(),A||s.async||s.gecko||s.opera)d[r].push({urls:c,callback:h,obj:f,context:p});else for(g=0,m=c.length;g<m;++g)d[r].push({urls:[c[g]],callback:g===m-1?h:null,obj:f,context:p});if(!l[r]&&(y=l[r]=d[r].shift())){for(u||(u=t.head||t.getElementsByTagName("head")[0]),_=y.urls.concat(),g=0,m=_.length;g<m;++g)E=_[g],A?v=s.gecko?e("style"):e("link",{href:E,rel:"stylesheet"}):(v=e("script",{src:E}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),s.ie&&!A&&"onreadystatechange"in v&&!("draggable"in v)?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,b())}:A&&(s.gecko||s.webkit)?s.webkit?(y.urls[g]=v.href,o()):(v.innerHTML='@import "'+E+'";',a(v)):v.onload=v.onerror=b,T.push(v);for(g=0,m=T.length;g<m;++g)u.appendChild(T[g])}}function a(t){var e;try{e=!!t.sheet.cssRules}catch(i){return c+=1,void(c<200?setTimeout(function(){a(t)},50):e&&n("css"))}n("css")}function o(){var t,e=l.css;if(e){for(t=h.length;--t>=0;)if(h[t].href===e.urls[0]){n("css");break}c+=1,e&&(c<200?setTimeout(o,50):n("css"))}}var s,u,l={},c=0,d={css:[],js:[]},h=t.styleSheets;return{css:function(t,e,n,i){r("css",t,e,n,i)},js:function(t,e,n,i){r("js",t,e,n,i)}}};t.exports=new n(window.document)},function(t,e,n){var i;(function(t){var r=function(){this.version="1.3";var t={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},e=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t},this.parseString=function(t,e){return this.parseXML(this.stringToXML(t),e)},this.parseXML=function(i,a){for(var o in a)t[o]=a[o];var s={},u=0,l="";if(t.xmlns&&i.namespaceURI&&(s[t.namespaceKey]=i.namespaceURI),i.attributes&&i.attributes.length>0){var c={};for(u;u<i.attributes.length;u++){var d=i.attributes.item(u);g={};var h="";h=t.stripAttrPrefix?d.name.replace(e,""):d.name,t.grokAttr?g[t.valueKey]=this.grokType(d.value.replace(n,"")):g[t.valueKey]=d.value.replace(n,""),t.xmlns&&d.namespaceURI&&(g[t.namespaceKey]=d.namespaceURI),t.attrsAsObject?c[h]=g:s[t.attrKey+h]=g;
}t.attrsAsObject&&(s[t.attrKey]=c)}if(i.hasChildNodes())for(var f,p,g,m=0;m<i.childNodes.length;m++)f=i.childNodes.item(m),4===f.nodeType?t.mergeCDATA?l+=f.nodeValue:s.hasOwnProperty(t.cdataKey)?(s[t.cdataKey].constructor!==Array&&(s[t.cdataKey]=[s[t.cdataKey]]),s[t.cdataKey].push(f.nodeValue)):t.childrenAsArray?(s[t.cdataKey]=[],s[t.cdataKey].push(f.nodeValue)):s[t.cdataKey]=f.nodeValue:3===f.nodeType?l+=f.nodeValue:1===f.nodeType&&(0===u&&(s={}),p=t.stripElemPrefix?f.nodeName.replace(e,""):f.nodeName,g=r.parseXML(f),s.hasOwnProperty(p)?(s[p].constructor!==Array&&(s[p]=[s[p]]),s[p].push(g)):(t.childrenAsArray?(s[p]=[],s[p].push(g)):s[p]=g,u++));else l||(t.childrenAsArray?(s[t.textKey]=[],s[t.textKey].push(null)):s[t.textKey]=null);if(l)if(t.grokText){var v=this.grokType(l.replace(n,""));null!==v&&void 0!==v&&(s[t.textKey]=v)}else t.normalize?s[t.textKey]=l.replace(n,"").replace(/\s+/g," "):s[t.textKey]=l.replace(n,"");return s},this.xmlToString=function(t){try{var e=t.xml?t.xml:(new XMLSerializer).serializeToString(t);return e}catch(t){return null}},this.stringToXML=function(t){try{var e=null;if(window.DOMParser){var n=new DOMParser;return e=n.parseFromString(t,"text/xml")}return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}catch(t){return null}},this}.call({});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:(i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}).call(e,n(28)(t))},function(t,e,n){function i(t){return n(r(t))}function r(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./en.json":57,"./es.json":93,"./fr.json":94,"./pt.json":95};i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=111},function(t,e){var n=function(){function t(){if(!K){try{var t=F.getElementsByTagName("body")[0].appendChild(v("span"));t.parentNode.removeChild(t)}catch(t){return}K=!0;for(var e=j.length,n=0;n<e;n++)j[n]()}}function e(t){K?t():j[j.length]=t}function i(t){if(typeof M.addEventListener!=D)M.addEventListener("load",t,!1);else if(typeof F.addEventListener!=D)F.addEventListener("load",t,!1);else if(typeof M.attachEvent!=D)y(M,"onload",t);else if("function"==typeof M.onload){var e=M.onload;M.onload=function(){e(),t()}}else M.onload=t}function r(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=v(I);e.setAttribute("type",O);var n=t.appendChild(e);if(n){var i=0;!function(){if(typeof n.GetVariable!=D){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),Y.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,o()}()}else o()}function o(){var t=G.length;if(t>0)for(var e=0;e<t;e++){var n=G[e].id,i=G[e].callbackFn,r={success:!1,id:n};if(Y.pv[0]>0){var a=m(n);if(a)if(!_(G[e].swfVersion)||Y.wk&&Y.wk<312)if(G[e].expressInstall&&u()){var o={};o.data=G[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,n,i)}else c(a),i&&i(r);else b(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(b(n,!0),i){var g=s(n);g&&typeof g.SetVariable!=D&&(r.success=!0,r.ref=g),i(r)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=D)e=n;else{var i=n.getElementsByTagName(I)[0];i&&(e=i)}return e}function u(){return!W&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,n,i){W=!0,k=i||null,w={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(T=d(r),S=null):(T=r,S=n),t.id=x,(typeof t.width==D||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==D||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?"ActiveX":"PlugIn",o="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=D?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=r.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(t,e,n)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=v("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(I)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function h(t,e,n){var i,r=m(n);if(Y.wk&&Y.wk<312)return i;if(r)if(typeof t.id==D&&(t.id=n),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,i=m(t.id)}else{var l=v(I);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);r.parentNode.replaceChild(l,r),i=l}return i}function f(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function p(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?g(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function g(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function v(t){return F.createElement(t)}function y(t,e,n){t.attachEvent(e,n),V[V.length]=[t,e,n]}function _(t){var e=Y.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function E(t,e,n,i){if(!Y.ie||!Y.mac){var r=F.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(C=null,L=null),!C||L!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),C=r.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=D&&F.styleSheets.length>0&&(C=F.styleSheets[F.styleSheets.length-1]),L=a}Y.ie&&Y.win?C&&typeof C.addRule==I&&C.addRule(t,e):C&&typeof F.createTextNode!=D&&C.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function b(t,e){if(q){var n=e?"visible":"hidden";K&&m(t)?m(t).style.visibility=n:E("#"+t,"visibility:"+n)}}function A(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=D?encodeURIComponent(t):t}var T,S,k,w,C,L,D="undefined",I="object",R="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",x="SWFObjectExprInst",N="onreadystatechange",M=window,F=document,U=navigator,B=!1,j=[r],G=[],H=[],V=[],K=!1,W=!1,q=!0,Y=function(){var t=typeof F.getElementById!=D&&typeof F.getElementsByTagName!=D&&typeof F.createElement!=D,e=U.userAgent.toLowerCase(),n=U.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=D&&typeof U.plugins[R]==I)u=U.plugins[R].description,!u||typeof U.mimeTypes!=D&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M.ActiveXObject!=D)try{var l=new ActiveXObject(P);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){Y.w3&&((typeof F.readyState!=D&&"complete"==F.readyState||typeof F.readyState==D&&(F.getElementsByTagName("body")[0]||F.body))&&t(),K||(typeof F.addEventListener!=D&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(N,function(){"complete"==F.readyState&&(F.detachEvent(N,arguments.callee),t())}),M==top&&!function(){if(!K){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!K)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var i=H.length,r=0;r<i;r++)p(H[r]);for(var a in Y)Y[a]=null;Y=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(t,e,n,i){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,G[G.length]=r,b(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,n,i,r,a,o,s,c,d,f){var p={success:!1,id:n};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&n&&i&&r&&a?(b(n,!1),e(function(){i+="",r+="";var e={};if(d&&typeof d===I)for(var g in d)e[g]=d[g];e.data=t,e.width=i,e.height=r;var m={};if(c&&typeof c===I)for(var v in c)m[v]=c[v];if(s&&typeof s===I)for(var y in s)typeof m.flashvars!=D?m.flashvars+="&"+y+"="+s[y]:m.flashvars=y+"="+s[y];if(_(a)){var E=h(e,m,n);e.id==n&&b(n,!0),p.success=!0,p.ref=E}else{if(o&&u())return e.data=o,void l(e,m,n,f);b(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,n){return Y.w3?h(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Y.w3&&u()&&l(t,e,n,i)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,n,i){Y.w3&&E(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return A(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return A(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var t=m(x);t&&T&&(t.parentNode.replaceChild(T,t),S&&(b(S,!0),Y.ie&&Y.win&&(T.style.display="block")),k&&k(w)),W=!1}}}}()},function(t,e,n){(function(t){var e=n(1),i=n(2),r=n(3),a=n(13),o=n(6),s=n(101),u=n(104),l=n(106),c=n(18),d=n(22),h=!1,f=function(){h||(document.removeEventListener("touchend",f,!1),document.removeEventListener("touchmove",p,!1),d.init()),h=!1},p=function(){h=!0};document.addEventListener("touchend",f,!1),document.addEventListener("touchmove",p,!1),window.TDSdk=e([],{NAME:"TDSdk",constructor:function(t){this.listeners=[],this.target=new a,this.abBlockProcessFinish=!1,this.MediaElement=d,r(this.target,"module-ready",i.hitch(this,this._onModuleReady));var e=new l;"undefined"==typeof e.fab?this._onAdBlock(t,!0):(e.fab.onDetected(i.hitch(this,this._onAdBlock,t,!0)),e.fab.onNotDetected(i.hitch(this,this._onAdBlock,t,!1)),e.fab.check()),t.playerReady&&this.addEventListener("player-ready",t.playerReady),t.configurationError&&this.addEventListener("configuration-error",t.configurationError),t.moduleError&&this.addEventListener("module-error",t.moduleError),t.adBlockerDetected&&this.addEventListener("ad-blocker-detected",t.adBlockerDetected),this.loadModules()},_parseConfig:function(t,e){if(!t||!t.coreModules)return{coreModules:[]};var n=[],i={},r=o.filter(t.coreModules,function(t){return"SyncBanners"==t.id});if(r.length&&!e){var a=r[0];i=a,o.forEach(a.elements,function(t){if(void 0!=t.width&&void 0!=t.height){var e=t.width+"x"+t.height;o.indexOf(u,e)!=-1&&n.push(e)}},this)}if(r=o.filter(t.coreModules,function(t){return"MediaPlayer"==t.id}),r.length){var s=r[0];s.adBlockerDetected=e,s.adBlockerDetected&&void 0!=s.plugins&&(this._removeMediaplayerPlugins("vastAd",s.plugins),this._removeMediaplayerPlugins("mediaAd",s.plugins)),s.companionAdSelectionSettings=i,void 0==s.defaultTrackingParameters&&(s.defaultTrackingParameters={}),s.defaultTrackingParameters.banners=void 0!=s.defaultTrackingParameters.banners?this._unique(s.defaultTrackingParameters.banners.concat(n)):n,s.defaultTrackingParameters.log={},s.defaultTrackingParameters.log.tdsdk="js-"+this.version.value.substring(0,3),s.defaultTrackingParameters.log.pname=this.NAME,s.defaultTrackingParameters.log.pversion=this.version.value.substring(0,3)}return"string"==typeof t.locale&&c.setLocalization(t.locale),t},_removeMediaplayerPlugins:function(t,e){o.forEach(e,function(n,i){n&&n.id==t&&e.splice(i,1)})},_onModuleReady:function(t){t.data.module.api&&e.safeMixin(this,t.data.module.api),this[t.data.id]=t.data.module},_onAdBlock:function(t,e){t&&(this.abBlockProcessFinish=!0,t.adBlockerDetected=e,this.moduleManager=new s(this._parseConfig(t,e),this.target),this.loadModulesCalled&&this.moduleManager.loadModules())},loadModules:function(){this.abBlockProcessFinished?this.moduleManager.loadModules():this.loadModulesCalled=!0},loadModule:function(t,e){this.moduleManager.loadModule(t,e)},getModuleById:function(t){return this.moduleManager.getModuleById(t)},addEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n==-1&&this.listeners.push({eventName:t,callback:e,listener:r(this.target,t,i.hitch(this,e))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,function(i,r){i.eventName==t&&i.callback==e&&(n=r)},this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))},_unique:function(t){var e={};return o.filter(t,function(t){return!e[t]&&(e[t]=!0)})},version:{value:"@tdversion@",build:"@tdbuild@",codename:"bitter lime"},flash:{available:t.getFlashPlayerVersion().major>0,version:t.getFlashPlayerVersion()}})}).call(e,n(37))},function(t,e,n){var i,r,a=(n(72),n(20)),o=n(18),s=n(138),u=n(139),l=n(21),c=n(22),d=n(8);i=[n(6),n(1),n(14),n(2),n(4),n(3),n(26),n(17),n(7),n(11),n(19),n(120),n(12),n(132),n(131)],r=function(t,e,n,i,r,h,f,p,g,m,v,y,_,E,b){var A=e([_],{LIVE_PLAYING:"livePlaying",LIVE_STOPPED:"liveStopped",statusMap:{GETTING_STATION_INFORMATION:{status:"gettingStationInformation",code:"GETTING_STATION_INFORMATION"},STREAM_GEO_BLOCKED:{status:"streamGeoBlocked",code:"STREAM_GEO_BLOCKED"},STATION_NOT_FOUND:{status:"stationNotFound",code:"STATION_NOT_FOUND"},PLAY_NOT_ALLOWED:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.inherited(arguments);var n=this;"function"==typeof __cmp?__cmp("getConsentData",null,function(t){n.consentData=t,void 0!=n.config.idSync&&n._loadIdSync(n.config.idSync)}):void 0!=this.config.idSync&&this._loadIdSync(this.config.idSync),this.liveStreamConfig=null,this.streamingConnections=null,this.liveStreamConfiguration=null,this.tech=null,this.techErrors=[],this.techPriority=this.config.techPriority&&this.config.techPriority.length>0?this.config.techPriority:["Html5","Flash"],(r("ios")||r("android")||r("bb")||r("safari")>7||l.currentProtocolIsHttps())&&(this.techPriority=["Html5"]),this.geoTargeting=void 0!=this.config.geoTargeting?this.config.geoTargeting:{desktop:{isActive:!0},iOS:{isActive:!1},android:{isActive:!1}},this.isGeoTargetingActive=!1,this.position=null,this.geoTargeting&&this._initGeoTargeting(),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.adManager=null,this._lowActivated=!1,this._isPlaying=!1,this.fallbackTried=!1,this.api={play:i.hitch(this,this._play),pause:i.hitch(this,this._pause),stop:i.hitch(this,this._stop),resume:i.hitch(this,this._resume),seek:i.hitch(this,this._seek),seekLive:i.hitch(this,this.seekLive),restartConnectionTimeOut:i.hitch(this,this.restartConnectionTimeOut),setVolume:i.hitch(this,this.setVolume),getVolume:i.hitch(this,this.getVolume),mute:i.hitch(this,this.mute),unMute:i.hitch(this,this.unMute),playAd:i.hitch(this,this.playAd),skipAd:i.hitch(this,this.skipAd),destroyAd:i.hitch(this,this.destroyAd),initMediaElement:i.hitch(this,this._initMediaElement),destroy:i.hitch(this,this._destroy),reloadSyncBanner:i.hitch(this,this.reloadSyncBanner)},f.subscribe("api/request",i.hitch(this,this._onApiInternalRequest))},start:function(){h(this.target,"tech-ready",i.hitch(this,this._onTechReady)),h(this.target,"tech-error",i.hitch(this,this._onTechError)),this._loadTech(this.techPriority[0])},_onApiInternalRequest:function(){var t=arguments[0],e=i.hitch(this,this.INTERNAL_REQUEST_API_FUNCTIONS[t]);"function"==typeof e&&e(arguments[1])},_onApiRequestGetAlternateContent:function(t){if(t){var e=this._getCurrentLiveApiParams();t.mount?(e.station=null,e.mount=t.mount,this._play(e)):t.url&&(e.station=null,e.mount=null,e.url=t.url,this.tech.isLiveStream=!0,this.tech.play({file:e.url}))}},_onApiRequestGetVastInstream:function(t){null!=t.vastUrl?this._getAdManager().playAd("vastAd",{url:t.vastUrl,skipMediaAdPlayback:!0,adBreak:!0}):null!=t.adVast&&this._getAdManager().playAd("vastAd",{rawXML:t.adVast,skipMediaAdPlayback:!0,adBreak:!0})},_hqTags:[],addHqTag:function(e){t.indexOf(this._hqTags,e)==-1&&this._hqTags.push(e)},removeHqTag:function(e){var n=t.indexOf(this._hqTags,e);n!=-1&&this._hqTags.splice(n,1)},_lowTags:["low-bw"],addLowTag:function(e){t.indexOf(this._lowTags,e)==-1&&this._lowTags.push(e)},removeLowTag:function(e){var n=t.indexOf(this._lowTags,e);n!=-1&&this._lowTags.splice(n,1)},_hqEnabled:!1,enableHQ:function(){this._hqEnabled=!0,!this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},disableHQ:function(){this._hqEnabled=!1,this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},_lowEnabled:!0,enableLow:function(){this._lowEnabled=!0,this._refreshConnectionIterator()},disableLow:function(){this._lowEnabled=!1,this.isLow()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},activateLow:function(){this._lowEnabled&&(this._lowActivated=!0,!this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator())},deactivateLow:function(){this._lowActivated=!1,this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator()},_refreshConnectionIterator:function(t){if(t){if(t.length>0)return this.emit("stream-config-ready"),this.tech.setConnectionIterator(new s(t)),!0;this.emit("stream-config-error",{errors:this.liveStreamConfig.mountPointsError}),this.tech.setConnectionIterator(null);var e=!1,n=!1;return d.forEach(this.liveStreamConfig.mountPointsError,function(t){t.status.isGeoBlocked&&(e=!0),t.alternateContent&&(n=t.alternateContent)}),e?(this._emitStreamStatusByCode(this.statusMap.STREAM_GEO_BLOCKED),n&&f.publish("api/request","get-alternate-content",n)):this._emitStreamStatusByCode(this.statusMap.STATION_NOT_FOUND),!1}},_loadTech:function(t){i.hitch(this,this._techLoaded),i.hitch(this,this._techLoadingError);switch(t){case"Html5":this._techLoaded(E,t);break;case"Flash":this._techLoaded(b,t)}},_techLoaded:function(t,e){this.tech=new t(this.config,this.target,e),this.tech.start()},_techLoadingError:function(t){console.error("mediaPlayer::_techError - "+t),this.emit("module-error",{id:"MediaPlayer",error:t})},_onTechReady:function(t){this.liveStreamConfig=new u(this.config.platformId,a,this.tech.type,this.config.hls,this.config.audioAdaptive,this.config.forceHls,this.config.forceHslts,this.config.playerServicesRegion),h(this.target,"stream-start",i.hitch(this,this._onStreamStart)),h(this.target,"stream-stop",i.hitch(this,this._onStreamStop)),this.emit("module-ready",{id:"MediaPlayer",module:this})},_onStreamStart:function(){this._isPlaying=!0},_onStreamStop:function(){this._isPlaying=!1},_onTechError:function(t){console.error("mediaPlayer::_onTechError"),this.techPriority.length>1&&0==this.fallbackTried?(this.techErrors.push(t),this.fallbackTried=!0,this._loadTech(this.techPriority[1])):(this.techErrors.push(t),this.emit("module-error",{id:"MediaPlayer",errors:this.techErrors}))},_initGeoTargeting:function(){void 0!=r("ios")&&void 0!=this.geoTargeting.iOS&&void 0!=this.geoTargeting.iOS.isActive&&1==this.geoTargeting.iOS.isActive?this.isGeoTargetingActive=!0:void 0!=r("android")&&void 0!=this.geoTargeting.android&&void 0!=this.geoTargeting.android.isActive&&1==this.geoTargeting.android.isActive?this.isGeoTargetingActive=!0:void 0==r("ios")&&void 0==r("android")&&void 0!=this.geoTargeting.desktop&&void 0!=this.geoTargeting.desktop.isActive&&1==this.geoTargeting.desktop.isActive&&(this.isGeoTargetingActive=!0),1==this.isGeoTargetingActive&&this._getLocation()},_play:function(t){if(void 0!=t){this.tech.prepare(),this._initMediaElement();var e=this;if(t.trackingParameters=this._getFinalTrackingParameters(t.trackingParameters),void 0!=t.file&&""!=t.file)e.tech.play(t);else{this._emitStreamStatusByCode(this.statusMap.GETTING_STATION_INFORMATION),this._liveApiParams=t;var n=("Flash"==this.tech.type?this.liveStreamConfig.RTMP_TRANSPORTS:[]).concat(this.liveStreamConfig.DEFAULT_TRANSPORTS),i={station:t.station,mount:t.mount,transports:n},r=[];this._hqEnabled&&(r=r.concat(this._hqTags)),this._lowEnabled&&(r=r.concat(this._lowTags)),this.liveStreamConfig.getStreamingConnections(i,r).then(function(n){this.streamingConnections=n,e._refreshConnectionIterator(n)&&e.tech.play(t)}).catch(function(t){e.emit("stream-config-load-error",{error:t})})}}},isPlaying:function(){return this._isPlaying},hasHQ:function(){var t=this;return d.some(this._hqTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},tagsToLookup:function(t,e){return d.some(e,function(e){return d.some(e.tags,function(e){return e.name===t})})},isHQ:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._hqTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},hasLow:function(){var t=this;return d.some(this._lowTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},isLow:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._lowTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},_pause:function(){this.tech.pause()},_stop:function(){this.tech.stop()},_resume:function(){this.tech.resume()},_seek:function(t){this.tech.seek(t)},seekLive:function(){this.tech.seekLive()},restartConnectionTimeOut:function(){this.tech.restartConnectionTimeOut()},setVolume:function(t){this.tech.setVolume(t)},getVolume:function(){return this.tech.getVolume()},mute:function(){this.tech.mute()},unMute:function(){this.tech.unMute()},playAd:function(t,e){e.trackingParameters=this._getFinalTrackingParameters(e.trackingParameters),this._getAdManager().playAd(t,e),this.tech.playAdCalled=!0},skipAd:function(){this._getAdManager().skipAd()},reloadSyncBanner:function(){this._getAdManager().reloadSyncBanner()},destroyAd:function(){this._getAdManager().destroyAd(!0)},_initMediaElement:function(){c.init()},_destroy:function(){this._stop(),setTimeout(function(){var t=document.getElementById("tdplayer_ondemand");t&&(c.destroyAudioElement(),c.resetAudioNode(),m.destroy(t))},500)},_getAdManager:function(){return null==this.adManager&&(this.adManager=new y(this.tech,this.tech.type,this.target,this.config)),this.adManager},_emitStreamStatusByCode:function(t){var e=o.getLocalization();void 0!=e&&e[t.status]&&this.emit("stream-status",{code:t.code,status:e[t.status]})},_getLocation:function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(i.hitch(this,this._setPosition),i.hitch(this,this._getPositionErrorHandler),{enableHighAccuracy:!0,timeout:2e3})},_setPosition:function(t){this.position=void 0!=t&&void 0!=t.coords.latitude&&void 0!=t.coords.longitude?t:null},_getPositionErrorHandler:function(t){console.info("mediaPlayer::_getPositionErrorHandler, code : "+t.code+", message : "+t.message),this.position=null},_getGeoTargetingPos:function(t){return null!=this.position&&void 0!=this.position&&void 0!=this.position.coords.latitude&&void 0!=this.position.coords.longitude?void 0!=t?(t.lat=parseFloat(this.position.coords.latitude.toFixed(1)),t.long=parseFloat(this.position.coords.longitude.toFixed(1)),t):{lat:parseFloat(this.position.coords.latitude.toFixed(1)),long:parseFloat(this.position.coords.longitude.toFixed(1))}:t},_getFinalTrackingParameters:function(e){void 0==e&&(e={}),e.tdsdk=this.config.defaultTrackingParameters.log.tdsdk,this.isGeoTargetingActive&&(e=this._getGeoTargetingPos(e)),d.isEmpty(this.config.defaultTrackingParameters.banners)&&(this.config.defaultTrackingParameters.banners=[],this.config.defaultTrackingParameters.banners.push("none")),"Flash"!=this.tech.type||this.config.adBlockerDetected||this.config.defaultTrackingParameters.banners.indexOf("none")!==-1||(t.indexOf(this.config.defaultTrackingParameters.banners,"swf")==-1&&this.config.defaultTrackingParameters.banners.push("swf"),t.indexOf(this.config.defaultTrackingParameters.banners,"vpaid")==-1&&this.config.defaultTrackingParameters.banners.push("vpaid")),e.pname||(e.pname=this.config.defaultTrackingParameters.log.pname,e.pversion=this.config.defaultTrackingParameters.log.pversion),void 0!=this.config.defaultTrackingParameters.banners&&this.config.defaultTrackingParameters.banners.length&&(void 0!=e.banners&&e.banners.length&&e.banners.indexOf(this.config.defaultTrackingParameters.banners.join())==-1?e.banners+=","+this.config.defaultTrackingParameters.banners.join():e.banners=this.config.defaultTrackingParameters.banners.join());for(var n in this.config.defaultTrackingParameters.user)e[n]=this.config.defaultTrackingParameters.user[n];return this.consentData&&(e.gdpr=this.consentData.gdprApplies?1:0,e.gdpr_consent=this.consentData.consentData),e},_getCurrentLiveApiParams:function(){return this._liveApiParams},_loadIdSync:function(t){var e=this._getIdSyncQueryParam(t);g.byId("idSyncScript",document)&&m.destroy(g.byId("idSyncScript",document)),scriptTag=m.create("script",{id:"idSyncScript"},g.byId(this.config.playerId,document)),v.set(scriptTag,"type","text/javascript"),v.set(scriptTag,"src","//playerservices.live.streamtheworld.com/api/idsync.js?"+e),document.getElementsByTagName("body")[0].appendChild(scriptTag)},_getIdSyncQueryParam:function(t){var e;if(t.station?e="station="+t.station:t.stationId?e="stationId="+t.stationId:t.mount&&(e="mount="+t.mount),void 0!=e){this.consentData&&(t.gdpr=this.consentData.gdprApplies?1:0,t.gdpr_consent=this.consentData.consentData),e=t.gdpr&&t.gdpr.toString().match(/^[0,1]$/g)?e+"&gdpr="+t.gdpr:e,e=t.gdpr_consent?e+"&gdpr_consent="+t.gdpr_consent:e;var n=t.dob&&!isNaN(Date.parse(t.dob))?new Date(t.dob.replace(/-/g,"/")):null;if(n){var i=n.getFullYear(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0"+n.getDate():n.getDate();e=n?e+"&dob="+i+"-"+r+"-"+a:e}return e=t.yob&&!isNaN(t.yob)&&e.indexOf("dob")===-1?e+"&yob="+t.yob:e,e=t.age&&!isNaN(t.age)&&t.age>0&&t.age<=125&&e.indexOf("dob")===-1&&e.indexOf("yob")===-1?e+"&age="+t.age:e,e=t.gender&&t.gender.match(/[m,f]/g)&&1===t.gender.length?e+"&gender="+t.gender:e,e=t.ip&&t.ip.match(/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/g)?e+"&ip="+t.ip:e}}});return A}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(15);i=[n(1),n(14),n(2),n(10),n(12),n(153)],r=function(t,e,n,i,r,o){var s=t([r],{constructor:function(t,e){this.platform=new a(t.platformId),this.library=[],this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"Npe",module:this})},loadNpeMetadata:function(t,n,i){var r=this._urlToNPEId(t),a=this.getSongByNpeId(r);if(null!=a){this.emit("npe-song",{song:a});var o=new e;return o.resolve({song:a}),o}return this._fetchData(!1,r,t,n,i,new e)},getSongByNpeId:function(t){for(var e=this.library.length,n=0;n<e;n++)if(this.library[n].npeId==t)return this.library[n];return null},getDynamicUrl:function(){return this.platform.endpoint.npe},_getDynamicSongUrl:function(t,e){return this.getDynamicUrl()+"song?artist="+encodeURIComponent(t)+"&title="+encodeURIComponent(e)},_fetchData:function(t,e,r,a,o,s){t&&(r=this._getDynamicSongUrl(a,o));var u=new i;return u.request(r,{npeId:e,npUrl:r,isDynamicCall:t,artist:a,title:o,deferred:s},this._getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError)),s},_onLoadError:function(t,e){return console.error("npe::_onLoadError - npUrl="+t.npUrl+" - error="+e),0!=t.isDynamicCall?(this.emit("npe-song-error",{npeId:this._urlToNPEId(t.npUrl)}),t.deferred.reject({npeId:this._urlToNPEId(t.npUrl)})):void this._fetchData(!0,t.npeId,null,t.artist,t.title,t.deferred)},_onLoadComplete:function(t,e){var n=new o(e.song,this._urlToNPEId(t.npUrl),this.config.platformId);return this.library.push(n),this.emit("npe-song",{song:n}),t.deferred.resolve({song:n})},_getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},_urlToNPEId:function(t){if(null==t||void 0==t||""==t)return null;var e=t.lastIndexOf("/");return t.substr(e-2,2)+t.substring(e+1,t.lastIndexOf("."))}});return s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(15);i=[n(1),n(2),n(12),n(10)],r=function(t,e,n,i){var r=t([n],{constructor:function(t,e){this.platform=new a(t.platformId),this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"PlayerWebAdmin",module:this})},load:function(t,n){var r=e.hitch(this,this._onLoadComplete),a=e.hitch(this,this._onLoadError),o=new i,s=this._getRequestArgs(t,n);o.request(this.platform.endpoint.playerWebAdmin,s.query,{handleAs:"xml",preventCache:!0,query:s.query,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(e,n){r(t,JSON.parse(n))},function(e,n){a(t,"An unexpected error occurred: "+n)})},_onLoadError:function(t,e){console.error("playerWebAdmin::_onLoadError - mount="+t+" - error="+e),this.emit("pwa-data-error",{mount:t,error:e})},_onLoadComplete:function(t,e){this.emit("pwa-data-loaded",{mount:t,config:e})},_getRequestArgs:function(t,e){return{jsonp:"callback",preventCache:!0,query:{callsign:t,streamid:e}}}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(6),n(7),n(3),n(11),n(12),n(107)],r=function(t,e,n,i,r,a,o,s){var u=t([o],{LEGACY:"legacy",VAST:"vast",constructor:function(t,e){this.inherited(arguments),this._vastCompanionPriority=t.vastCompanionPriority||["static","iframe","html"],this.companions=new s},start:function(){this.config.elements&&(r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),r(this.target,"vast-companions-ready",e.hitch(this,this._onVastCompanionsReady)),r(this.target,"ad-break-cue-point",e.hitch(this,this._onAdBreakCuePoint)),r(this.target,"ad-break-cue-point-complete",e.hitch(this,this._onAdBreakCuePointComplete)),r(this.target,"stream-stop",e.hitch(this,this._onStreamStop))),this.emit("module-ready",{id:"SyncBanners",module:this})},getSyncedElementBySize:function(t,e){var i=null;return n.forEach(this.config.elements,function(n){n.width==t&&n.height==e&&(i=n)},this),i},_onAdBreakCuePoint:function(t){var n=t.data.adBreakData,i=n.url;if(n.isVastInStream)this._cleanAdVastListeners(),this.vastProcessCompleteListener=r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),this.vastErrorListener=r(this.target,"ad-playback-error",e.hitch(this,this._onVastAdPlaybackError));else if(i&&i.length>1&&i.indexOf("|")!=-1){
var a=i.split("|")[1],o=i.split("|")[0];a&&a.length>1&&null!=this.getSyncedElementBySize(300,250)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(300,250).id,url:a}),this._loadElementIframe(this.getSyncedElementBySize(300,250).id,a,300,250)),o&&o.length>1&&null!=this.getSyncedElementBySize(728,90)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(728,90).id,url:o}),this._loadElementIframe(this.getSyncedElementBySize(728,90).id,o,728,90))}},_onAdBreakCuePointComplete:function(t){this.config.keepElementsVisible||this._hideElements()},_onStreamStop:function(){this._hideElements()},_hideElements:function(){var t=this.getSyncedElementBySize(300,250);null!=t&&null!=i.byId(t.id,document)&&a.empty(i.byId(t.id,document));var e=this.getSyncedElementBySize(728,90);null!=e&&null!=i.byId(e.id,document)&&a.empty(i.byId(e.id,document))},_loadElementIframe:function(t,e,n,r){var o=i.byId(t,document);null!=o&&(a.empty(o),a.create("iframe",{src:e,width:n,height:r,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},o))},_showVastCompanions:function(t){this._cleanAdVastListeners();var e=this._filterCompanionAds(t.data.companions);e&&e.length&&n.forEach(e,function(t,n){var r=this.getSyncedElementBySize(t.width,t.height);null!=r&&null!=i.byId(r.id,document)&&(this.emit("ad-break-synced-element",{type:this.VAST,id:r.id,data:e[n]}),this.companions.loadVASTCompanionAd(r.id,e[n]))},this)},_onVastProcessComplete:function(t){this._showVastCompanions(t)},_onVastCompanionsReady:function(t){this._showVastCompanions(t)},_onVastAdPlaybackError:function(t){console.error("syncBanners::_onVastAdPlaybackError"),console.error(t),this._cleanAdVastListeners()},_cleanAdVastListeners:function(){this.vastProcessCompleteListener&&this.vastProcessCompleteListener.remove(),this.vastErrorListener&&this.vastErrorListener.remove()},_filterCompanionAds:function(t){if(!t||!t.length)return t;var e=[],i=[];return n.forEach(this._vastCompanionPriority,function(r){n.forEach(t,function(t){var a=t.width+t.height;t.resourceType.name==r&&n.indexOf(i,a)<0&&(e.push(t),i.push(a))},this)},this),e}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(12),n(7),n(11)],r=function(t,e,n,i,r){var a=t([n],{constructor:function(t,e){this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"TargetSpot",module:this})},embed:function(t,n,a,o){var s=r.create("div",{id:"tsWrapper"},i.byId(t,document));window.ts_ready=e.hitch(this,this._tsReady);try{window.ts_swf_embed(s.id,this._getComponentSettings(n,a,o))}catch(t){this.emit("module-error",{id:"TargetSpot",error:"Error in targetSpot::embed: "+t.message})}},_getComponentSettings:function(t,e,n){return{w:300,h:250,prl:n,pageDomain:"player.tritondigital.com",htmlBanner:0,s:t,v:e}},playAd:function(t){window.ts_streamEvent({eventType:"playAd",eventDuration:t})},playPreroll:function(){window.ts_streamEvent({eventType:"tsPlayPreroll"})},interruptAd:function(){window.ts_streamEvent({eventType:"interruptAd"})},setStationId:function(t){window.ts_setStation({stationId:t})},setVolume:function(t){window.ts_setVolume({volume:t})},ts_setTargeting:function(t,e){window.ts_setTargeting({eventType:t,eventData:e})},_tsReady:function(){window.ts_mutePlayer=e.hitch(this,this._ts_mutePlayer),window.ts_unmutePlayer=e.hitch(this,this._ts_unmutePlayer),window.ts_noAds=e.hitch(this,this._ts_noAds),window.ts_noPreRoll=e.hitch(this,this._ts_noPreRoll),window.ts_adStarted=e.hitch(this,this._ts_adStarted),window.ts_adFinished=e.hitch(this,this._ts_adFinished),this.emit("targetspot-ready")},_ts_mutePlayer:function(t){this.emit("targetspot-mute")},_ts_unmutePlayer:function(){this.emit("targetspot-unmute")},_ts_noAds:function(){this.emit("targetspot-no-ads")},_ts_noPreRoll:function(){this.emit("targetspot-no-preroll")},_ts_adStarted:function(t){this.emit("targetspot-ad-started")},_ts_adFinished:function(t){this.emit("targetspot-ad-finished")}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(109),o=n(15);i=[n(1),n(2),n(14),n(12)],r=function(t,e,n,i){var r=t([i],{constructor:function(t,e){this.inherited(arguments),this.see=null,this.seeRegApi=null,this.seeMetaApi=null,this.tenantId=t.tenantId,this.seeApiUrl=t.seeApiUrl,this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"UserRegistration",module:this})},init:function(){var t=(void 0!=this.seeApiUrl?this.seeApiUrl:this.platform.endpoint.see).replace("{tenantId}",this.tenantId),i=new n;a.js(t,function(){i.resolve()});var r=e.hitch(this,this._seeApiLoaded),o=e.hitch(this,this._seeApiError);i.then(function(){window._See.bindEvent("RegApiReady",r)},function(t){o()},function(t){})},_seeApiLoaded:function(){this.see=window._See,this.seeRegApi=window._See?window._See.regApi:void 0,this.seeMetaApi=window._See?window._See.metaApi:void 0,this.see.source="StreamingPlayer",void 0!=this.see?this.see.bindOrFireEvent("metaApiReady",e.hitch(this,function(){this.emit("see-api-loaded"),this.isLoggedIn()&&this.emit("user-logged-in")})):this._seeApiError()},_seeApiError:function(){this.emit("see-api-error")},login:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t.method){case"Userpwd":this.seeRegApi.login(t.username,t.password,t.persist,e.hitch(this,this._onLoginHandler));break;case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onLoginHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onLoginHandler))}},connectSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onConnectSocialHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onConnectSocialHandler))}},removeSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.removeSocial("facebook",e.hitch(this,this._onRemoveSocialHandler));break;case"Google":this.seeRegApi.removeSocial("google",e.hitch(this,this._onRemoveSocialHandler))}},isLoggedIn:function(){return this.see.config.user.is_loggedin},logout:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.logout(e.hitch(this,this._onLogoutHandler))},forgotPassword:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.forgotPassword(t,e.hitch(this,this._onForgotPasswordHandler),n)},resetPassword:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.resetPassword(t,n,e.hitch(this,this._onResetPasswordHandler))},getUserDetails:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getUserDetails(e.hitch(this,this._onGetUserDetailsHandler),t)},registerFields:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerFields(e.hitch(this,this._onRegisterFieldsHandler))},registerUser:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerUser(t,n,e.hitch(this,this._onRegisterUserHandler))},updateUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.updateUser(t,e.hitch(this,this._onUpdateUserHandler))},completeRegisterUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.completeRegister(t,e.hitch(this,this._onLoginHandler))},setLanguage:function(t){this.see.setLanguage(t,e.hitch(this,this._onSetLanguageHandler))},getStatusLevel:function(t,n){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getStatusLevel(t,n,e.hitch(this,this._onGetStatusLevel))},getLadderStatusLevels:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getLadderStatusLevels(t,e.hitch(this,this._onGetLadderStatusLevels))},metaSet:function(t,n,i){return this.seeMetaApi?(i="object"==typeof i?i:{},i.callback=e.hitch(this,this._onMetaSetHandler),void this.seeMetaApi.set(t,n,i)):void this.emit("see-metaapi-not-ready")},metaGet:function(t,n){return this.seeMetaApi?(n="object"==typeof n?n:{},n.callback=e.hitch(this,this._onMetaGetHandler),void this.seeMetaApi.get(t,n)):void this.emit("see-metaapi-not-ready")},metaUpdate:function(t,n){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var i={callback:e.hitch(this,this._onMetaUpdateHandler)};this.seeMetaApi.update(t,n,i)},metaDelete:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var n={callback:e.hitch(this,this._onMetaDeleteHandler)};this.seeMetaApi.del(t,n)},metaClear:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var n={callback:e.hitch(this,this._onMetaClearHandler)};this.seeMetaApi.clear(t,n)},metaList:function(t,n){return this.seeMetaApi?(n="object"==typeof n?n:{},n.callback=e.hitch(this,this._onMetaListHandler),void this.seeMetaApi.list(t,n)):void this.emit("see-metaapi-not-ready")},triggerEvent:function(t){return this.see?void this.see.triggerEvent(t):void this.emit("see-not-ready")},bindEvent:function(t,e,n){return this.see?void this.see.bindEvent(t,e,n):void this.emit("see-not-ready")},bindOrFireEvent:function(t,e,n){return this.see?void this.see.bindOrFireEvent(t,e,n):void this.emit("see-not-ready")},cookieTest:function(){return this.see?(callback=e.hitch(this,this._onCookieTest),void this.see.cookieTest(callback)):void this.emit("see-not-ready")},isGamesEnabled:function(){return this.see?this.see.config.tenant.playerShowGames:(this.emit("see-not-ready"),!1)},getUserConfig:function(){return this.see?this.see.config.user:(this.emit("see-not-ready"),!1)},getConfig:function(){return this.see?this.see.config:(this.emit("see-not-ready"),!1)},initWidgets:function(t){return this.see?void this.see.initWidgets(t):(this.emit("see-not-ready"),!1)},_onLoginHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-in",t.context);break;case"FAIL":this.emit("user-login-error",t.context);break;case"DELAY":}},_onConnectSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-connect",t.context);break;case"FAIL":this.emit("social-connect-error",t.context);break;case"DELAY":}},_onRemoveSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-remove",t.context);break;case"FAIL":this.emit("social-remove-error",t.context);break;case"DELAY":}},_onLogoutHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-out",t.context);break;case"FAIL":this.emit("user-logout-error",t.context);break;case"DELAY":}},_onForgotPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("forgot-password",t.context);break;case"FAIL":this.emit("forgot-password-error",t.context);break;case"DELAY":}},_onResetPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("reset-password",t.context);break;case"FAIL":this.emit("reset-password-error",t.context);break;case"DELAY":}},_onGetUserDetailsHandler:function(t){switch(t.status){case"PASS":this.emit("user-details",t.context);break;case"FAIL":this.emit("user-details-error",t.context);break;case"DELAY":}},_onRegisterFieldsHandler:function(t){switch(t.status){case"PASS":this.emit("register-fields",t.context);break;case"FAIL":this.emit("register-fields-error",t.context);break;case"DELAY":}},_onRegisterUserHandler:function(t){switch(t.status){case"PASS":this.emit("register-user",t.context);break;case"FAIL":this.emit("register-user-error",t.context);break;case"DELAY":}},_onUpdateUserHandler:function(t){switch(t.status){case"PASS":this.emit("user-update",t.context);break;case"FAIL":this.emit("user-update-error",t.context);break;case"DELAY":}},_onSetLanguageHandler:function(t){switch(t.status){case"PASS":this.emit("language-change-success",t.context);break;case"FAIL":this.emit("language-change-error",t.context)}},_onGetStatusLevel:function(t){switch(t.status){case"PASS":this.emit("user-status",t.context);break;case"FAIL":this.emit("user-status-error",t.context);break;case"DELAY":}},_onGetLadderStatusLevels:function(t){switch(t.status){case"PASS":this.emit("status-levels",t.context);break;case"FAIL":this.emit("status-levels-error",t.context);break;case"DELAY":}},_onMetaSetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-set",t.context);break;case"FAIL":this.emit("meta-set-error",t.context)}},_onMetaGetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-get",t.context);break;case"FAIL":this.emit("meta-get-error",t.context)}},_onMetaUpdateHandler:function(t){switch(t.status){case"PASS":this.emit("meta-update",t.context);break;case"FAIL":this.emit("meta-update-error",t.context)}},_onMetaDeleteHandler:function(t){switch(t.status){case"PASS":this.emit("meta-delete",t.context);break;case"FAIL":this.emit("meta-delete-error",t.context)}},_onMetaClearHandler:function(t){switch(t.status){case"PASS":this.emit("meta-clear",t.context);break;case"FAIL":this.emit("meta-clear-error",t.context)}},_onMetaListHandler:function(t){switch(t.status){case"PASS":this.emit("meta-list",t.context);break;case"FAIL":this.emit("meta-list-error",t.context)}},_onCookieTest:function(t){switch(t.status){case"PASS":this.emit("cookie-test-pass");break;case"FAIL":this.emit("cookie-test-fail")}}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(22);i=[n(1),n(2),n,n(14),n(3),n(11),n(7),n(29),n(105),n(10),n(121),n(123),n(122)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f){var p=t([],{AD_PLAYBACK_START:"ad-playback-start",AD_PLAYBACK_COMPLETE:"ad-playback-complete",AD_PLAYBACK_DESTROY:"ad-playback-destroy",AD_PLAYBACK_ERROR:"ad-playback-error",AD_COUNTDOWN:"ad-countdown",AD_QUARTILE:"ad-quartile",VAST_COMPANIONS_READY:"vast-companions-ready",VAST_COMPANIONS_VPAID:"vast-companions-vpaid",AD_BLOCKER_DETECTED:"ad-blocker-detected",STREAMING_GUIDE_VERSION:"1.5.1",constructor:function(t,n,i,a){this.target=i,this.config=a,this.playerNode=s.byId(this.config.playerId,document),this.tech=t,this.techType=n,this.adModules=[],this.currentAdModule=null,this.xhrProv=new c,a.adBlockerDetected||(this.imaSdkModule=new d(i,a),this.VASTAdModule=new h(i,a),this.mediaAdModule=new f(i,a)),this.inherited(arguments),this._adParser=null,this._adSource=null,this._adFormat=null,r(this.target,"ad-playback-start",e.hitch(this,this._onAdPlaybackStart)),r(this.target,"ad-playback-error",e.hitch(this,this._onAdPlaybackError))},playAd:function(t,e){if(e.adBreak!==!0&&a.init(),this.config.adBlockerDetected)return void(1!=e.adBreak&&this.target.emit(this.AD_BLOCKER_DETECTED,{data:{message:"playAd function has been disabled because Ad Blocker is activated"}}));if(this.destroyAd(!1),t==u.TRITON_AD_PLATFORM&&(t=u.VAST_AD,e=this._convertTAPConfigToVast(e)),e.url&&(e.url=this._generateUrl(e)),null==e.url&&void 0==e.mediaUrl&&void 0==e.rawXML&&void 0==e.sid)return void this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:null,error:!0}});if(e.url?(e.fallbackToVastPlugin=e.url.toLowerCase().indexOf("daast")>-1||e.url.toLowerCase().indexOf("/ondemand/ars")>-1,this._adFormat=e.url.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.url.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"):e.rawXML&&(e.fallbackToVastPlugin=e.rawXML.toLowerCase().indexOf("daast")>-1,this._adFormat=e.rawXML.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.rawXML.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"),"Flash"==this.techType)return void this.tech.playAd(t,e);switch(this.tech.prepare("adModule"),t){case u.VAST_AD:e.adBreak||e.fallbackToVastPlugin?(this._initAdModule(this.VASTAdModule,e),this._adParser="VASTModule"):(this._initAdModule(this.imaSdkModule,e),this._adParser="IMA");break;case u.MEDIA_AD:this._initAdModule(this.mediaAdModule,e),this._adParser="Direct";break;default:this.target.emit(this.AD_PLAYBACK_COMPLETE,{data:{type:null,error:!1}})}},skipAd:function(){return"Flash"==this.techType?void this.tech.skipAd():void(this.currentAdModule&&this.currentAdModule.skipAd())},destroyAd:function(t){return"Flash"==this.techType?void this.tech.destroyAd(t):void(this.currentAdModule&&this.currentAdModule.destroyAd(t))},reloadSyncBanner:function(){return"Flash"==this.techType?void this.tech.reloadSyncBanner():void(this.currentAdModule&&(this.adServerType!=u.VAST_AD&&this.adServerType!=u.TRITON_AD_PLATFORM||this.currentAdModule.reloadSyncBanner()))},_initAdModule:function(t,n){this._removeListeners(),this.currentAdModule=t,this._mediaAdReadyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_READY,e.hitch(this,this._onMediaAdReady)),this._mediaAdEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_EMPTY,e.hitch(this,this._onMediaAdEmpty)),this._adCountdownHandler=r(this.target,this.currentAdModule.AD_MODULE_COUNTDOWN,e.hitch(this,this._onAdModuleCountdown)),this._adModulePlaybackStartHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_START,e.hitch(this,this._onAdModulePlaybackStart)),this._adModulePlaybackCompleteHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_COMPLETE,e.hitch(this,this._onAdModulePlaybackComplete)),this._adModulePlaybackDestroyHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_DESTROY,e.hitch(this,this._onAdModulePlaybackDestroy)),this._adModulePlaybackErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_ERROR,e.hitch(this,this._onAdModulePlaybackError)),this._adModuleQuartileHandler=r(this.target,this.currentAdModule.AD_MODULE_QUARTILE,e.hitch(this,this._onAdModuleQuartile)),this._adModuleCompanionsHandler=r(this.target,this.currentAdModule.AD_MODULE_COMPANIONS,e.hitch(this,this._onAdModuleCompanions)),this._adModuleClickTrackingHandler=r(this.target,this.currentAdModule.AD_MODULE_CLICK_TRACKING,e.hitch(this,this._onAdModuleClickTracking)),this._adModuleVastEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_EMPTY,e.hitch(this,this._onAdError)),this._adModuleVastErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_ERROR,e.hitch(this,this._onAdError)),this.currentAdModule.init(n),this.currentAdModule.initAdListeners(this.tech.html5OnDemand)},_onAdPlaybackStart:function(t){},_onAdPlaybackError:function(t){},_onAdModuleCompanions:function(t){this.currentAdModule.emit(this.VAST_COMPANIONS_READY,t.data)},_onAdModulePlaybackStart:function(t){this._callImpressions(),this.currentAdModule.emit(this.AD_PLAYBACK_START,{type:t.data.type})},_onAdModulePlaybackComplete:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:t.data.type})},_onAdModulePlaybackDestroy:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_DESTROY)},_onAdModulePlaybackError:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:t.data.type})},_onAdModuleCountdown:function(t){this.currentAdModule.emit(this.AD_COUNTDOWN,{countDown:t.data.countDown})},_onAdModuleClickTracking:function(t){if(null!=t&&void 0!=t.data){var e=void 0!=t.data.clickThrough?t.data.clickThrough:null,n=void 0!=t.data.clickTrackings?t.data.clickTrackings:null,i=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,r=i.test(e);if(null!=e&&1==r&&window.open(e),n)for(var a=n.length,o=0;o<a;o++)this.xhrProv.request(n[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}},_onAdModuleQuartile:function(t){if(this.currentAdModule.getVastInlineAd())for(var e=this.currentAdModule.getVastInlineAd().getLinearTrackingEvents(this.currentAdModule._defaultSequence),n=e.length,i=0;i<n;i++)if(e[i].type==t.adQuartile)for(var r=e[i].urls,a=r.length,o=0;o<a;o++)this.xhrProv.request(r[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})},_onMediaAdReady:function(t){var e=t.data,n=this._getSupportedMediaFile(e);null!=n?this.tech.html5OnDemand.playAd({adServerType:e.adServerType,mediaUrl:n.url,mediaFormat:n.format,clickThrough:e.clickThrough,clickTrackings:e.clickTrackings}):this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:e.adServerType,error:!1}})},_onMediaAdEmpty:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:e.adServerType,error:!1})},_onAdError:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:e.adServerType,error:!1})},_removeListeners:function(){this._mediaAdReadyHandler&&this._mediaAdReadyHandler.remove(),this._mediaAdEmptyHandler&&this._mediaAdEmptyHandler.remove(),this._adCountdownHandler&&this._adCountdownHandler.remove(),this._adModulePlaybackStartHandler&&this._adModulePlaybackStartHandler.remove(),this._adModulePlaybackCompleteHandler&&this._adModulePlaybackCompleteHandler.remove(),this._adModulePlaybackErrorHandler&&this._adModulePlaybackErrorHandler.remove(),this._adModuleQuartileHandler&&this._adModuleQuartileHandler.remove(),this._adModuleClickTrackingHandler&&this._adModuleClickTrackingHandler.remove(),this._adModuleVastEmptyHandler&&this._adModuleVastEmptyHandler.remove(),this._adModuleVastErrorHandler&&this._adModuleVastErrorHandler.remove(),this._adModuleVastProcessCompleteHandler&&this._adModuleVastProcessCompleteHandler.remove(),this._adModuleCompanionsHandler&&this._adModuleCompanionsHandler.remove(),this._adModulePlaybackDestroyHandler&&this._adModulePlaybackDestroyHandler.remove()},_callImpressions:function(){if(this.currentAdModule.getVastInlineAd()){var t=this.currentAdModule.getVastInlineAd().impressions;if(t){var e=t.length;if(0==e)return;for(var n=0;n<e;n++)this.xhrProv.request(t[n],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}}},_getAdModuleById:function(t,e){var n=this.adModules.length;if(0==n){var i=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:i}),i}for(var r=0;r<n;r++)if(this.adModules[r].moduleId==e)return this.adModules[r].module;var i=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:i}),i},_getSupportedMediaFile:function(t){if(null==t)return null;switch(t.adServerType){case u.VAST_AD:case u.MEDIA_AD:if(null==t.mediaFiles||0==t.mediaFiles.length)return null;for(var e=t.mediaFiles,n=e.length,i=0;i<n;i++){this._isTypeSupported("video","video/mp4;");if(("audio/aac"==e[i].type||"aac"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/aac;"))return{url:e[i].url,format:"audio"};if(("audio/mp4"==e[i].type||"m4a"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mp4;"))return{url:e[i].url,format:"audio"};if(("audio/mpeg"==e[i].type||"mp3"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mpeg;"))return{url:e[i].url,format:"audio"};if(("audio/wav"==e[i].type||"wav"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/wav;"))return{url:e[i].url,format:"audio"};if(("audio/ogg"==e[i].type||"oga"==e[i].url.split(".").pop()||"ogg"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/ogg;"))return{url:e[i].url,format:"audio"};if("audio/webm"==e[i].type&&this._isTypeSupported("audio","audio/webm;"))return{url:e[i].url,format:"audio"};if(("video/mp4"==e[i].type||"mp4"==e[i].url.split(".").pop()||"m4v"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/mp4;"))return{url:e[i].url,format:"video"};if(("video/ogg"==e[i].type||"ogv"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/ogg;"))return{url:e[i].url,format:"video"};if(("video/webm"==e[i].type||"webm"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/webm;"))return{url:e[i].url,format:"video"}}return null;default:return null}},_isTypeSupported:function(t,e){var n=s.byId("tdplayer_od_videonode",document);return!!n.canPlayType&&n.canPlayType(e)},_convertTAPConfigToVast:function(t){var e=new l;return t.url=e.getVastUri(t),t},_generateUrl:function(t){if(void 0!=t&&void 0!=t.url){if(t.url.indexOf("/ondemand/ars")>-1&&void 0!=t.trackingParameters){var n;void 0!=t.trackingParameters.tdsdk&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"tdsdk="+t.trackingParameters.tdsdk),void 0!=t.trackingParameters.position&&void 0!=t.trackingParameters.position.coords.latitude&&void 0!=t.trackingParameters.position.coords&&void 0!=t.trackingParameters.position.coords.longitude&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"lat="+parseFloat(t.trackingParameters.position.coords.latitude.toFixed(1))+"&long="+parseFloat(t.trackingParameters.position.coords.longitude.toFixed(1))),void 0!=t.trackingParameters.banners&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"banners="+t.trackingParameters.banners);var i=e.clone(t.trackingParameters);delete i.tdsdk,delete i.position,delete i.banners,delete i.pname,delete i.pversion;for(var r in i)n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+r+"="+encodeURIComponent(i[r]);return t.url+=n+"version="+this.STREAMING_GUIDE_VERSION,t.url}return t.url}}});return p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(40),n(59),n(29),n(4)],r=function(t,e,n,i,r,a){var o=t([n],{VAST_COMPANIONS_PRIORITY:["static","iframe","html"],IMA_LIBRARY_URL:"//imasdk.googleapis.com/js/sdkloader/ima3.js",_videoContent:null,_countdownTimer:null,_adDisplayContainer:null,_currentAd:null,_adsLoader:null,_adsRequest:null,_adsManager:null,_currentAdConfig:null,constructor:function(t,e){this.config=e,this._imaSdkLoaded=!1},init:function(t){this._destroy(),this._currentAdConfig=t,this.createAdDisplayContainer()},reloadSyncBanner:function(){this._destroy(),this.createAdDisplayContainer()},destroyAd:function(t){this._destroy(t),0!=t&&this.emit(this.AD_MODULE_PLAYBACK_DESTROY)},skipAd:function(){this._adsManager&&this._adsManager.getAdSkippableState()?this._adsManager.skip():this.emit(this.AD_MODULE_SKIPPABLE_STATE,{state:this._adsManager.getAdSkippableState()})},createAdDisplayContainer:function(){this._videoContent=document.getElementById("tdplayer_od_videonode"),this._adDisplayContainer||(this._adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById(this.config.playerId),this._videoContent),this._adDisplayContainer.initialize()),this.requestAds()},requestAds:function(){if(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e.hitch(this,this._onAdsManagerLoaded),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError),!1),this._adsRequest=new google.ima.AdsRequest,void 0!==this._currentAdConfig.url)this._adsRequest.adTagUrl=this._currentAdConfig.url+(void 0==this.config.allowPersonalisedAds||this.config.allowPersonalisedAds?"":"&npa=1");else if(void 0!==this._currentAdConfig.sid){var t=new i,n=t.getVastUri(t.ENDPOINT,this._currentAdConfig.sid,this._currentAdConfig.mediaformat);this._adsRequest.adTagUrl=n}else void 0!==this._currentAdConfig.rawXML&&(this._adsRequest.adsResponse=this._currentAdConfig.rawXML);this._adsLoader.requestAds(this._adsRequest)},_onAdsManagerLoaded:function(t){var n=this,i=new google.ima.AdsRenderingSettings;if(this._adsManager=t.getAdsManager(this._videoContent,i),void 0!==this._adsManager){this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onCompanionsReady)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onStarted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e.hitch(this,this._onAllAdsCompleted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.hitch(this,this._onContentResumeRequested)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,e.hitch(this,this._onResumed)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,e.hitch(this,this._onAdPaused)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError));var r=document.getElementById(this.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight;this.resizeHandler=setInterval(function(){r!=document.getElementById(n.config.playerId).offsetWidth&&(r=document.getElementById(n.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight,n._adsManager.resize(r,a,google.ima.ViewMode.NORMAL),n._resizeVideoTag(r,a))},250),this._resizeVideoTag(r,a);try{var o=document.getElementById(this.config.playerId).offsetWidth,s=document.getElementById(this.config.playerId).offsetHeight;this._adsManager.init(o,s,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(t){}}},_resizeVideoTag:function(t,e){var n=document.getElementById("tdplayer_od_videonode");void 0!=a("ios")&&n?(n.width=t,n.height=e):n&&(n.style.width="0px",n.style.height="0px")},_onAdPaused:function(){this._removeCountdownTimer(),this._adsManager.resume()},_onResumed:function(t){var e=this;this._adsManager&&(this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250))},_onStarted:function(t){var e=this;this._removeCountdownTimer(),this._currentAd=t.getAd(),this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250),this.emit(this.AD_MODULE_PLAYBACK_START,{type:r.VAST_AD})},_onAllAdsCompleted:function(t){this._destroy(),this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{type:r.VAST_AD})},_onRemainingTimeChanged:function(t){this.emit(this.AD_MODULE_COUNTDOWN,{countDown:t})},_onContentResumeRequested:function(t){this._removeCountdownTimer()},_removeCountdownTimer:function(){this._countdownTimer&&clearInterval(this._countdownTimer)},_onAdError:function(t){this.emit(this.AD_MODULE_PLAYBACK_ERROR,{error:{message:t.getError().getMessage(),code:t.getError().getErrorCode()}}),this._destroy()},_onCompanionsReady:function(t){if(void 0!=this.config.companionAdSelectionSettings&&void 0!=this.config.companionAdSelectionSettings.elements){for(var e=new google.ima.CompanionAdSelectionSettings,n=void 0!==this.config.companionAdSelectionSettings.vastCompanionPriority?this.config.companionAdSelectionSettings.vastCompanionPriority:this.VAST_COMPANIONS_PRIORITY,i=[],r=0;r<this.config.companionAdSelectionSettings.elements.length;r++)for(var a=this.config.companionAdSelectionSettings.elements[r],o=0;o<n.length;o++){var s=n[o];switch(e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH,s){case"static":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;break;case"html":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.HTML;break;case"iframe":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.IFRAME}var u=t.getAd().getCompanionAds(a.width,a.height,e);if(u.length>0){var l=new Object;l.width=a.width,l.height=a.height,l.content=u[0].getContent(),l.resourceType=new Object,l.resourceType.name=s,i.push(l);break}}i.length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:i})}},_onQuartileEvent:function(t){switch(t.type){case google.ima.AdEvent.Type.STARTED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(0),
error:!1});break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(1),error:!1});break;case google.ima.AdEvent.Type.MIDPOINT:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(2),error:!1});break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(3),error:!1});break;case google.ima.AdEvent.Type.COMPLETED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(4),error:!1})}},_destroy:function(t){t&&(this._adDisplayContainer&&this._adDisplayContainer.destroy(),this._adsLoader&&this._adsLoader.destroy(),this._adsManager&&this._adsManager.destroy()),this.resizeHandler&&clearInterval(this.resizeHandler),this._resizeVideoTag(0,0),this._videoContent&&("function"==typeof this._videoContent.exitFullscreen?this._videoContent.exitFullscreen():"function"==typeof this._videoContent.webkitExitFullscreen?this._videoContent.webkitExitFullscreen():"function"==typeof this._videoContent.mozCancelFullScreen?this._videoContent.mozCancelFullScreen():"function"==typeof this._videoContent.msExitFullscreen&&this._videoContent.msExitFullscreen()),this._removeCountdownTimer()}});return o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(40),n(29)],r=function(t,e,n,i){var r=t([n],{constructor:function(t,e){this.target=t,this.config=e},init:function(t){this.inherited(arguments),void 0!=t.mediaUrl?this.playAdUrl(t):this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})},playAdUrl:function(t){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=e.test(t.mediaUrl);if(1==n){var r=void 0!=t.linkUrl?t.linkUrl:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:i.MEDIA_AD,mediaFiles:[{url:t.mediaUrl}],clickThrough:r,clickTrackings:null})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(2),n(6),n(52),n(10),n(40),n(128),n(129),n(127),n(29),n(59)],r=function(t,e,n,i,r,o,s,u,l,c,d){var h=t([o],{VAST_1_ROOT:"VideoAdServingTemplate",VAST_2_ROOT:"VAST",DAAST_ROOT:"DAAST",VERSION_1_0:"1.0",VERSION_2_0:"2.0",DAAST_VERSION_1_0:"DAAST_1.0",constructor:function(t){this.target=t,this._adConfig=null,this._mediaAdBlankFiles=null,this._skipMediaAdPlayback=!1,this._adBreak=!1,this._defaultSequence=-1,this._vastWrapperAd=null,this._wrapperCachedData=null,this.vastParser=null,this.vastDocument=null,this.onPlaybackStartHandler=null,this.onQuartileReachedHandler=null,this.onClickTrackingElementClickedHandler=null,this.xhrProv=new r,this._loadTimes=0,this._maxLoadTimes=5},init:function(t){this._adConfig=t,this.inherited(arguments),this._adBreak=!!t.adBreak,this._skipMediaAdPlayback=void 0!=t.skipMediaAdPlayback&&t.skipMediaAdPlayback,this._defaultSequence=void 0!=t.sequence?t.sequence:-1,this.loadVast(t)},loadVast:function(t){if(void 0!=t.rawXML)this._parseVast(a.parse(t.rawXML).documentElement);else if(void 0!=t.url)this.setMediaAdBlankFiles(null),this.xhrProv.request(t.url,t.url,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError));else if(void 0!=t.sid){var n=new d,i=n.getVastUri(n.ENDPOINT,this.config.sid,t.mediaformat);this.setMediaAdBlankFiles(n.mediaAdBlankFiles),this.xhrProv.request(i,i,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError))}},setMediaAdBlankFiles:function(t){this._mediaAdBlankFiles=t},getVastInlineAd:function(){return this.vastDocument.vastAd.inlineAd},reloadSyncBanner:function(){null!=this._adConfig&&this.loadVast(this._adConfig)},_onVastLoadComplete:function(t,e){this._parseVast(e)},_onVastLoadError:function(t,e){console.error("vastAdModule::_onVastLoadError - url ="+t+" - error="+e),null!=this._vastWrapperAd&&(null!=this._vastWrapperAd.error&&""!=this._vastWrapperAd.error&&this.xhrProv.request(this._vastWrapperAd.error,this._vastWrapperAd.error,this._getRequestArgs(),null,null),this._vastWrapperAd=null),0==this._adBreak&&this.emit(this.AD_MODULE_VAST_ERROR,{error:e})},_parseVast:function(t){if(this.vastDocument=null,this.vastParser=null,void 0==t||void 0==t.nodeName)return void this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD});var e=this._getVersion(t.nodeName);if(this.vastParser=this._getVastParser(e),null!=this.vastParser&&(this.vastDocument=this.vastParser.parse(t)),null!=this.vastDocument)if(this._shouldLoadVASTWrapper(this.vastDocument.vastAd))this._loadTimes++,this._vastWrapperAd=this.vastDocument.vastAd.wrapperAd,this._cacheWrapperData(this._vastWrapperAd),this.loadVast({url:this.vastDocument.vastAd.wrapperAd.vastAdTagURL,skipMediaAdPlayback:this._skipMediaAdPlayback,sequence:this._defaultSequence});else{this._loadTimes=0,null!=this._vastWrapperAd&&(this.vastDocument.vastAd.inlineAd.addWrapperLinearTrackingEvents(this._wrapperCachedData.wrapperTrackingEvents),this.vastDocument.vastAd.inlineAd.addImpressions(this._wrapperCachedData.wrapperImpressions),this.vastDocument.vastAd.inlineAd.addWrapperLinearVideoClickTracking(this._wrapperCachedData.wrapperVideoClickTracking),this._vastWrapperAd=null,this._wrapperCachedData=null),this._vastWrapperAd=null;var n=!0;if(void 0!=this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)&&this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence).length>0&&(n=!1,this.emit(this.AD_MODULE_COMPANIONS,{companions:this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)})),1==this._skipMediaAdPlayback)return;var i=this._checkMediaAdBlankFiles(this.vastDocument.vastAd.inlineAd.getLinearMediaFiles(this._defaultSequence));if(null!=i){n=!1;var r=this.vastDocument.vastAd.inlineAd.getLinearVideoClick(this._defaultSequence),a=null!=r?r.clickThrough:null,o=null!=r?r.clickTrackings:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:c.VAST_AD,mediaFiles:i,clickThrough:a,clickTrackings:o})}else n&&this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:c.VAST_AD})}else this._loadTimes=0,this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD})},_getVersion:function(t){switch(t){case this.VAST_1_ROOT:return this.VERSION_1_0;case this.VAST_2_ROOT:return this.VERSION_2_0;case this.DAAST_ROOT:return this.DAAST_VERSION_1_0}return null},_cacheWrapperData:function(){null==this._wrapperCachedData&&(this._wrapperCachedData={wrapperImpressions:[],wrapperTrackingEvents:[],wrapperVideoClickTracking:[]});var t=this._vastWrapperAd.getLinearTrackingEvents(this._defaultSequence);null!=t&&t.length>0&&(this._wrapperCachedData.wrapperTrackingEvents=this._wrapperCachedData.wrapperTrackingEvents.concat(t));var e=this._vastWrapperAd.impressions;null!=e&&e.length>0&&(this._wrapperCachedData.wrapperImpressions=this._wrapperCachedData.wrapperImpressions.concat(e));var n=this._vastWrapperAd.getLinearVideoClick(this._defaultSequence);null!=n&&n.clickTrackings.length>0&&(this._wrapperCachedData.wrapperVideoClickTracking=this._wrapperCachedData.wrapperVideoClickTracking.concat(n.clickTrackings))},_shouldLoadVASTWrapper:function(t){return null!=t.wrapperAd&&null!=t.wrapperAd.vastAdTagURL&&this._loadTimes<=this._maxLoadTimes},_getVastParser:function(t){switch(t){case this.VERSION_1_0:return null==this.vastParser&&(this.vastParser=new s(this.target)),this.vastParser;case this.VERSION_2_0:return null==this.vastParser&&(this.vastParser=new u(this.target)),this.vastParser;case this.DAAST_VERSION_1_0:return null==this.vastParser&&(this.vastParser=new l(this.target)),this.vastParser}return null},_checkMediaAdBlankFiles:function(t){if(null==t)return null;for(var e=[],n=t.length,i=0;i<n;i++)this._isMediaAdBlankFile(t[i].url)||e.push(t[i]);return e},_isMediaAdBlankFile:function(t){if(null==this._mediaAdBlankFiles||0==this._mediaAdBlankFiles.length)return!1;for(var e=t.substr(t.lastIndexOf("/")+1),n=this._mediaAdBlankFiles.length,i=0;i<n;i++)if(this._mediaAdBlankFiles[i]==e)return!0;return!1},_getRequestArgs:function(){return{handleAs:"xml",preventCache:!1,withCredentials:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}}});return h}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(42)],r=function(t,e){var n=t(e,{constructor:function(){this.logoTile=null,this.logoTitle=null,this.logoArtist=null,this.logoURL=null}});return n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.trackingEvents=[],this.companionAds=[],this.nonLinearAds=[],this.video=null,this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){this.trackingEvents=this.trackingEvents.concat(t)},addWrapperLinearVideoClickTracking:function(t){null!=this.video&&(this.video.videoClick.clickTrackings=this.video.videoClick.clickTrackings.concat(t))},addImpression:function(t){this.impressions.push(t)},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),this.trackingEvents},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=!1,o=r.length,s=0;s<o;s++)if(a=r[s].width==t&&r[s].height==e,1!=a){if(null==n)return r[s];if(r[s].resourceType==n)return r[s]}return null},getCompanionAds:function(t){var t=t;return void 0==t&&(t=-1),this.companionAds},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),this.video.mediaFiles},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this.video&&null!=this.video.mediaFiles[t]?this.video.mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),this.video.videoClick},getNonLinearAds:function(t){var t=t;return void 0==t&&(t=-1),this.nonLinearAds},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),this.video.duration},addCompanionAd:function(t){this.companionAds.push(t)},addNonLinearAd:function(t){this.nonLinearAds.push(t)}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1)],r=function(t){var e=t([],{constructor:function(){this.duration=null,this.adID=null,this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(66),n(48),n(65),n(67),n(68),n(124),n(46),n(47),n(44),n(45)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,g){var m=t([e],{AD:"Ad",IMPRESSION:"Impression",DAAST_AD_TAG_URI:"DAASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION?e.description=a.textContent(i[s]):i[s].nodeName==n.EXPIRES?e.expires=a.textContent(i[s]):i[s].nodeName==n.CATEGORY?e.category=a.textContent(i[s]):i[s].nodeName==n.SURVEY?e.survey=a.textContent(i[s]):i[s].nodeName==n.ADVERTISER&&(e.advertiser=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.DAAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.AUDIO_INTERACTIONS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE){var h=new g;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==n.HTML_RESOURCE){var h=new g;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==n.STATIC_RESOURCE){var h=new g;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.logoTile=i[o].getAttribute(n.LOGO_TILE),s.logoTitle=i[o].getAttribute(n.LOGO_TITLE),s.logoArtist=i[o].getAttribute(n.LOGO_ARTIST),s.logoTile=i[o].getAttribute(n.LOGO_TILE);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE){var h=new g;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.HTML_RESOURCE){var h=new g;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==n.STATIC_RESOURCE){var h=new g;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING),p=f.length;if(p>0){var m=f[0].getAttribute(n.EVENT);m==n.CREATIVE_VIEW&&(s.creativeView=this.trim(a.textContent(u[c])))}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.minbitrate=i[o].getAttribute(n.MIN_BITRATE),s.maxbitrate=i[o].getAttribute(n.MAX_BITRATE),s.codec=i[o].getAttribute(n.CODEC),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}});return m}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(125),n(48),n(126),n(47),n(46),n(42),n(44),n(45)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f){var p=t([e],{AD:"Ad",VAST_AD_TAG_URL:"VASTAdTagURL",VIDEO:"Video",URL:"URL",CODE:"Code",RESOURCE_TYPE:"resourceType",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR&&(e.errorURL=this.trim(a.textContent(i[s])));e.video=this._parseVideo(t[0].getElementsByTagName(this.VIDEO)),e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION));var u=t[0].getElementsByTagName(n.TRACKING_EVENTS);return void 0!=u&&u.length>0&&(e.trackingEvents=this._parseTrackingEvents(u[0])),e.companionAds=this._parseCompanionsAds(t[0].getElementsByTagName(n.COMPANION_ADS)),e.nonLinearAds=this._parseNonLinearAds(t[0].getElementsByTagName(n.NON_LINEAR_ADS)),e},_parseImpressions:function(t){var e=[];if(void 0==t||0==t.length)return e;for(var n=t[0].getElementsByTagName(this.URL).length,i=t[0].getElementsByTagName(this.URL),r=0;r<n;r++)e.push(a.textContent(i[r]));return e},_parseVideo:function(t){for(var e=new u,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.AD_ID?e.adID=a.textContent(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseVideoClick:function(t){for(var e=new l,i=t.childNodes,r=i.length,a=null,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?(a=this._parseURLTags(i[o]),a.length>0&&(e.clickThrough=a[0])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings=this._parseURLTags(i[o]):i[o].nodeName==n.CUSTOM_CLICK&&(e.customClicks=this._parseURLTags(i[o]));return e},_parseMediaFiles:function(t){for(var e,i=[],r=t.getElementsByTagName(n.MEDIA_FILE),a=r.length,o=0;o<a;o++)e=new h,e.id=r[o].getAttribute(n.ID),e.bitrate=r[o].getAttribute(n.BITRATE),e.height=r[o].getAttribute(n.HEIGHT),e.width=r[o].getAttribute(n.WIDTH),e.delivery=r[o].getAttribute(n.DELIVERY),e.type=r[o].getAttribute(n.TYPE),e.url=this.trim(this.getTagValue(r[o],"URL")),i.push(e);return i},_parseTrackingEvents:function(t){for(var e,i,r,o=[],s=t.getElementsByTagName(n.TRACKING),u=s.length,l=0;l<u;l++){e=new c,i=s[l].getElementsByTagName(this.URL),r=i.length;for(var d=0;d<r;d++)e.urls.push(this.trim(a.textContent(i[d])));e.type=s[l].getAttribute(n.EVENT),o.push(e)}return o},_parseCompanionsAds:function(t){for(var e,i,r=[],o=t[0].getElementsByTagName(n.COMPANION),s=o.length,u=null,l=0;l<s;l++){i=new d,i.id=o[l].getAttribute(n.ID),i.width=o[l].getAttribute(n.WIDTH),i.height=o[l].getAttribute(n.HEIGHT),i.expandedWidth=o[l].getAttribute(n.EXPANDED_WIDTH),i.expandedHeight=o[l].getAttribute(n.EXPANDED_HEIGHT);var c=new f;c.name=o[l].getAttribute(this.RESOURCE_TYPE).toLowerCase(),i.resourceType=c,i.creativeType=o[l].getAttribute(n.CREATIVE_TYPE),u=o[l].childNodes,e=u.length;for(var h=0;h<e;h++)u[h].nodeName==n.AD_PARAMETERS?i.adParameters=a.textContent(u[h]):u[h].nodeName==n.ALT_TEXT?i.altText=a.textContent(u[h]):u[h].nodeName==n.COMPANION_CLICK_THROUGH?i.clickThroughURL=this.trim(a.textContent(u[h])):u[h].nodeName==this.URL?i.url=this.trim(a.textContent(u[h])):u[h].nodeName==this.CODE&&(i.code=this.trim(a.textContent(u[h])));r.push(i)}return r},_parseNonLinearAds:function(t){return null},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URL?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.VIDEO_CLICKS?e.videoClicks=this._parseVideoClick(i[o]):i[o].nodeName==n.ERROR?e.error=this.trim(a.textContent(i[o])):i[o].nodeName==n.TRACKING_EVENTS&&(e.trackingEvents=this._parseTrackingEvents(i[o]));return e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION)),e},_parseURLTags:function(t){for(var e=[],n=t.childNodes,i=n.length,r=0;r<i;r++)n[r].nodeName==this.URL&&e.push(this.trim(a.textContent(n[r])));return e}});return p}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(66),n(48),n(65),n(67),n(68),n(42),n(46),n(47),n(44),n(45)],r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,g){var m=t([e],{AD:"Ad",IMPRESSION:"Impression",VAST_AD_TAG_URI:"VASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION&&(e.description=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE){var h=new g;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==n.HTML_RESOURCE){var h=new g;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==n.STATIC_RESOURCE){var h=new g;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE){var h=new g;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.HTML_RESOURCE){var h=new g;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==n.STATIC_RESOURCE){var h=new g;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING),p=f.length;if(p>0){s.creativeView=[];for(var m=0;m<p;m++){var v=f[m].getAttribute(n.EVENT);v==n.CREATIVE_VIEW&&s.creativeView.push(this.trim(a.textContent(f[m])))}}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}});return m}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(3)],r=function(t,e,n){var i=t([],{TDAS_REG_ONLY:"tdas-reg-only",constructor:function(t,i){this.mediaPlayer=t("MediaPlayer"),this.userRegistration=t("UserRegistration"),this.mediaPlayer.addHqTag(this.TDAS_REG_ONLY),n(i,"stream-start",e.hitch(this,this._onStreamStarted)),n(i,"stream-stop",e.hitch(this,this._onStreamStopped)),n(i,"user-logged-out",e.hitch(this,this._onUserLoggedOut)),n(i,"user-details",e.hitch(this,this._onUserDetails)),this.inherited(arguments)},_onStreamStarted:function(){this.userRegistration.triggerEvent("playerStart")},_onStreamStopped:function(){this.userRegistration.triggerEvent("playerStop")},_onUserLoggedOut:function(t){this._removeUserParameters(),this.mediaPlayer.disableHQ()},_onUserDetails:function(t){if(t.data||t.data){var e={};if(t.data.dob){var n=t.data.dob.split("/");e.dob=n[2]+"-"+n[0]+"-"+n[1]}t.data.gender&&(e.gender=t.data.gender.substr(0,1).toLowerCase()),t.data.zip&&(e.postalcode=t.data.zip),t.data.country&&(e.country=t.data.country),t.data.vid&&(e["tdas-vid"]=this.userRegistration.tenantId.toString()+"."+t.data.vid.toString()),t.data.tdas&&(e["tdas-utags"]=t.data.tdas["user-tags"],e["tdas-utcheck"]=t.data.tdas["user-tags-hash"]),void 0==this.mediaPlayer.config.defaultTrackingParameters&&(this.mediaPlayer.config.defaultTrackingParameters={}),this.mediaPlayer.config.defaultTrackingParameters.user=e,this.mediaPlayer.enableHQ()}},_removeUserParameters:function(){this.mediaPlayer.config.defaultTrackingParameters.user={}}});return i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;(function(a){var o=n(18),s=n(15);i=[n(1),n(2),n(7),n(69),n(70),n(11)],r=function(t,e,n,i,r,u){var l=t([r],{eventMap:{onPlayerReady:"tech-ready",onStreamStarted:"stream-start",onStreamStopped:"stream-stop",onStreamFailed:"stream-fail",onStreamStatus:"_onStreamStatus",onTrackCuePoint:"_onTrackCuePoint",onSpeechCuePoint:"_onSpeechCuePoint",onCustomCuePoint:"_onCustomCuePoint",onTargetSpot:"targetspot-cue-point",onAdBreak:"_onAdBreakCuePoint",onSeekFailed:"seek-fail",onSeekInvalidTime:"seek-invalid-time",onTimeShiftPlaybackModeChanged:"time-shift-playback-mode-change",onTimeShiftStreamStart:"time-shift-stream-start",onTimeShiftPlayheadUpdate:"time-shift-playhead-update",onAdPlaybackStart:"ad-playback-start",onAdPlaybackComplete:"ad-playback-complete",onAdPlaybackError:"_onAdPlaybackError",onAdPlaybackSkippableState:"ad-playback-skippable-state",onAdCountdown:"ad-countdown",onAdQuartile:"ad-quartile",onVastProcessComplete:"vast-process-complete",
onVastCompanionsReady:"vast-companions-ready",onConfigurationError:"configuration-error",onVideoMidRollPlaybackStart:"video-mid-roll-playback-start",onVideoMidRollPlaybackComplete:"video-mid-roll-playback-complete",onVpaidAdCompanions:"vpaid-ad-companions",onMediaLoadingStatus:"media-loading-status",onMediaPlaybackStatus:"_onMediaPlaybackStatus",onMediaPlaybackTimeUpdate:"media-playback-timeupdate",onMediaPlaybackMetadata:"media-playback-metadata",onMediaError:"_onMediaError"},statusMap:{LIVE_PAUSE:"paused",LIVE_PLAYING:"onAir",LIVE_STOP:"disconnected",LIVE_FAILED:"streamUnavailable",LIVE_BUFFERING:"buffering",LIVE_CONNECTING:"connecting",LIVE_RECONNECTING:"reconnecting",MEDIA_TIME_UPDATE:"timeupdate",MEDIA_SEEK_FAILED:"seekfailed",MEDIA_SEEK_INVALID_TIME:"seekinvalidtime",MEDIA_ENDED:"ended",MEDIA_PAUSED:"pause",MEDIA_STARTED:"play",MEDIA_STOPPED:"stop",MEDIA_RESUMED:"play",MEDIA_SEEKED:"play",MEDIA_BUFFERING:"buffering"},minimumVersionRequired:{major:10,minor:2,rev:0},CDN_URL:"sdk.listenlive.co",constructor:function(t,e,n){this.errorCode=new i,this.config.platformId=void 0!=this.config.platformId&&""!=this.config.platformId?this.config.platformId:"prod01";var r=new s(this.config.platformId);this.config.moduleDir=r.endpoint.coreModuleDir,this._isAdBreak=!1,this.inherited(arguments)},start:function(){return this.isMinimalRequiredVersion(this.minimumVersionRequired.major,this.minimumVersionRequired.minor,this.minimumVersionRequired.rev)?(this.inherited(arguments),this.swfPath=this.config.tdPlayerPath||this._getApiSwfUrl(),void this._embedFlash()):void this._onError(this.errorCode.flashModuleMap.flashPluginOutOfDate)},_getApiSwfUrl:function(){var t=this.CDN_URL;return"//"+t+"/tdplayerapi/swf/tdplayer-api-6.0.swf"},_onReady:function(){},_onError:function(t){console.error("flash::_onError - code : "+t.code+", message : "+t.message),this.emit("tech-error",{error:t})},prepare:function(t){this.inherited(arguments)},playStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playStream&&this.flashMovie.tdPlayer_playStream(t)},pauseStream:function(){this.inherited(arguments),this.flashMovie.tdPlayer_pauseStream()},stopStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopStream&&this.flashMovie.tdPlayer_stopStream()},resumeStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeStream&&this.flashMovie.tdPlayer_resumeStream()},seekStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekStream&&this.flashMovie.tdPlayer_seekStream(t)},seekLive:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekLive&&this.flashMovie.tdPlayer_seekLive()},setVolume:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_setVolume&&this.flashMovie.tdPlayer_setVolume(t)},mute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_mute&&this.flashMovie.tdPlayer_mute()},unMute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_unMute&&this.flashMovie.tdPlayer_unMute()},playAd:function(t,e){this.inherited(arguments),e.companionAdSelectionSettings=this.config.companionAdSelectionSettings,"function"==typeof this.flashMovie.tdPlayer_playAd&&this.flashMovie.tdPlayer_playAd(t,e)},skipAd:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_skipAd&&this.flashMovie.tdPlayer_skipAd()},destroyAd:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_destroyAd&&this.flashMovie.tdPlayer_destroyAd(),0!=t&&this.emit("ad-playback-destroy")},playMedia:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playMedia&&this.flashMovie.tdPlayer_playMedia({url:t.url,autoStart:!0})},pauseMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_pauseMedia&&this.flashMovie.tdPlayer_pauseMedia()},resumeMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeMedia&&this.flashMovie.tdPlayer_resumeMedia()},stopMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopMedia&&this.flashMovie.tdPlayer_stopMedia()},seekMedia:function(t){this.inherited(arguments),0==t&&(t=.001),"function"==typeof this.flashMovie.tdPlayer_seekMedia&&this.flashMovie.tdPlayer_seekMedia(t)},_onStreamStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),this.emit("stream-status",t,e)}},_onMediaPlaybackStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),"MEDIA_STARTED"===t.code&&this.emit("media-playback-started"),this.emit("media-playback-status",t,e)}},_onMediaError:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization();i.error&&(t.error=i.error),this.emit("media-playback-error",t,e)}},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onAdBreakCuePoint:function(t){this._adBreak=!!t.adBreakData.isVastInStream,this.emit("ad-break-cue-point",t)},_onAdPlaybackError:function(t){this._adBreak||this.emit("ad-playback-error",t)},_tdPlayerEvents:function(t,i){var r=n.byId(i.id,document);if("_"==this.eventMap[t].substr(0,1)){var a=e.hitch(this,this.eventMap[t]);a(i,t)}else r&&this.eventMap[t]&&this.emit(this.eventMap[t],i,r)},_embedFlash:function(){window.tdPlayerEvents=e.hitch(this,this._tdPlayerEvents);var t=o.getLocalization(),n=[{id:"directLiveStream"}];n[0].timeshift=this.config.timeShift?{active:this.config.timeShift.active||0,max_listening_time:this.config.timeShift.max_listening_time||30}:{active:0},void 0!=this.config.plugins&&this.config.plugins.length>0&&(n=n.concat(this.config.plugins));var i={playercore:{platform_id:this.config.platformId,plugins:n}};null!=this.config.moduleDir&&(i.playercore.module_dir=this.config.moduleDir),document.getElementById(this.config.playerId).innerHTML="";var r="flash_content";u.create("div",{id:r},document.getElementById(this.config.playerId)),a.embedSWF(this.swfPath,r,"100%","100%",this.minimumVersionRequired.major+"."+this.minimumVersionRequired.minor+"."+this.minimumVersionRequired.rev,!1,{isDebug:this.config.isDebug,config:encodeURIComponent(JSON.stringify(i)),id:this.playerNode.id},{scale:"showall",wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",hasPriority:"true"},!1,e.hitch(this,function(e){e.success?(this.flashMovie=e.ref,this._onReady()):this._onError({message:t.embedFailed})}))},isMinimalRequiredVersion:function(t,e,n){var i=a.getFlashPlayerVersion();return t<i.major||!(t>i.major)&&(0==e||e<i.minor||!(e>i.minor)&&(0==n||n<i.rev||!(n>i.rev)))}});return l}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(e,n(37))},function(t,e,n){var i,r;i=[n(1),n(2),n(26),n(11),n(69),n(70),n(60),n(38),n(134),n(135)],r=function(t,e,n,i,r,a,o,s,u,l){var c=t([a],{constructor:function(t,e,n){this.errorCode=new r,this.playbackStatus=null,this.html5CheckerNode=null,this.target=e,this.inherited(arguments)},start:function(){return this._isHTML5Supported()?(this.inherited(arguments),this.html5Live=new u(this.playerNode,this.config),this.html5Live.setPlaybackStatusHandler(e.hitch(this,this._onPlaybackStatus)),this.html5Live.setCuePointHandler(e.hitch(this,this._onTrackCuePoint)),this.html5Live.setAdBreakHandler(e.hitch(this,this._onAdBreak)),this.html5Live.setHlsCuePointHandler(e.hitch(this,this._onHlsCuePoint)),this.html5Live.setSpeechCuePointHandler(e.hitch(this,this._onSpeechCuePoint)),this.html5Live.setCustomCuePointHandler(e.hitch(this,this._onCustomCuePoint)),this.html5Live.setStreamStartHandler(e.hitch(this,this._onStreamStart)),this.html5Live.setStreamStopHandler(e.hitch(this,this._onStreamStop)),this.html5Live.setStreamFailedHandler(e.hitch(this,this._onStreamFailed)),this.html5OnDemand=new l(this.playerNode),this._isMediaTagInitialized=!1,void this.emit("tech-ready",{id:this.playerNode})):void this.emit("tech-error",{error:this.errorCode.html5ModuleMap.browserNotSupported})},prepare:function(t){this.inherited(arguments),this._initMediaTag()},playStream:function(t){this.inherited(arguments),this.params=t,this._isMediaTagInitialized||this._initMediaTag(),this.html5OnDemand.clean(),this.html5Live.play(t)},pauseStream:function(){this.inherited(arguments),this.html5Live.pause()},stopStream:function(){this.inherited(arguments),this.html5Live.stop()},resumeStream:function(){this.inherited(arguments),this.html5Live.resume()},seekStream:function(t){this.inherited(arguments)},seekLive:function(){this.inherited(arguments)},setVolume:function(t){this.inherited(arguments),this.html5Live.setVolume(t),this.html5OnDemand.setVolume(t)},muteStream:function(){this.inherited(arguments),this.html5Live.mute()},muteMedia:function(){this.inherited(arguments),this.html5OnDemand.mute()},unMuteStream:function(){this.inherited(arguments),this.html5Live.unMute(this.params)},unMuteMedia:function(){this.inherited(arguments),this.html5OnDemand.unMute(this.params)},playMedia:function(t){this.inherited(arguments),void 0!=this.html5OnDemand&&(t.url.indexOf("live.streamtheworld.com")>=0?this.emit("tech-error",{error:this.errorCode.html5ModuleMap.tritonListenLink}):(this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(e.hitch(this,this._onMediaPlaybackStatus)),this.html5OnDemand.play({mediaUrl:t.url,mediaFormat:"audio"})))},pauseMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.pause())},resumeMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.resume())},stopMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.stop())},seekMedia:function(t){this.inherited(arguments),this.html5OnDemand.seek(t)},_initMediaTag:function(){this.html5OnDemand.initMediaTag(),this._isMediaTagInitialized=!0},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onHlsCuePoint:function(t){if(this.emit("hls-cue-point",t),t.cuePoint&&t.cuePoint.hlsTrackId){var e=this.connection.mountpoint.mediaFormat.audioTracks;e&&e.length&&e.length>=t.cuePoint.hlsTrackId&&this._currentBitrate!=e[t.cuePoint.hlsTrackId].bitRate&&(this._currentBitrate=e[t.cuePoint.hlsTrackId].bitRate,this.setCurrentTrack(e[t.cuePoint.hlsTrackId]),t.cuePoint.audioTrack=e[t.cuePoint.hlsTrackId],this.emit("stream-track-change",t))}},_onAdBreak:function(t){void 0!=t.cuePoint&&(t.adBreakData={},t.adBreakData.adVast=void 0!=t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]?t.cuePoint[s.AD_VAST]:null,t.adBreakData.cueID=void 0!=t.cuePoint[s.AD_ID]&&""!=t.cuePoint[s.AD_ID]?t.cuePoint[s.AD_ID]:null,t.adBreakData.cueTitle=void 0!=t.cuePoint[s.CUE_TITLE]&&""!=t.cuePoint[s.CUE_TITLE]?t.cuePoint[s.CUE_TITLE]:null,t.adBreakData.duration=void 0!=t.cuePoint[s.CUE_TIME_DURATION]&&""!=t.cuePoint[s.CUE_TIME_DURATION]?t.cuePoint[s.CUE_TIME_DURATION]:null,t.adBreakData.isVastInStream=!!(void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]||t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]),t.adBreakData.url=void 0!=t.cuePoint[s.AD_URL]&&""!=t.cuePoint[s.AD_URL]?t.cuePoint[s.AD_URL]:null,t.adBreakData.vastUrl=void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]?t.cuePoint[s.AD_VAST_URL]:null),1==t.adBreakData.isVastInStream&&(t.adBreakData.adVast||t.adBreakData.vastUrl)&&n.publish("api/request","get-vast-instream",t.adBreakData),this.emit("ad-break-cue-point",t)},_onPlaybackStatus:function(t){this.playbackStatus!=t.code&&(this.playbackStatus=t.code,this.emit("stream-status",t))},_onMediaPlaybackStatus:function(t){return"Error"==t.type?void this.emit("media-playback-error",{error:t.type,mediaElement:t.html5Node}):"timeupdate"==t.type?void this.emit("media-playback-timeupdate",{status:t.type,code:t.code,duration:parseInt(t.html5Node.duration),playedTime:parseInt(t.html5Node.currentTime),remainingTime:parseInt(t.html5Node.duration-t.html5Node.currentTime),percent:(t.html5Node.currentTime/t.html5Node.duration).toFixed(2)}):(this.emit("media-playback-status",{status:t.type,mediaElement:t.html5Node}),"play"==t.type&&this.emit("media-playback-started"),void("Ended"==t.type&&this.html5OnDemand.stop()))},_onMediaLoadingStatus:function(t){this.emit("media-loading-status",{percent:t.percent,mediaElement:t.html5Node})},_onStreamStart:function(){this._currentBitrate=null,this.setCurrentTrack(null),this.emit("stream-start")},_onStreamStop:function(){this.setCurrentTrack(null),this.emit("stream-stop")},_onStreamFailed:function(){this.setCurrentTrack(null),this.emit("stream-fail")},_isHTML5Supported:function(){this.html5CheckerNode=i.create("audio",{id:"testHtml5Node"},this.playerNode,"first");var t=!!this.html5CheckerNode.canPlayType;return null!=this.html5CheckerNode&&i.destroy(this.html5CheckerNode),t}});return c}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3),n(13),n(2),n(64)],r=function(t,e,n,i,r){var a=t([],{POLLING_DELAY:5e3,constructor:function(t){this.mount=null,this._cuePoint=[],this._adBreaks=[],this._npChecker=0,this._npTimerId=null,this._init(t)},_init:function(t){var a=null;this.nowPlayingApi=new r(t,new n),a=this.nowPlayingApi.target,this._onCuePointHandler=i.hitch(this,this._onCuePoint),this._onEmptyCuePointHandler=i.hitch(this,this._onEmptyCuePoint),null!=a&&(e(a,"cue-point",this._onCuePointHandler),e(a,"cue-point-empty",this._onEmptyCuePointHandler))},startCuePointsListener:function(t){this.mount=t,this._getNowPlaying(this.mount),this._npTimerId=setInterval(i.hitch(this,function(){i.hitch(this,this._getNowPlaying(this.mount))}),this.POLLING_DELAY)},stopCuePointsListener:function(){clearInterval(this._npTimerId),this._cuePoint.length>0&&this._cuePoint.pop()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},_getNowPlaying:function(t){this.nowPlayingApi.load({mount:t,hd:!1,numberToFetch:1,eventType:"track",mode:"nowPlaying"})},_onCuePoint:function(t){this.currentCuePoint=t.data.cuePoint,this.currentCuePoint.adUrl=null,this.currentCuePoint.cueTimeDuration=parseInt(this.currentCuePoint.cueTimeDuration)>0?parseInt(this.currentCuePoint.cueTimeDuration):15e3,this.currentMount=t.data.mount;var e=this.currentCuePoint.type,n=this.currentCuePoint.timestamp;if("ad"==e){if("endbreak"==this.currentCuePoint.adType)return;this._onAdBreak(n)}else{var i=this.currentCuePoint.artistName,r=this.currentCuePoint.cueTitle;if(this._cuePoint.length>0)for(var a=0;a<this._cuePoint.length;a++)if(this._cuePoint[a].artist==i&&this._cuePoint[a].title==r)return;void 0!=i&&void 0!=r&&this._onTrack(i,r)}},_onTrack:function(t,e){this._cuePoint.length>1&&this._cuePoint.shift(),this._cuePoint.push({artist:t,title:e}),this._trackCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_onEmptyCuePoint:function(){this._npChecker+=1,3==this._npChecker&&(clearInterval(this._npTimerId),this._npChecker=0)},_onAdBreak:function(t){var e=this._adBreakChecker(t);0==e&&this._adBreakCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_adBreakChecker:function(t){if(0==this._adBreaks.length)return this._adBreaks.push({timestamp:t}),0==this._cuePoint.length;for(var e=0;e<this._adBreaks.length;e++)if(this._adBreaks[e].timestamp==t)return!0;return this._adBreaks.length>2&&this._adBreaks.shift(),this._adBreaks.push({timestamp:t}),!1}});return a}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18),o=(n(20),n(36)),s=(n(62),n(22));i=[n(1),n(13),n(2),n(11),n(19),n(7),n(39),n(71),n(150),n(133)],r=function(t,e,n,i,r,u,l,c,d,h){var f=t([e],{statusMap:{abort:{status:"connecting",code:"LIVE_CONNECTING"},canPlay:{status:"buffering",code:"LIVE_BUFFERING"},canPlayThrough:{status:"onAir",code:"LIVE_PLAYING"},dataLoading:{status:"buffering",code:"LIVE_BUFFERING"},emptied:{status:"connecting",code:"LIVE_CONNECTING"},ended:{status:"disconnected",code:"LIVE_STOP"},error:{status:"streamUnavailable",code:"LIVE_FAILED"},loadStart:{status:"connecting",code:"LIVE_CONNECTING"},pause:{status:"paused",code:"LIVE_PAUSE"},play:{status:"onAir",code:"LIVE_PLAYING"},progress:{status:"onAir",code:"LIVE_PLAYING"},reconnecting:{status:"reconnecting",code:"LIVE_RECONNECTING"},stalled:{status:"disconnected",code:"LIVE_STOP"},stop:{status:"disconnected",code:"LIVE_STOP"},suspend:{status:"connecting",code:"LIVE_CONNECTING"},waiting:{status:"buffering",code:"LIVE_BUFFERING"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.playerNode=t,this.cfg=e,this.html5Node=null,this.audioNode=null,this.connections=null,this._playbackStatusCallback=null,this._cuePointCallback=null,this._adBreakCallback=null,this._hlsCuePointCallback=null,this._speechCuePointCallback=null,this._customCuePointCallback=null,this._streamStartCallback=null,this._streamStopCallback=null,this._streamFailedCallback=null,this.isPaused=!1,this.audioEventListenersAttached=!1},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setCuePointHandler:function(t){this._cuePointCallback=t},setAdBreakHandler:function(t){this._adBreakCallback=t},setHlsCuePointHandler:function(t){this._hlsCuePointCallback=t},setSpeechCuePointHandler:function(t){this._speechCuePointCallback=t},setCustomCuePointHandler:function(t){this._customCuePointCallback=t},setStreamStartHandler:function(t){this._streamStartCallback=t},setStreamStopHandler:function(t){this._streamStopCallback=t},setStreamFailedHandler:function(t){this._streamFailedCallback=t},play:function(t){s.isStopped()&&t&&(this._liveApiParams=t,this.mount=this._liveApiParams.mount,this.__isSidebandMetadataActivated()?(this.sidebandMetadata&&this.sidebandMetadata.destroy(),this.__activateSidebandMetadata()):this.__isASyncCuePointDispatcherActivated()&&this.__activateAsyncCuePointDispatcher(),this.__initAudioElement(),o.isSupported()&&this._liveApiParams.isHLS?s.playAudio(this._liveApiParams.url,!0,!0):s.playAudio(this._liveApiParams.url,!1,!0))},pause:function(){this.isPaused=!1,s.stop()},stop:function(){s.stop()},resume:function(){s.resume()},seekStream:function(t){},seekLive:function(){},setVolume:function(t){s.setVolume(t)},mute:function(){!s.audioNode||s.audioNode.paused||s.isStopped()||s.mute()},unMute:function(t){s.isStopped()&&(s.unMute(),this.play(t))},__initAudioElement:function(){0==this.audioEventListenersAttached&&(s.on("destroyAudioElement",this.__destroyAudioElement),s.on("html5-playback-status",n.hitch(this,this.__onHTML5PlayerStatus)),this.audioEventListenersAttached=!0)},__destroyAudioElement:function(){s.removeAllListeners("html5-playback-status"),s.removeAllListeners("destroyAudioElement"),this.sidebandMetadata&&this.sidebandMetadata.destroy()},__onHTML5PlayerStatus:function(t){this.__emitPlaybackStatus(t),t.type==l.PLAY?(!this.isPaused&&this.__isSidebandMetadataActivated()&&this.sidebandMetadata?this.sidebandMetadata.init(this._liveApiParams):this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.startCuePointsListener(this.mount),this.isPaused=!1,this._streamStartCallback()):t.type!=l.STOP&&t.type!=l.PAUSE&&t.type!=l.ERROR&&t.type!=l.ABORT&&t.type!=l.ENDED&&t.type!=l.PLAY_NOT_ALLOWED||(this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.stopCuePointsListener(),t.type!=l.STOP&&t.type!=l.ERROR&&t.type!=l.ABORT&&t.type!=l.PLAY_NOT_ALLOWED||(this.__isSidebandMetadataActivated()&&this.sidebandMetadata&&this.sidebandMetadata.destroy(),this._streamStopCallback()),t.type!=l.ERROR&&t.type!=l.ENDED||this._streamFailedCallback(),t.type==l.PAUSE&&s.stop())},__isSidebandMetadataActivated:function(){return void 0!=this._liveApiParams&&void 0!=this._liveApiParams.sbmConfig&&null!==this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.active&&this._liveApiParams.sbmConfig.info.active},__isASyncCuePointDispatcherActivated:function(){return void 0!=this._liveApiParams&&this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.aSyncCuePointFallback},__onCuePoint:function(t){this._cuePointCallback(t)},__onHlsCuePoint:function(t){this._hlsCuePointCallback(t)},__onSpeechCuePoint:function(t){this._speechCuePointCallback(t)},__onCustomCuePoint:function(t){this._customCuePointCallback(t)},__onAdBreak:function(t){this._adBreakCallback(t)},__activateSidebandMetadata:function(){this.sidebandMetadata||(this.sidebandMetadata=new d(this.audioNode)),this._liveApiParams.url=this.sidebandMetadata.getStreamConnectionUrl(this._liveApiParams.url),this.sidebandMetadata.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.sidebandMetadata.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)),this.sidebandMetadata.setHlsCuePointCallback(n.hitch(this,this.__onHlsCuePoint)),this.sidebandMetadata.setSpeechCuePointCallback(n.hitch(this,this.__onSpeechCuePoint)),this.sidebandMetadata.setCustomCuePointCallback(n.hitch(this,this.__onCustomCuePoint)),this._liveApiParams.sbmConfig.aSyncCuePointFallback&&this.sidebandMetadata.setErrorCallback(n.hitch(this,this.__onSidebandMetadataError))},__activateAsyncCuePointDispatcher:function(){void 0==this.aSyncCuePointDispatcher&&(this.aSyncCuePointDispatcher=new h(this.cfg),this.aSyncCuePointDispatcher.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.aSyncCuePointDispatcher.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)))},__onSidebandMetadataError:function(){s.isStopped()||(this.aSyncCuePointDispatcher||this.__activateAsyncCuePointDispatcher(),this.aSyncCuePointDispatcher.startCuePointsListener(this.mount))},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;var n=this.statusMap[t.type];n&&e[n.status]&&this._playbackStatusCallback({status:e[n.status],code:n.code})}}});return f}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,a=n(18);i=[n(1),n(2),n(3),n(13),n(11),n(19),n(23),n(4),n(71)],r=function(t,e,n,i,r,o,s,u,l){var c=t([i],{constructor:function(t){this.playerNode=t,this.html5Player=new l,this.html5Player.on("html5-playback-status",e.hitch(this,this.__onHTML5PlayerStatus)),this.html5OnDemandNode=this.__createHTML5Elements(),this._playbackStatusCallback=null,this._clickTrackingElementClickedCallback=null,this._adServerType=null,this._clickThrough=null,this._clickTrackings=null,this.onVideoNodeClickHandler=n(this.html5OnDemandNode,"click",e.hitch(this,this.__onVideoNodeClick)),this.onVideoNodeTouchHandler=n(this.html5OnDemandNode,"touchstart",e.hitch(this,this.__onVideoNodeClick))},play:function(t){this._adServerType=null,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.audioNode,isLive:!1})},playAd:function(t){this.__initHtml5AdPlayer(this.videoNode),this._clickThrough=t.clickThrough,this._clickTrackings=t.clickTrackings,this._adServerType=t.adServerType,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.videoNode,isLive:!1})},skip:function(){void 0!=this.html5Player&&(this.html5Player.skip(),this.__resetHTML5ElementsStyle(this.mediaNode))},stop:function(){void 0!=this.html5Player&&this.html5Player.stop()},pause:function(){void 0!=this.html5Player&&this.html5Player.pause()},resume:function(){void 0!=this.html5Player&&this.html5Player.resume()},seek:function(t){void 0!=this.html5Player&&this.html5Player.seek(t)},setVolume:function(t){null!=this.html5Player&&this.html5Player.setVolume(t)},mute:function(){null!=this.html5Player&&this.html5Player.mute()},unMute:function(){null!=this.html5Player&&this.html5Player.unMute()},initMediaTag:function(){this.audioNode||(this.audioNode=this.__createMediaTag("audio")),this.videoNode||(this.videoNode=this.__createMediaTag("video"))},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setClickTrackingElementClickedHandler:function(t){this._clickTrackingElementClickedCallback=t},clean:function(){null!=this.audioNode&&(u("ie11")?(r.destroy(this.audioNode),this.audioNode=null):(o.has(this.audioNode,"src")&&o.remove(this.audioNode,"src"),"function"==typeof this.audioNode.webkitExitFullScreen&&this.audioNode.webkitExitFullScreen())),null!=this.videoNode&&(u("ie11")?(r.destroy(this.videoNode),this.videoNode=null):(o.has(this.videoNode,"src")&&o.remove(this.videoNode,"src"),"function"==typeof window.document.exitFullscreen&&window.document.fullscreen&&window.document.exitFullscreen(),this.__resetHTML5ElementsStyle(this.videoNode))),this.__createHTML5Elements()},__onHTML5PlayerStatus:function(t){t.adServerType=this._adServerType,this.__emitPlaybackStatus(t)},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;this._adServerType||"canPlayThrough"!=t.type||(t.type="play");var n=this.statusMap[t.type];n&&(statusMsg=e[n.status]?e[n.status]:n.status,codeMsg=e[n.code]?e[n.code]:n.code,this._playbackStatusCallback({type:statusMsg,code:codeMsg,html5Node:t.mediaNode,adServerType:t.adServerType}))}},__createHTML5Elements:function(){if(null==this.html5OnDemandNode){var t=r.create("div",{id:"tdplayer_ondemand"},this.playerNode,"first");return t}},__createMediaTag:function(t){if(t){var e=r.create(t,{id:"tdplayer_od_"+t+"node",type:t},this.html5OnDemandNode,"first");o.set(e,"height","0%"),o.set(e,"width","0%"),o.set(e,"x-webkit-airplay","allow");var n=r.create("source",{id:"tdplayer_od"+t+"source"},e,"first");o.set(n,"src",""),o.set(e,"playsinline","");try{e.play().catch(function(t){}),e.pause()}catch(t){}return e}},__initHtml5AdPlayer:function(t){this.initHTMLElementsStyle(t),this.isVideoClicked=!1},__resetHTML5ElementsStyle:function(t){t&&(s.set(t,"width","0px"),s.set(t,"height","0px"),s.set(t,"display","none"))},initHTMLElementsStyle:function(t){t&&(s.set(t,"width","100%"),s.set(t,"height","100%"),s.set(t,"display","block"),s.set(this.html5OnDemandNode,"width","100%"),s.set(this.html5OnDemandNode,"height","100%"),s.set(this.html5OnDemandNode,"background-color","#000000"),s.set(this.html5OnDemandNode,"display","block"))},__onVideoNodeClick:function(t){null!=this._clickThrough&&("touchstart"==t.type&&this.onVideoNodeClickHandler.remove(),this._clickTrackingElementClickedCallback({clickThrough:this._clickThrough,clickTrackings:this._clickTrackings}))},statusMap:{canPlay:{status:"buffering",code:"MEDIA_BUFFERING"},canPlayThrough:{status:"buffering",code:"MEDIA_BUFFERING"},dataLoading:{status:"buffering",code:"MEDIA_BUFFERING"},emptied:{status:"buffering",code:"MEDIA_BUFFERING"},ended:{status:"ended",code:"MEDIA_ENDED"},error:{status:"error",code:"MEDIA_ERROR"},loadStart:{status:"buffering",code:"MEDIA_BUFFERING"},pause:{status:"pause",code:"MEDIA_PAUSED"},play:{status:"play",code:"MEDIA_STARTED"},stalled:{status:"stop",code:"MEDIA_STOPPED"},stop:{status:"stop",code:"MEDIA_STOPPED"},suspend:{status:"buffering",code:"MEDIA_BUFFERING"},waiting:{status:"buffering",code:"MEDIA_BUFFERING"},timeupdate:{status:"timeupdate",code:"MEDIA_TIME_UPDATE"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}}});return c}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e){function n(t){function e(t,e){t.url=e.url?e.url._text:null,t.mount=e.mount?e.mount._text:null}this.url=null,this.mount=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.sampleRate=parseInt(e._attr.samplerate._value),t.codec=e._attr.codec._value,t.channels=parseInt(e._attr.channels._value),t.isMP3=t.codec.indexOf("mp3")!==-1,t.isAAC=t.codec.indexOf("aac")!==-1}this.index=null,this.codec=null,this.bitRate=null,this.sampleRate=null,this.codec=null,this.channels=null,e(this,t)}t.exports=n},function(t,e,n){function i(t){if(this.streamingConnections=t,this.totalIteration=1,this.first=!1,this.last=!1,this.streamingConnectionIndex=0,r.isEmpty(this.streamingConnections))throw new Error("ConnectionIterator::constructor At least one connection is needed.");this.reset=function(){this.streamingConnectionIndex=0},this.current=function(){return this.streamingConnections[this.streamingConnectionIndex]},this.next=function(){return this.first=!1,this.streamingConnectionIndex++,this.last=r.last(this.streamingConnections)===this.streamingConnections[this.streamingConnectionIndex],this.current()},this.hasLooped=function(){return this.last},this.isLastConnectionByMount=function(){var t=r.groupBy(this.streamingConnections,"mount"),e=t[this.current().mount].length;return this.totalIteration===e?(this.totalIteration=1,!0):(this.totalIteration++,!1)},this.reset()}var r=n(8);t.exports=i},function(t,e,n){function i(t,e,n,i,c,h,f,p){function g(t,e){return r.flatMap(t,function(t){return r.flatMap(t.servers,function(n){return t.transports.map(function(i){var a=m(t),o=y(t);return{url:n+"/"+t.mount+(i.mountSuffix?i.mountSuffix:"")+("html5"===e.toLowerCase()?a:""),mount:t.mount,isGeoBlocked:t.status.isGeoBlocked,isAudioAdaptive:t.mediaFormat.isAudioAdaptive,alternateContent:t.alternateContent,mimeType:o,format:t.format,uuidEnabled:r.some(t.metrics,function(t){return"uuid"===t.name}),sendPageUrl:t.sendPageURL,hasVideo:t.mediaFormat.hasVideo,type:t.mediaFormat.type,metadata:t.metadata,tags:t.tags,mountpoint:t,isHLS:!!i.transport&&"hls"===i.transport.toLowerCase(),isHLSTS:!!i.transport&&"hlsts"===i.transport.toLowerCase()}})})})}function m(t){return t.mediaFormat.audioTracks[0].isMP3?".mp3":v(t)}function v(t){return!t.mediaFormat.audioTracks[0].isAAC||t.isAudioAdaptive||t.hasHLS()||t.hasHLSTS()?"":".aac"}function y(t){var e=null;return t.hasHLS()||t.mediaFormat.isAudioAdaptive?e="application/x-mpegURL":t.mediaFormat.audioTracks[0].isAAC?e="audio/mp4":t.mediaFormat.audioTracks[0].isMP3&&(e="audio/mpeg;codecs=mp3"),e}this.DEFAULT_TRANSPORTS=["http","hls","hlsts"],this.RTMP_TRANSPORTS=["rtmpe","rtmpte","rtmp","rtmpt"],this.mountPointsError=[];var _=new a(t),E=p?d+"//"+p+"-"+_.endpoint.liveStream:d+"//"+_.endpoint.liveStream,b=this;this.getStreamingConnections=function(t,r,a){var d=new o(E);return d.getLiveStreamConfig(t).then(function(t){var o=l.toSafeArray(t.mountpoints.mountpoint).filter(function(t){return t.status["status-code"]._text>=300&&b.mountPointsError.push(new s(t)),t.status["status-code"]._text<300}).map(function(t){return new s(t)});return o=u.filterMountPoints(o,e,n,r,a,!i,!c,h,f),g(o,n)})}}var r=n(8),a=n(15),o=n(140),s=n(143),u=n(72),l=n(30),c=n(21),d=c.getProtocol();t.exports=i},function(t,e,n){function i(t,e){return o.Promise(function(n,i,r){var a=new l;a.request(t,e,{handleAs:"xml",preventCache:!0,query:e,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(t,e){t.station||t.mount,n(e)},function(t,e){t.station?console.error("liveStreamAPI::_onLoadError - station:"+t.station):t.mount&&console.error("liveStreamAPI::_onLoadError - mount:"+t.mount),i(e)})})}function r(t){var e=s.assign({},t);if(void 0==e||null==e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query must be provided.");if("string"==typeof e&&(e={station:e}),"object"!=typeof e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query object must be provided.");if(!e.station&&!e.mount)throw new Error("liveStreamAPI::getLiveStreamConfig(): A query must contain at least a station or mount parameter.");return e.transports&&0!=e.transports.length||(e.transports=c),e.transports&&(e.transports=e.transports.join(",")),
e}function a(t){var e=this;this.configs=[],this._requestProvisioningData=i,this.getConfig=function(t){var e;return t.station?e=this.configs[t.station]:delete t.station,t.mount?e=this.configs[t.mount+"_MOUNT"]:delete t.mount,e},this.getLiveStreamConfig=function(n){return o.Promise(function(i,a){try{var o=r(n)}catch(t){a(t)}var s=e.getConfig(o);s&&s.lastRefreshTime+d>=(new Date).getTime()?i(s):(o.version=h,e._requestProvisioningData(t,o).then(function(t){var n=u.xmlToJson(t);o.station?(e.configs[o.station]=n,e.configs[o.station].lastRefreshTime=(new Date).getTime()):o.mount&&(e.configs[o.mount+"_MOUNT"]=n,e.configs[o.mount+"_MOUNT"].lastRefreshTime=(new Date).getTime()),i(n)}))})}}var o=n(96),s=n(8),u=n(16),l=n(10),c=["http","hls","hlsts"],d=6e4,h=1.9;t.exports=a},function(t,e,n){function i(t){function e(t,e){t.container=e._attr.container._value,t.cuePoints=e._attr.cuepoints._value,t.trackScheme=e._attr.trackScheme._value;var n=a.toSafeArray(e.audio);t.audioTracks=n.map(function(t){return new o(t)});var i=a.toSafeArray(e.video);t.videoTracks=i.map(function(t){return new s(t)}),t.isAudioAdaptive=t.trackScheme===l,t.hasAudio=!r.isEmpty(t.audioTracks),t.hasVideo=!r.isEmpty(t.videoTracks),t.type=t.hasVideo?u.VIDEO:u.AUDIO}this.container=null,this.cuePoints=null,this.trackScheme=null,this.audioTracks=null,this.videoTracks=null,this.hasAudio=null,this.hasVideo=null,this.type=null,this.isAudioAdaptive=null,e(this,t)}var r=n(8),a=n(30),o=n(137),s=n(149),u=n(62),l="audio-adaptive";t.exports=i},function(t,e){function n(t){function e(t,e){t.shoutcastV1=e["shoutcast-v1"]?{active:e["shoutcast-v1"]._attr.enabled._value,mountSuffix:e["shoutcast-v1"]._attr.mountSuffix._value}:null,t.shoutcastV2=e["shoutcast-v2"]?{active:e["shoutcast-v2"]._attr.enabled._value,mountSuffix:e["shoutcast-v2"]._attr.mountSuffix._value}:null,t.sseSideband=e["sse-sideband"]?{active:e["sse-sideband"]._attr.enabled._value,streamSuffix:e["sse-sideband"]._attr.streamSuffix._value,metadataSuffix:e["sse-sideband"]._attr.metadataSuffix._value}:null}this.shoutcastV1=null,this.shoutcastV2=null,this.sseSideband=null,e(this,t)}t.exports=n},function(t,e,n){function i(t){function e(t,e){t.alternateContent=e["alternate-content"]?new o(e["alternate-content"]):null,t.mount=e.mount._text||null,t.status=new s(e.status),e.status["status-code"]._text<300&&(t.tags=!e._attr||e._attr.tags||""===e._attr.tags._value?[]:e._attr.tags._value.split(",").map(function(t){return new u(t)}),t.transports=a.toSafeArray(e.transports.transport).map(function(t){return new l(t)}),t.metadata=new c(e.metadata),t.servers=new d(e.servers).servers,t.mediaFormat=new h(e["media-format"]),t.metrics=!e.metrics||r.isEmpty(e.metrics.tag)?[]:a.toSafeArray(e.metrics.tag).map(function(t){return new u(t)}),t.format=e.format._text||null,t.bitRate=r.toSafeInteger(e.bitrate._text),t.authentication=!!e.authentication&&!!parseInt(e.authentication._text),t.timeout=e.timeout?r.toSafeInteger(e.timeout._text):0,t.sendPageURL=!!e["send-page-url"]&&!!parseInt(e["send-page-url"]._text),t.isAvailable=!t.status.isError&&!t.status.isGeoBlocked&&!r.isEmpty(t.servers))}f.call(this),e(this,t),this.hasTag=function(t){return r.some(this.tags,function(e){return e.name==t})},this.hasMetric=function(t){return r.some(this.metrics,function(e){return e.name===t})}}var r=n(8),a=n(30),o=n(136),s=n(146),u=n(147),l=n(148),c=n(142),d=n(145),h=n(141),f=n(144);t.exports=i},function(t,e,n){function i(){this.hasHLS=function(t){return t||(t=this),r.some(t.transports,function(t){return"hls"===t.transport})},this.hasHLSTS=function(t){return t||(t=this),r.some(t.transports,function(t){return"hlsts"===t.transport})}}var r=n(8);t.exports=i},function(t,e,n){function i(t){function e(t,e){t.servers=r.flatMap(a.toSafeArray(e.server),function(t){var e=t.ip._text;return a.toSafeArray(t.ports.port).map(function(t){var n=t._attr.type._value,i=t._text;return n+"://"+e+":"+i})})}this.servers=null,e(this,t)}var r=n(8),a=n(30);t.exports=i},function(t,e){function n(t){function e(t,e){t.statusCode=e["status-code"]?e["status-code"]._text:-1,t.message=e["status-message"]?e["status-message"]._text:null,t.isError=t.statusCode>=300||t.statusCode===-1,t.isGeoBlocked=453===t.statusCode}this.statusCode=null,this.message=null,this.isError=!1,this.isGeoBlocked=!1,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.name=e?e:null}this.name=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.mountSuffix=e._attr?e._attr.mountSuffix._value:null,t.transport=e._text||null}this.mountSuffix=null,this.transport=null,e(this,t)}t.exports=n},function(t,e){function n(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.frameRate=parseFloat(e._attr.framerate._value),t.width=parseInt(e._attr.width._value),t.height=parseInt(e._attr.height._value),t.aspect=parseFloat(e._attr.aspect._value),t.keyframeInterval=parseInt(e._attr["keyframe-interval"]._value)}this.index=null,this.codec=null,this.bitRate=null,this.frameRate=null,this.width=null,this.height=null,this.aspect=null,this.keyframeInterval=null,e(this,t)}t.exports=n},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(151)],r=function(t,e,n,i){var r=t([],{constructor:function(t){this._sessionId=null,this._mediaNode=t,this._streamTimer=null,this._timer=0,this._connectionTime=0,this._onPlayHandler=n.hitch(this,this.__onTimeUpdate)},init:function(t){this._connectionTime=(new Date).getTime(),this._streamTimer=setInterval(this._onPlayHandler,250),this.sidebandMetadataConnector=new i,this.sidebandMetadataConnector.setSidebandMetadataFallbackCallback(n.hitch(this,this.__onSidebandMetadataFallback)),this.sidebandMetadataConnector.connect(this.__getMetadataConnectionUrl(t.url,t.mount,t.sbmConfig))},destroy:function(){this.onTimeUpdateListener&&this.onTimeUpdateListener.remove(),clearInterval(this._streamTimer),this._timer=0,this._connectionTime=0,this.sidebandMetadataConnector&&this.sidebandMetadataConnector.destroy(),delete this.sidebandMetadataConnector},getStreamConnectionUrl:function(t){return t+(t.indexOf("?")!=-1?"&":"?")+"sbmid="+this.__generateSessionId()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},setHlsCuePointCallback:function(t){this._hlsCuePointCallback=t},setSpeechCuePointCallback:function(t){this._speechCuePointCallback=t},setCustomCuePointCallback:function(t){this._customCuePointCallback=t},setErrorCallback:function(t){this._errorCallback=t},__getMetadataConnectionUrl:function(t,e,n){return t&&e&&null!==n&&null!==n.info?t.split("/")[0]+"//"+t.split("/")[2]+"/"+e+n.info.metadataSuffix+"?sbmid="+this._sessionId:null},__generateSessionId:function(){var t=(new Date).getTime();return this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)}),this._sessionId},__onSidebandMetadataFallback:function(){this.destroy(),this._errorCallback({})},__onTimeUpdate:function(){this._timer=(new Date).getTime()-this._connectionTime,this.isStopped||this.isPaused||this.sidebandMetadataConnector&&this.sidebandMetadataConnector.getCurrentCuePoint()&&this._timer>=this.sidebandMetadataConnector.getCurrentCuePoint().timestamp&&("track"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._trackCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"ad"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._adBreakCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"hls"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._hlsCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"speech"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._speechCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"custom"===this.sidebandMetadataConnector.getCurrentCuePoint().type&&this._customCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}),this.sidebandMetadataConnector.shiftCuePointQueue())}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(3),n(6),n(2),n(63),n(61),n(38),n(60)],r=function(t,e,n,i,r,a,o,s){var u=t([],{SUPPORTED_EVENTS:["onMetaData","onCuePoint","onCuePointPreview","onCuePointPreviewExpired"],MAX_BACKOFF_RETRY:3,cuePointMap:{timestamp:"timestamp",type:"name",cue_title:a.CUE_TITLE,track_artist_name:a.ARTIST_NAME,track_album_name:a.ALBUM_NAME,program_id:a.PROGRAM_ID,cue_time_duration:a.CUE_TIME_DURATION,cue_time_start:a.CUE_TIME_START,track_id:a.TRACK_ID,track_nowplaying_url:a.NOW_PLAYING_URL,track_cover_url:a.TRACK_COVER_URL,ad_id:o.AD_ID,ad_type:o.AD_TYPE,cue_title:o.CUE_TITLE,cue_time_duration:o.CUE_TIME_DURATION,ad_url:o.AD_URL,ad_vast_url:o.AD_VAST_URL,ad_vast:o.AD_VAST,hls_track_id:s.HLS_TRACK_ID,hls_segment_id:s.HLS_SEGMENT_ID},constructor:function(){this._eventSource=null,this._eventQueue=[],this._currentSbmUrl=null,this._backOffRetry=0,this.__onMessageHandler=i.hitch(this,this.__onMessage),this.__onOpenHandler=i.hitch(this,this.__onOpen),this.__onErrorHandler=i.hitch(this,this.__onError)},connect:function(t){this._currentSbmUrl=t,this.__subscribe(t),this.__resetBackOff()},destroy:function(){this.__unlisten(),this.__close()},getCurrentCuePoint:function(){return this._eventQueue.length>0?this._eventQueue[0]:null},shiftCuePointQueue:function(){this._eventQueue.length&&this._eventQueue.shift()},setSidebandMetadataFallbackCallback:function(t){this._sidebandMetadataFallbackCallback=t},__subscribe:function(t){null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null),"undefined"!=typeof EventSource&&(this._eventSource=new EventSource(t),this.__listen())},__listen:function(){this._messageListener=e(this._eventSource,"message",this.__onMessageHandler),this._openListener=e(this._eventSource,"open",this.__onOpenHandler),this._errorListener=e(this._eventSource,"error",this.__onErrorHandler)},__unlisten:function(){this._messageListener&&this._messageListener.remove(),this._openListener&&this._openListener.remove(),this._errorListener&&this._errorListener.remove()},__close:function(){this._currentSbmUrl=null,null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null)},__onMessage:function(t){var e=JSON.parse(t.data);if(void 0==e.type||this.__isSupportedEvent(e)){var n={};switch(e.type){case"onMetaData":this.__onMetadata(e);break;case"onCuePoint":n=this.__onCuePoint(e);break;case"onCuePointPreview":n=this.__onCuePointPreview(e);break;case"onCuePointPreviewExpired":n=this.__onCuePointPreviewExpired(e)}this._eventQueue.push(n)}},__onCuePoint:function(t){var e={};e.parameters=t.parameters,e.timestamp=t.timestamp,e.type=t.name;for(var n in t.parameters)this.cuePointMap[n]&&(e[this.cuePointMap[n]]=t.parameters[n]);return"ad"==e.type&&(e.isVastInStream=!!(void 0!=e[o.AD_VAST_URL]&&""!=e[o.AD_VAST_URL]||e[o.AD_VAST]&&""!=e[o.AD_VAST])),e},__onMetadata:function(t){},__onCuePointPreview:function(t){},__onCuePointPreviewExpired:function(t){},__onOpen:function(t){this.__resetBackOff()},__onError:function(t){console.error("sidebandMetadataConnector:error"),this._backOffRetry==this.MAX_BACKOFF_RETRY?this._sidebandMetadataFallbackCallback():this.__reconnect()},__isSupportedEvent:function(t){return n.indexOf(this.SUPPORTED_EVENTS,t.type)!=-1},__reconnect:function(){this._backOffRetry++,null!=this._currentSbmUrl&&this.__subscribe(this._currentSbmUrl)},__resetBackOff:function(){this._backOffRetry=0}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31),n(6),n(73),n(74),n(3)],r=function(t,e,n,i,r,a,o,s){var u=t([i],{constructor:function(t,e){this.artistData=null,this.inherited(arguments)},getName:function(){return null!=this.artistData?this.artistData.name:this.data.name},getBiography:function(){return this.artistData.biography},getBirthDate:function(){return this.artistData.beginDate},getEndDate:function(){return this.artistData.endDate},getBeginPlace:function(){return this.artistData.beginPlace},getEndPlace:function(){return this.artistData.endPlace},getIsGroup:function(){return this.artistData.isGroup},getCountry:function(){return this.artistData.country},getGenres:function(){for(var t=[],e=0;e<this.artistData.genres.length;e++)t.push(this.artistData.genres[e].name);return t},getSimilar:function(){return this.artistData.similars},getMembers:function(){return this.artistData.members},getWebsite:function(){return this.artistData.website},getTwitterUsername:function(){return this.artistData.twitter},getFacebookUrl:function(){return this.artistData.facebook},getAlbums:function(){if(null==this.albums){this.albums=[];var t;r.forEach(this.artistData.albums,function(e,n){t=new a(e,this.platformId),this.albums.push(t)},this)}return this.albums},getAlbumById:function(t){var e=-1;return r.forEach(this.getAlbums(),function(n,i){n.id==t&&(e=i)},this),e>-1?this.getAlbums()[e]:null},getPictures:function(){if(null==this.pictures){this.pictures=[];var t;r.forEach(this.artistData.pictures,function(e,n){e.artistId=this.id,t=new o(e,this.platformId),this.pictures.push(t)},this)}return this.pictures},getPictureById:function(t){var e=-1;return r.forEach(this.getPictures(),function(n,i){n.id==t&&(e=i)},this),e>-1?this.getPictures()[e]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicArtistUrl(this.id)),0==this.alreadyFetched){var i=new n;i.request(this.url,{isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("artist-complete",{artistId:this.id})},fetchAlbumByIds:function(t){"string"==typeof t&&(t=[t]),this.albumsQueue=e.clone(t);for(var n,i=0;i<t.length;i++)n=this.getAlbumById(t[i]),n.successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"album-complete",e.hitch(this,this._onAlbumComplete)),n.errorCallback=s(n,"album-error",e.hitch(this,this._onAlbumComplete)),n.fetchData()},fetchPictureByIds:function(t){"string"==typeof t&&(t=[t]),this.picturesQueue=e.clone(t);for(var n,i=0;i<t.length;i++)n=this.getPictureById(t[i]),n.successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"picture-complete",e.hitch(this,this._onPictureComplete)),n.errorCallback=s(n,"picture-error",e.hitch(this,this._onPictureComplete)),n.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("artist-error",{artistId:this.id})},_onLoadComplete:function(t,e){this.artistData=e.artist,this.alreadyFetched=!0,this.notify("artist-complete",{artistId:this.id})},_onAlbumComplete:function(t,e){this._removeAlbumFromQueue(t.albumId),0==this.albumsQueue.length&&this.notify("album-complete",this.albums)},_removeAlbumFromQueue:function(t){var e=-1;r.forEach(this.albumsQueue,function(n,i){n==t&&(e=i)},this),e>-1&&this.albumsQueue.splice(e,1)},_onPictureComplete:function(t,e){this._removePictureFromQueue(t.pictureId),0==this.picturesQueue.length&&this.notify("picture-complete",this.pictures)},_removePictureFromQueue:function(t){var e=-1;r.forEach(this.picturesQueue,function(n,i){n==t&&(e=i)},this),e>-1&&this.picturesQueue.splice(e,1)}});return u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n(1),n(75),n(152),n(73)],r=function(t,e,n,i){var r=t([],{constructor:function(t,e,n){this.songData=t,this.npeId=e,this.platformId=n,this.trackInstance=null,this.albumInstance=null,this.artistInstance=null,this.inherited(arguments)},track:function(){return void 0==this.songData.track?null:(null==this.trackInstance&&(this.trackInstance=new e(this.songData.track,this.platformId)),this.trackInstance)},artist:function(){return void 0==this.songData.artists?null:(null==this.artistInstance&&(this.artistInstance=new n(this.songData.artists[0],this.platformId)),this.artistInstance)},album:function(){return void 0==this.songData.album?null:(null==this.albumInstance&&(this.albumInstance=new i(this.songData.album,this.platformId)),this.albumInstance)}});return r}.apply(e,i),!(void 0!==r&&(t.exports=r))}])});
//# sourceMappingURL=td-sdk.min.js.map